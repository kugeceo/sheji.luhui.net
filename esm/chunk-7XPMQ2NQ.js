import{$a as Dc,A as ac,Ca as vc,Ea as xc,Ha as Sc,I as lc,K as cc,Ka as Cc,Ma as wc,Na as mi,Oa as kc,Pa as g,Qa as Tc,Ra as Ic,S as dc,Sa as S,Ta as ks,U as pc,Ua as Ut,Va as ct,Y as hc,Ya as ie,Z as ws,Za as Gt,_a as Mc,a as Kl,ab as oe,b as ui,bb as Ts,c as s,cb as Is,d as ql,da as uc,db as Ec,e as T,ea as Ro,eb as Ms,f as h,fb as Ds,g as Ar,gb as Es,h as Lr,ha as mc,hb as Pc,i as Jl,ib as be,j as Oo,jb as Ps,k as Zl,kb as zs,l as p,lb as zc,m as rt,ma as fc,mb as Ac,n as Ql,nb as Lc,o as tc,ob as Bc,p as I,pa as gc,pb as As,q as ec,qa as eo,qb as Ho,r as Qi,rb as Ls,s as to,sb as Br,t as ee,tb as Oc,u as ic,ua as bc,v as oc,w as rc,x as nc,xa as yc,y as sc,z as Fo}from"./chunk-2FC7YEBB.js";var jo=Kl((y5,nd)=>{var xg="Expected a function";var od=0/0;var Sg="[object Symbol]";var Cg=/^\s+|\s+$/g;var wg=/^[-+]0x[0-9a-f]+$/i;var kg=/^0b[01]+$/i;var Tg=/^0o[0-7]+$/i;var Ig=parseInt;var Mg=typeof global=="object"&&global&&global.Object===Object&&global;var Dg=typeof self=="object"&&self&&self.Object===Object&&self;var Eg=Mg||Dg||Function("return this")();var Pg=Object.prototype;var zg=Pg.toString;var Ag=Math.max;var Lg=Math.min;var qs=function(){return Eg.Date.now()};function Bg(i,t,e){var o,r,n,a,l,c,d=0,u=false,m=false,f=true;if(typeof i!="function"){throw new TypeError(xg)}t=rd(t)||0;if(Js(e)){u=!!e.leading;m="maxWait"in e;n=m?Ag(rd(e.maxWait)||0,t):n;f="trailing"in e?!!e.trailing:f}function b(P){var V=o,U=r;o=r=void 0;d=P;a=i.apply(U,V);return a}function v(P){d=P;l=setTimeout(C,t);return u?b(P):a}function y(P){var V=P-c,U=P-d,nt=t-V;return m?Lg(nt,n-U):nt}function x(P){var V=P-c,U=P-d;return c===void 0||V>=t||V<0||m&&U>=n}function C(){var P=qs();if(x(P)){return D(P)}l=setTimeout(C,y(P))}function D(P){l=void 0;if(f&&o){return b(P)}o=r=void 0;return a}function z(){if(l!==void 0){clearTimeout(l)}d=0;o=c=r=l=void 0}function L(){return l===void 0?a:D(qs())}function R(){var P=qs(),V=x(P);o=arguments;r=this;c=P;if(V){if(l===void 0){return v(c)}if(m){l=setTimeout(C,t);return b(c)}}if(l===void 0){l=setTimeout(C,t)}return a}R.cancel=z;R.flush=L;return R}function Js(i){var t=typeof i;return!!i&&(t=="object"||t=="function")}function Og(i){return!!i&&typeof i=="object"}function Fg(i){return typeof i=="symbol"||Og(i)&&zg.call(i)==Sg}function rd(i){if(typeof i=="number"){return i}if(Fg(i)){return od}if(Js(i)){var t=typeof i.valueOf=="function"?i.valueOf():i;i=Js(t)?t+"":t}if(typeof i!="string"){return i===0?i:+i}i=i.replace(Cg,"");var e=kg.test(i);return e||Tg.test(i)?Ig(i.slice(2),e?2:8):wg.test(i)?od:+i}nd.exports=Bg});var ip=Kl((Vk,ep)=>{var tp="Expected a function";var Zd=0/0;var t0="[object Symbol]";var e0=/^\s+|\s+$/g;var i0=/^[-+]0x[0-9a-f]+$/i;var o0=/^0b[01]+$/i;var r0=/^0o[0-7]+$/i;var n0=parseInt;var s0=typeof global=="object"&&global&&global.Object===Object&&global;var a0=typeof self=="object"&&self&&self.Object===Object&&self;var l0=s0||a0||Function("return this")();var c0=Object.prototype;var d0=c0.toString;var p0=Math.max;var h0=Math.min;var xa=function(){return l0.Date.now()};function u0(i,t,e){var o,r,n,a,l,c,d=0,u=false,m=false,f=true;if(typeof i!="function"){throw new TypeError(tp)}t=Qd(t)||0;if(vn(e)){u=!!e.leading;m="maxWait"in e;n=m?p0(Qd(e.maxWait)||0,t):n;f="trailing"in e?!!e.trailing:f}function b(P){var V=o,U=r;o=r=void 0;d=P;a=i.apply(U,V);return a}function v(P){d=P;l=setTimeout(C,t);return u?b(P):a}function y(P){var V=P-c,U=P-d,nt=t-V;return m?h0(nt,n-U):nt}function x(P){var V=P-c,U=P-d;return c===void 0||V>=t||V<0||m&&U>=n}function C(){var P=xa();if(x(P)){return D(P)}l=setTimeout(C,y(P))}function D(P){l=void 0;if(f&&o){return b(P)}o=r=void 0;return a}function z(){if(l!==void 0){clearTimeout(l)}d=0;o=c=r=l=void 0}function L(){return l===void 0?a:D(xa())}function R(){var P=xa(),V=x(P);o=arguments;r=this;c=P;if(V){if(l===void 0){return v(c)}if(m){l=setTimeout(C,t);return b(c)}}if(l===void 0){l=setTimeout(C,t)}return a}R.cancel=z;R.flush=L;return R}function m0(i,t,e){var o=true,r=true;if(typeof i!="function"){throw new TypeError(tp)}if(vn(e)){o="leading"in e?!!e.leading:o;r="trailing"in e?!!e.trailing:r}return u0(i,t,{"leading":o,"maxWait":t,"trailing":r})}function vn(i){var t=typeof i;return!!i&&(t=="object"||t=="function")}function f0(i){return!!i&&typeof i=="object"}function g0(i){return typeof i=="symbol"||f0(i)&&d0.call(i)==t0}function Qd(i){if(typeof i=="number"){return i}if(g0(i)){return Zd}if(vn(i)){var t=typeof i.valueOf=="function"?i.valueOf():i;i=vn(t)?t+"":t}if(typeof i!="string"){return i===0?i:+i}i=i.replace(e0,"");var e=o0.test(i);return e||r0.test(i)?n0(i.slice(2),e?2:8):i0.test(i)?Zd:+i}ep.exports=m0});import Wf from"styled-components";var Fc=Wf.div`
  position: absolute;
  width: 0;
  height: 0;
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: 5px solid ${i=>i.theme.dropdown.caretColor};
  transform: rotate(${i=>i.rotation||0}deg);
  display: inline-block;
  transition-duration: 0.3s;
  transition-timing-function: ease-in;
  right: 0;
  top: 13px;
`;import Yf from"styled-components";import $o from"react";import Gf,{css as jf}from"styled-components";import{css as Nf}from"styled-components";var ut=Nf`
  &:focus {
    outline: none;
    box-shadow: 0 0 2px ${i=>i.theme.focusOutlineColor};
  }
  &:-moz-focusring {
    outline: none;
    box-shadow: 0 0 2px ${i=>i.theme.focusOutlineColor};
  }
`;import{css as Vf}from"styled-components";var io=Vf`
  position: absolute !important;
  height: 1px;
  width: 1px;
  overflow: hidden;
  clip: rect(1px 1px 1px 1px); /* IE6, IE7 */
  clip: rect(1px, 1px, 1px, 1px);
`;import _o from"styled-components";import{keyframes as Uf}from"styled-components";var Or=Uf`
from {
  opacity: 1;
  transform: scale(0);
}
to {
  opacity: 0;
  transform: scale(10);
}
`;var Fr=_o.span`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`;var Bs=_o(Fr)``;var xt=_o(Fr)``;var oo=_o(Fr)``;var Rr={display:"none",left:0,top:0};var Hr=_o(Fr)`
  display: ${({display:i})=>i};
  left: ${({left:i})=>i}px;
  top: ${({top:i})=>i}px;
  pointer-events: none;
  border-radius: 50%;
  background-color: rgba(255, 255, 255, 0.12);
  animation: ${Or} 1.2s;
  width: 100px;
  height: 100px;
  margin-top: -50px;
  margin-left: -50px;
  opacity: 0;
`;var jt=jf`
  color: ${i=>i.theme.button.activeForeground};
  border-color: ${i=>i.theme.button.activeForeground};

  svg {
    color: ${i=>i.theme.button.activeForeground};
  }
`;var Xf=Gf.button`
  &&& {
    box-sizing: border-box;
  }
  text-align: center;
  position: relative;
  padding: 4px 8px;
  min-height: 32px;
  border-radius: ${i=>i.theme.shape.radiusMedium}px;
  font-size: ${i=>i.theme.measurements.fontSystem.button1.size}px;
  letter-spacing: ${i=>i.theme.measurements.fontSystem.button1.letterSpacing}px;
  text-transform: ${i=>i.theme.measurements.fontSystem.button1.case};
  font-family: ${i=>i.theme.typography.fontFamily}, sans-serif;
  cursor: pointer;
  border: none;
  background-color: transparent;
  overflow: hidden;
  ${ut}

  /* Active */

  &:active {
    ${jt}
  }

  ${({isActive:i})=>i&&jt}

  /* Disabled */

  &:disabled {
    cursor: default;
    pointer-events: none;

    ${xt} {
      background-color: ${i=>i.theme.button.outlinedInactiveOverlayColor};
    }
  }

  /* Hover */

  &:hover {
    ${oo} {
      background-color: ${i=>i.theme.button.hoverOverlayColor};
    }
  }

  div {
    font-size: ${i=>i.theme.measurements.fontSystem.button1.size}px;
    letter-spacing: ${i=>i.theme.measurements.fontSystem.button1.letterSpacing}px;
  }
`;var ft=class extends $o.Component{constructor(){super(...arguments);this.state=Rr;this.timeout=null;this.onClick=t=>{const e=t.currentTarget.getBoundingClientRect();const o=t.pageX-e.left;const r=t.pageY-e.top;if(this.state.display==="block"){this.setState({display:"none"},()=>{this.setRippleState(o,r)})}else{this.setRippleState(o,r)}this.props.onClick(t)};this.setRippleState=(t,e)=>{this.setState({left:t,top:e,display:"block"});this.timeout=setTimeout(()=>{this.setState({display:"none"})},1200)}}componentWillUnmount(){clearTimeout(this.timeout)}render(){const{isActive:t,isDisabled:e,label:o,ariaLabel:r,children:n,className:a,...l}=this.props;const{left:c,top:d,display:u}=this.state;return $o.createElement(Xf,{"data-test":r,className:a,isActive:t,disabled:e,"aria-label":r,...l,onClick:this.onClick},o,n,$o.createElement(Hr,{display:u,left:c,top:d}),$o.createElement(xt,null),$o.createElement(oo,null))}};ft.defaultProps={type:"button",isDisabled:false,isActive:false};var Wo=Yf(ft)`
  color: ${i=>i.theme.button.textPrimaryForeground};

  svg {
    color: ${i=>i.theme.button.textPrimaryForeground};
  }

  /* Repeat active styles so they are not overwritten */
  ${({isActive:i})=>i&&jt}

  ${xt} {
    display: none;
  }

  &:disabled {
    opacity: ${i=>i.theme.button.textInactiveOpacity};
  }
`;import Kf from"styled-components";var fi=Kf(ft)`
  color: ${i=>i.theme.button.textSecondaryForeground};

  /* Repeat active styles so they are not overwritten */
  ${({isActive:i})=>i&&jt}

  ${xt} {
    display: none;
  }

  &:disabled {
    opacity: ${i=>i.theme.button.textInactiveOpacity};
  }

  svg {
    color: ${i=>i.theme.button.textSecondaryForeground};
  }
`;import Qf from"styled-components";import Os from"react";import Rs,{css as Fs}from"styled-components";var qf=Rs(ft)`
  ${({fullWidth:i})=>i&&Fs`
      width: 100%;
    `}
`;var Jf=Rs.div`
  &:focus {
    outline: none;
  }

  > img {
    height: 18px;
    width: 18px;
  }

  > svg {
    height: 18px;
    width: 18px;
  }
  display: none;

  @media all and (min-width: 0) and (max-width: 599px) {
    display: flex;
  }
`;var Zf=Rs.div`
  display: flex;
  justify-content: center;
  align-items: center;
  &:focus {
    outline: none;
  }
  font-size: inherit;
  text-spacing: inherit;
  color: inherit;

  ${({isDisabled:i})=>i&&Fs`
      opacity: ${t=>t.theme.button.textInactiveOpacity};
    `}
  ${({hasIcon:i})=>i&&Fs`
      @media all and (min-width: 0) and (max-width: 599px) {
        display: none;
      }
    `}
`;var Xt=({label:i,children:t,icon:e,fullWidth:o,isDisabled:r,...n})=>{const a=Os.createElement(Zf,{hasIcon:!!e,isDisabled:r},i,t);return Os.createElement(qf,{fullWidth:o,isDisabled:r,...n},e&&Os.createElement(Jf,null,e),(t||i)&&a)};var Hs=Qf(Xt)`
  background: ${i=>i.theme.button.outlinedPrimaryBackground};
  color: ${i=>i.theme.button.outlinedPrimaryForeground};
  border: 1px solid ${i=>i.theme.button.outlinedBorderColor};
  min-width: 32px;

  svg {
    color: ${i=>i.theme.button.outlinedPrimaryForeground};
  }
`;import tg from"styled-components";var ro=tg(Xt)`
  background: ${i=>i.theme.button.outlinedSecondaryBackground};
  color: ${i=>i.theme.button.outlinedSecondaryForeground};
  border: 1px solid ${i=>i.theme.button.outlinedBorderColor};

  svg {
    color: ${i=>i.theme.button.outlinedSecondaryForeground};
  }

  ${({isActive:i})=>i&&jt}
`;import Rc from"react";import Hc from"styled-components";var eg=Hc(ft)`
  color: ${i=>i.theme.foreground};

  svg {
    color: ${i=>i.theme.foreground};
  }

  /* Repeat active styles so they are not overwritten */
  ${({isActive:i})=>i&&jt}

  ${xt} {
    display: none;
  }

  &:disabled {
    opacity: ${i=>i.theme.button.textInactiveOpacity};
  }
`;var ig=Hc.div`
  display: flex;
  &:focus {
    outline: none;
  }
`;var gi=({label:i,icon:t,children:e,...o})=>Rc.createElement(eg,{...o},Rc.createElement(ig,null,t));import og from"styled-components";var _s=og(Xt)`
  background: ${i=>i.theme.button.containedPrimaryBackground};
  color: ${i=>i.theme.button.containedPrimaryForeground};
  border: 1px solid ${i=>i.theme.button.containedPrimaryBackground};

  &:active {
    color: ${i=>i.theme.button.containedPrimaryForeground};
  }

  svg {
    color: ${i=>i.theme.button.containedPrimaryForeground};

    &:active {
      color: ${i=>i.theme.button.containedPrimaryForeground};
    }
  }
`;import No from"react";import Vo,{css as no}from"styled-components";var rg=Vo.div`
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 0 4px;
  font-size: ${i=>i.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${i=>i.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${i=>i.theme.measurements.fontSystem.label.case};
  ${i=>i.withBackground?no`
          color: ${i.theme.card.labelForeground};
        `:no`
          color: ${i.theme.card.foreground};
        `}
`;var ng=Vo.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  position: absolute;
  bottom: 0px;
  border-radius: ${i=>i.theme.shape.radiusMedium}px;
  left: 0;
  ${i=>i.withBackground?no`
          color: ${i.theme.card.labelForeground};
          height: 40px;
          background: ${i.theme.card.labelBackground};
        `:no`
          color: ${i.theme.card.foreground};
          height: 32px;
        `}
  width: 100%;
  cursor: pointer;
`;var sg=Vo.div`
  width: 0;
  height: 0;
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: 5px solid ${i=>i.theme.card.labelForeground};
  ${i=>i.withBackground?no`
          border-top-color: ${i.theme.card.labelForeground};
        `:no`
          border-top-color: ${i.theme.card.foreground};
        `}
  transform: rotate(${i=>i.rotation||0}deg);
  display: inline-block;
  transition-duration: 0.3s;
  transition-timing-function: ease-in;
`;var ag=Vo.span`
  display: flex;
  align-items: center;
  justify-content: center;
  padding-left: 10px;
`;var lg=Vo.div`
  ${io}
`;var $s=({children:i,className:t,caret:e,isActive:o,style:r,withBackground:n,hidden:a})=>{if(a){return No.createElement(lg,null,i)}const l=()=>No.createElement(ag,null,No.createElement(sg,{"aria-hidden":true,rotation:o?180:0,withBackground:n}));return No.createElement(ng,{className:t,withBackground:n,style:r},No.createElement(rg,{"data-test":S.CardLabel,withBackground:n},i,e&&l()))};import cg from"styled-components";var Ws=cg.div.attrs(i=>({"data-test":S.CardAvatar,style:{backgroundImage:`url(${i.url})`}}))`
  position: absolute;
  top: 4px;
  left: 4px;
  height: 28px;
  width: 28px;
  border-radius: 50%;
`;import{keyframes as dg}from"styled-components";var _c=dg`
  0% {
    opacity: 0;
    transform: scale(0.9);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
`;import{keyframes as pg}from"styled-components";var _r=pg`
  0% {
    opacity: 0;
    transform: scale(0.9) translateY(-20px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
`;import xi from"react";var Rt=[];var $c=function(){return Rt.some(function(i){return i.activeTargets.length>0})};var Wc=function(){return Rt.some(function(i){return i.skippedTargets.length>0})};var Nc="ResizeObserver loop completed with undelivered notifications.";var Vc=function(){var i;if(typeof ErrorEvent==="function"){i=new ErrorEvent("error",{message:Nc})}else{i=document.createEvent("Event");i.initEvent("error",false,false);i.message=Nc}window.dispatchEvent(i)};var bi;(function(i){i["BORDER_BOX"]="border-box";i["CONTENT_BOX"]="content-box";i["DEVICE_PIXEL_CONTENT_BOX"]="device-pixel-content-box"})(bi||(bi={}));var Ns=function(){function i(t,e,o,r){this.x=t;this.y=e;this.width=o;this.height=r;this.top=this.y;this.left=this.x;this.bottom=this.top+this.height;this.right=this.left+this.width;return Object.freeze(this)}i.prototype.toJSON=function(){var t=this,e=t.x,o=t.y,r=t.top,n=t.right,a=t.bottom,l=t.left,c=t.width,d=t.height;return{x:e,y:o,top:r,right:n,bottom:a,left:l,width:c,height:d}};i.fromRect=function(t){return new i(t.x,t.y,t.width,t.height)};return i}();var Uo=function(i){return i instanceof SVGElement&&"getBBox"in i};var $r=function(i){if(Uo(i)){var t=i.getBBox(),e=t.width,o=t.height;return!e&&!o}var r=i,n=r.offsetWidth,a=r.offsetHeight;return!(n||a||i.getClientRects().length)};var Vs=function(i){var t,e;var o=(e=(t=i)===null||t===void 0?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(o&&i instanceof o.Element)};var Uc=function(i){switch(i.tagName){case"INPUT":if(i.type!=="image"){break}case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return true}return false};var yi=typeof window!=="undefined"?window:{};var Wr=new WeakMap;var Gc=/auto|scroll/;var hg=/^tb|vertical/;var ug=/msie|trident/i.test(yi.navigator&&yi.navigator.userAgent);var re=function(i){return parseFloat(i||"0")};var so=function(i,t,e){if(i===void 0){i=0}if(t===void 0){t=0}if(e===void 0){e=false}return Object.freeze({inlineSize:(e?t:i)||0,blockSize:(e?i:t)||0})};var jc=Object.freeze({devicePixelContentBoxSize:so(),borderBoxSize:so(),contentBoxSize:so(),contentRect:new Ns(0,0,0,0)});var Us=function(i,t){if(t===void 0){t=false}if(Wr.has(i)&&!t){return Wr.get(i)}if($r(i)){Wr.set(i,jc);return jc}var e=getComputedStyle(i);var o=Uo(i)&&i.ownerSVGElement&&i.getBBox();var r=!ug&&e.boxSizing==="border-box";var n=hg.test(e.writingMode||"");var a=!o&&Gc.test(e.overflowY||"");var l=!o&&Gc.test(e.overflowX||"");var c=o?0:re(e.paddingTop);var d=o?0:re(e.paddingRight);var u=o?0:re(e.paddingBottom);var m=o?0:re(e.paddingLeft);var f=o?0:re(e.borderTopWidth);var b=o?0:re(e.borderRightWidth);var v=o?0:re(e.borderBottomWidth);var y=o?0:re(e.borderLeftWidth);var x=m+d;var C=c+u;var D=y+b;var z=f+v;var L=!l?0:i.offsetHeight-z-i.clientHeight;var R=!a?0:i.offsetWidth-D-i.clientWidth;var P=r?x+D:0;var V=r?C+z:0;var U=o?o.width:re(e.width)-P-R;var nt=o?o.height:re(e.height)-V-L;var Ae=U+x+R+D;var pi=nt+C+L+z;var hi=Object.freeze({devicePixelContentBoxSize:so(Math.round(U*devicePixelRatio),Math.round(nt*devicePixelRatio),n),borderBoxSize:so(Ae,pi,n),contentBoxSize:so(U,nt,n),contentRect:new Ns(m,c,U,nt)});Wr.set(i,hi);return hi};var Nr=function(i,t,e){var o=Us(i,e),r=o.borderBoxSize,n=o.contentBoxSize,a=o.devicePixelContentBoxSize;switch(t){case bi.DEVICE_PIXEL_CONTENT_BOX:return a;case bi.BORDER_BOX:return r;default:return n}};var Gs=function(){function i(t){var e=Us(t);this.target=t;this.contentRect=e.contentRect;this.borderBoxSize=[e.borderBoxSize];this.contentBoxSize=[e.contentBoxSize];this.devicePixelContentBoxSize=[e.devicePixelContentBoxSize]}return i}();var Vr=function(i){if($r(i)){return Infinity}var t=0;var e=i.parentNode;while(e){t+=1;e=e.parentNode}return t};var Xc=function(){var i=Infinity;var t=[];Rt.forEach(function n(a){if(a.activeTargets.length===0){return}var l=[];a.activeTargets.forEach(function c(d){var u=new Gs(d.target);var m=Vr(d.target);l.push(u);d.lastReportedSize=Nr(d.target,d.observedBox);if(m<i){i=m}});t.push(function c(){a.callback.call(a.observer,l,a.observer)});a.activeTargets.splice(0,a.activeTargets.length)});for(var e=0,o=t;e<o.length;e++){var r=o[e];r()}return i};var js=function(i){Rt.forEach(function t(e){e.activeTargets.splice(0,e.activeTargets.length);e.skippedTargets.splice(0,e.skippedTargets.length);e.observationTargets.forEach(function o(r){if(r.isActive()){if(Vr(r.target)>i){e.activeTargets.push(r)}else{e.skippedTargets.push(r)}}})})};var Yc=function(){var i=0;js(i);while($c()){i=Xc();js(i)}if(Wc()){Vc()}return i>0};var Xs;var Kc=[];var mg=function(){return Kc.splice(0).forEach(function(i){return i()})};var qc=function(i){if(!Xs){var t=0;var e=document.createTextNode("");var o={characterData:true};new MutationObserver(function(){return mg()}).observe(e,o);Xs=function(){e.textContent=""+(t?t--:t++)}}Kc.push(i);Xs()};var Jc=function(i){qc(function t(){requestAnimationFrame(i)})};var Ur=0;var fg=function(){return!!Ur};var gg=250;var bg={attributes:true,characterData:true,childList:true,subtree:true};var Zc=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"];var Qc=function(i){if(i===void 0){i=0}return Date.now()+i};var Ys=false;var yg=function(){function i(){var t=this;this.stopped=true;this.listener=function(){return t.schedule()}}i.prototype.run=function(t){var e=this;if(t===void 0){t=gg}if(Ys){return}Ys=true;var o=Qc(t);Jc(function(){var r=false;try{r=Yc()}finally{Ys=false;t=o-Qc();if(!fg()){return}if(r){e.run(1e3)}else if(t>0){e.run(t)}else{e.start()}}})};i.prototype.schedule=function(){this.stop();this.run()};i.prototype.observe=function(){var t=this;var e=function(){return t.observer&&t.observer.observe(document.body,bg)};document.body?e():yi.addEventListener("DOMContentLoaded",e)};i.prototype.start=function(){var t=this;if(this.stopped){this.stopped=false;this.observer=new MutationObserver(this.listener);this.observe();Zc.forEach(function(e){return yi.addEventListener(e,t.listener,true)})}};i.prototype.stop=function(){var t=this;if(!this.stopped){this.observer&&this.observer.disconnect();Zc.forEach(function(e){return yi.removeEventListener(e,t.listener,true)});this.stopped=true}};return i}();var Gr=new yg;var Ks=function(i){!Ur&&i>0&&Gr.start();Ur+=i;!Ur&&Gr.stop()};var vg=function(i){return!Uo(i)&&!Uc(i)&&getComputedStyle(i).display==="inline"};var td=function(){function i(t,e){this.target=t;this.observedBox=e||bi.CONTENT_BOX;this.lastReportedSize={inlineSize:0,blockSize:0}}i.prototype.isActive=function(){var t=Nr(this.target,this.observedBox,true);if(vg(this.target)){this.lastReportedSize=t}if(this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize){return true}return false};return i}();var ed=function(){function i(t,e){this.activeTargets=[];this.skippedTargets=[];this.observationTargets=[];this.observer=t;this.callback=e}return i}();var jr=new WeakMap;var id=function(i,t){for(var e=0;e<i.length;e+=1){if(i[e].target===t){return e}}return-1};var Go=function(){function i(){}i.connect=function(t,e){var o=new ed(t,e);jr.set(t,o)};i.observe=function(t,e,o){var r=jr.get(t);var n=r.observationTargets.length===0;if(id(r.observationTargets,e)<0){n&&Rt.push(r);r.observationTargets.push(new td(e,o&&o.box));Ks(1);Gr.schedule()}};i.unobserve=function(t,e){var o=jr.get(t);var r=id(o.observationTargets,e);var n=o.observationTargets.length===1;if(r>=0){n&&Rt.splice(Rt.indexOf(o),1);o.observationTargets.splice(r,1);Ks(-1)}};i.disconnect=function(t){var e=this;var o=jr.get(t);o.observationTargets.slice().forEach(function(r){return e.unobserve(t,r.target)});o.activeTargets.splice(0,o.activeTargets.length)};return i}();var vi=function(){function i(t){if(arguments.length===0){throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.")}if(typeof t!=="function"){throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.")}Go.connect(this,t)}i.prototype.observe=function(t,e){if(arguments.length===0){throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.")}if(!Vs(t)){throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element")}Go.observe(this,t,e)};i.prototype.unobserve=function(t){if(arguments.length===0){throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.")}if(!Vs(t)){throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element")}Go.unobserve(this,t)};i.prototype.disconnect=function(){Go.disconnect(this)};i.toString=function(){return"function ResizeObserver () { [polyfill code] }"};return i}();var sd=ui(jo());import Hg from"styled-components";import Rg from"react";var Xr=Rg.createContext({});var _g=Hg.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  margin: 0;
  background: ${i=>i.theme.background};
  color: ${i=>i.theme.foreground};
  display: flex;
  flex-direction: row;
  overflow: hidden;
  -webkit-touch-callout: none;
  user-select: none;
  * {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-family: '${i=>i.theme.typography.fontFamily}', sans-serif;
    /* css reset for a global box-sizing: border-box */
    box-sizing: content-box;

    scrollbar-width: thin;
    scrollbar-color: ${i=>i.theme.scrollbar.handleColor} transparent;

    &::-webkit-scrollbar-track {
      border-radius: 10px;
      background-color: transparent;
      margin: 1px;
    }

    &::-webkit-scrollbar {
      width: 6px;
      height: 6px;
      background-color: transparent;
    }

    &::-webkit-scrollbar-thumb {
      border-radius: 10px;
      box-shadow: inset 0 0 14px rgba(0, 0, 0, 0.4);
      background-color: ${i=>i.theme.scrollbar.handleColor};
    }

    &::-webkit-scrollbar-thumb:hover {
      background-color: ${i=>i.theme.scrollbar.handleColor};
    }
  }

  /* This will be applied first in some cases and should be treated as such */
  h1,
  h2,
  h3,
  input,
  textarea,
  label,
  span,
  div,
  p {
    line-height: normal;
  }
`;var Zs=class extends xi.Component{constructor(t){super(t);this.node=xi.createRef();this.saveEditorDimensions=t=>{this.setState({contextValue:{element:t,rect:t.getBoundingClientRect()}})};var e;if((e=xi)==null?void 0:e.version){const o=Number.parseInt(xi.version.split(".")[0],10);const r=Number.parseInt(xi.version.split(".")[1],10);if(o<16||o===16&&r<8)console.error("Please be aware that the PhotoEditorSDK will require React 16.8.6 or above.")}this.saveEditorDimensions=(0,sd.default)(this.saveEditorDimensions,100);this.resizeObserver=new vi(([o])=>{this.saveEditorDimensions(o.target)});this.state={contextValue:{element:null,rect:null}}}componentDidMount(){var t;if((t=this.node)==null?void 0:t.current){this.resizeObserver.observe(this.node.current)}}componentWillUnmount(){var t;if((t=this.node)==null?void 0:t.current){this.resizeObserver.unobserve(this.node.current)}}render(){const{children:t}=this.props;const{contextValue:e}=this.state;return xi.createElement(_g,{ref:this.node,"data-test":S.EditorContainer},xi.createElement(Xr.Provider,{value:e},t))}};import nn from"react";import Si,{PureComponent as sb,Component as da,forwardRef as aa,memo as yd,createElement as ab}from"react";import{useState as $g}from"react";if(!$g){throw new Error("mobx-react-lite requires React with Hooks support")}if(!Zl){throw new Error("mobx-react-lite requires mobx at least version 4 to be available")}import{unstable_batchedUpdates as ad}from"react-dom";import{useCallback as Ng,useEffect as A5,useState as Vg}from"react";var Wg=function(i,t){var e=typeof Symbol==="function"&&i[Symbol.iterator];if(!e)return i;var o=e.call(i),r,n=[],a;try{while((t===void 0||t-- >0)&&!(r=o.next()).done)n.push(r.value)}catch(l){a={error:l}}finally{try{if(r&&!r.done&&(e=o["return"]))e.call(o)}finally{if(a)throw a.error}}return n};function Qs(){var i=Wg(Vg(0),2),t=i[1];var e=Ng(function(){t(function(o){return o+1})},[]);return e}function ld(i){if(typeof Symbol==="function"){return Symbol.for(i)}return"__$mobx-react "+i+"__"}var Ug={};function cd(){if(typeof window!=="undefined"){return window}if(typeof global!=="undefined"){return global}if(typeof self!=="undefined"){return self}return Ug}var Gg=ld("observerBatching");function jg(i){i()}function Yr(i){if(!i){i=jg;if(false){console.warn("[MobX] Failed to get unstable_batched updates from react-dom / react-native")}}Ql({reactionScheduler:i});cd()[Gg]=true}var Xg=false;function ne(){return Xg}import{forwardRef as Qg,memo as gd}from"react";import oa from"react";function dd(i){return tc(i)}function pd(i){var t={cleanAt:Date.now()+Yg,reaction:i};return t}var Yg=1e4;var Kg=1e4;var Xo=new Set;var ta;function hd(){if(ta===void 0){ta=setTimeout(qg,Kg)}}function ud(i){Xo.add(i);hd()}function md(i){Xo.delete(i)}function qg(){ta=void 0;var i=Date.now();Xo.forEach(function(t){var e=t.current;if(e){if(i>=e.cleanAt){e.reaction.dispose();t.current=null;Xo.delete(t)}}});if(Xo.size>0){hd()}}import Jg from"react";var Kr=false;var qr=[];function ea(i){return function(){if(Kr){qr.push(i)}else{i()}}}function ia(i){Kr=true;qr=[];try{var t=i();Kr=false;var e=qr.length>0?qr:void 0;Jg.useLayoutEffect(function(){if(e){e.forEach(function(o){return o()})}},[e]);return t}finally{Kr=false}}var Zg={};function fd(i){return"observer"+i}function ao(i,t,e){if(t===void 0){t="observed"}if(e===void 0){e=Zg}if(ne()){return i()}var o=e.useForceUpdate||Qs;var r=o();var n=ea(r);var a=oa.useRef(null);if(!a.current){var l=new Oo(fd(t),function(){if(c.mounted){n()}else{l.dispose();a.current=null}});var c=pd(l);a.current=c;ud(a)}var d=a.current.reaction;oa.useDebugValue(d,dd);oa.useEffect(function(){md(a);if(a.current){a.current.mounted=true}else{a.current={reaction:new Oo(fd(t),function(){n()}),cleanAt:Infinity};n()}return function(){a.current.reaction.dispose();a.current=null}},[]);return ia(function(){var u;var m;d.track(function(){try{u=i()}catch(f){m=f}});if(m){throw m}return u})}var ra=function(){ra=Object.assign||function(i){for(var t,e=1,o=arguments.length;e<o;e++){t=arguments[e];for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))i[r]=t[r]}return i};return ra.apply(this,arguments)};function na(i,t){if(ne()){return i}var e=ra({forwardRef:false},t);var o=i.displayName||i.name;var r=function(a,l){return ao(function(){return i(a,l)},o)};r.displayName=o;var n;if(e.forwardRef){n=gd(Qg(r))}else{n=gd(r)}eb(i,n);n.displayName=o;return n}var tb={$$typeof:true,render:true,compare:true,type:true};function eb(i,t){Object.keys(i).forEach(function(e){if(!tb[e]){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}})}function lo(i){var t=i.children,e=i.render;var o=t||e;if(typeof o!=="function"){return null}return ao(o)}lo.propTypes={children:bd,render:bd};lo.displayName="Observer";function bd(i,t,e,o,r){var n=t==="children"?"render":"children";var a=typeof i[t]==="function";var l=typeof i[n]==="function";if(a&&l){return new Error("MobX Observer: Do not use children and render in the same time in`"+e)}if(a||l){return null}return new Error("Invalid prop `"+r+"` of type `"+typeof i[t]+"` supplied to `"+e+"`, expected `function`.")}import n4 from"react";import h4 from"react";Yr(ad);var vd=0;function lb(i){if(typeof Symbol==="function"){return Symbol(i)}var t="__$mobx-react "+i+" ("+vd+")";vd++;return t}var sa={};function Le(i){if(!sa[i]){sa[i]=lb(i)}return sa[i]}function Pd(i,t){if(xd(i,t))return true;if(typeof i!=="object"||i===null||typeof t!=="object"||t===null){return false}var e=Object.keys(i);var o=Object.keys(t);if(e.length!==o.length)return false;for(var r=0;r<e.length;r++){if(!Object.hasOwnProperty.call(t,e[r])||!xd(i[e[r]],t[e[r]])){return false}}return true}function xd(i,t){if(i===t){return i!==0||1/i===1/t}else{return i!==i&&t!==t}}var cb={$$typeof:1,render:1,compare:1,type:1,childContextTypes:1,contextType:1,contextTypes:1,defaultProps:1,getDefaultProps:1,getDerivedStateFromError:1,getDerivedStateFromProps:1,mixins:1,propTypes:1};function db(i,t){var e=Object.getOwnPropertyNames(Object.getPrototypeOf(i));Object.getOwnPropertyNames(i).forEach(function(o){if(!cb[o]&&e.indexOf(o)===-1){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(i,o))}})}function ye(i,t,e){if(!Object.hasOwnProperty.call(i,t)){Object.defineProperty(i,t,{enumerable:false,configurable:true,writable:true,value:e})}else{i[t]=e}}var Sd=Le("patchMixins");var zd=Le("patchedDefinition");function pb(i,t){var e=i[Sd]=i[Sd]||{};var o=e[t]=e[t]||{};o.locks=o.locks||0;o.methods=o.methods||[];return o}function Cd(i,t){var e=this;for(var o=arguments.length,r=new Array(o>2?o-2:0),n=2;n<o;n++){r[n-2]=arguments[n]}t.locks++;try{var a;if(i!==void 0&&i!==null){a=i.apply(this,r)}return a}finally{t.locks--;if(t.locks===0){t.methods.forEach(function(l){l.apply(e,r)})}}}function wd(i,t){var e=function o(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++){n[a]=arguments[a]}Cd.call.apply(Cd,[this,i,t].concat(n))};return e}function hb(i,t,e){var o=pb(i,t);if(o.methods.indexOf(e)<0){o.methods.push(e)}var r=Object.getOwnPropertyDescriptor(i,t);if(r&&r[zd]){return}var n=i[t];var a=Ad(i,t,r?r.enumerable:void 0,o,n);Object.defineProperty(i,t,a)}function Ad(i,t,e,o,r){var n;var a=wd(r,o);return n={},n[zd]=true,n.get=function l(){return a},n.set=function l(c){if(this===i){a=wd(c,o)}else{var d=Ad(this,t,e,o,c);Object.defineProperty(this,t,d)}},n.configurable=true,n.enumerable=e,n}var la=ec||"$mobx";var kd=Le("isMobXReactObserver");var Ld=Le("isUnmounted");var Zr=Le("skipRender");var Jr=Le("isForcingUpdate");function ub(i){var t=i.prototype;if(i[kd]){var e=ca(t);console.warn("The provided component class ("+e+") \n                has already been declared as an observer component.")}else{i[kd]=true}if(t.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(i["__proto__"]!==sb){if(!t.shouldComponentUpdate)t.shouldComponentUpdate=Td;else if(t.shouldComponentUpdate!==Td)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}Id(t,"props");Id(t,"state");var o=t.render;t.render=function(){return mb.call(this,o)};hb(t,"componentWillUnmount",function(){var r;if(ne()===true)return;(r=this.render[la])===null||r===void 0?void 0:r.dispose();this[Ld]=true;if(!this.render[la]){var n=ca(this);console.warn("The reactive render of an observer class component ("+n+") \n                was overriden after MobX attached. This may result in a memory leak if the \n                overriden reactive render was not properly disposed.")}});return i}function ca(i){return i.displayName||i.name||i.constructor&&(i.constructor.displayName||i.constructor.name)||"<component>"}function mb(i){var t=this;if(ne()===true)return i.call(this);ye(this,Zr,false);ye(this,Jr,false);var e=ca(this);var o=i.bind(this);var r=false;var n=new Oo(e+".render()",function(){if(!r){r=true;if(t[Ld]!==true){var l=true;try{ye(t,Jr,true);if(!t[Zr])da.prototype.forceUpdate.call(t);l=false}finally{ye(t,Jr,false);if(l)n.dispose()}}}});n["reactComponent"]=this;a[la]=n;this.render=a;function a(){r=false;var l=void 0;var c=void 0;n.track(function(){try{c=Jl(false,o)}catch(d){l=d}});if(l){throw l}return c}return a.call(this)}function Td(i,t){if(ne()){console.warn("[mobx-react] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side.")}if(this.state!==t){return true}return!Pd(this.props,i)}function Id(i,t){var e=Le("reactProp_"+t+"_valueHolder");var o=Le("reactProp_"+t+"_atomHolder");function r(){if(!this[o]){ye(this,o,ql("reactive "+t))}return this[o]}Object.defineProperty(i,t,{configurable:true,enumerable:true,get:function n(){var a=false;if(Ar&&Lr){a=Ar(true)}r.call(this).reportObserved();if(Ar&&Lr){Lr(a)}return this[e]},set:function n(a){if(!this[Jr]&&!Pd(this[e],a)){ye(this,e,a);ye(this,Zr,true);r.call(this).reportChanged();ye(this,Zr,false)}else{ye(this,e,a)}}})}var Bd=typeof Symbol==="function"&&Symbol.for;var Md=Bd?Symbol.for("react.forward_ref"):typeof aa==="function"&&aa(function(i){return null})["$$typeof"];var Dd=Bd?Symbol.for("react.memo"):typeof yd==="function"&&yd(function(i){return null})["$$typeof"];function E(i){if(i["isMobxInjector"]===true){console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'")}if(Dd&&i["$$typeof"]===Dd){throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.")}if(Md&&i["$$typeof"]===Md){var t=i["render"];if(typeof t!=="function")throw new Error("render property of ForwardRef was not a function");return aa(function e(){var o=arguments;return ab(lo,null,function(){return t.apply(void 0,o)})})}if(typeof i==="function"&&(!i.prototype||!i.prototype.render)&&!i["isReactClass"]&&!Object.prototype.isPrototypeOf.call(da,i)){return na(i)}return ub(i)}function Qr(){Qr=Object.assign||function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var o in e){if(Object.prototype.hasOwnProperty.call(e,o)){i[o]=e[o]}}}return i};return Qr.apply(this,arguments)}function fb(i,t){if(i==null)return{};var e={};var o=Object.keys(i);var r,n;for(n=0;n<o.length;n++){r=o[n];if(t.indexOf(r)>=0)continue;e[r]=i[r]}return e}var Yo=Si.createContext({});function gb(i){var t=i.children,e=fb(i,["children"]);var o=Si.useContext(Yo);var r=Si.useRef(Qr({},o,e));var n=r.current;if(false){var a=Qr({},n,e);if(!Pd(n,a)){throw new Error("MobX Provider: The set of provided stores has changed. See: https://github.com/mobxjs/mobx-react#the-set-of-provided-stores-has-changed-error.")}}return Si.createElement(Yo.Provider,{value:n},t)}gb.displayName="MobXProvider";function Ed(i,t,e,o){var r=Si.forwardRef(function(n,a){var l=Qr({},n);var c=Si.useContext(Yo);Object.assign(l,i(c||{},l)||{});if(a){l.ref=a}return Si.createElement(t,l)});if(o)r=E(r);r["isMobxInjector"]=true;db(t,r);r["wrappedComponent"]=t;r.displayName=bb(t,e);return r}function bb(i,t){var e;var o=i.displayName||i.name||i.constructor&&i.constructor.name||"Component";if(t)e="inject-with-"+t+"("+o+")";else e="inject("+o+")";return e}function yb(i){return function(t,e){i.forEach(function(o){if(o in e)return;if(!(o in t))throw new Error("MobX injector: Store '"+o+"' is not available! Make sure it is provided by some Provider");e[o]=t[o]});return e}}function O(){for(var i=arguments.length,t=new Array(i),e=0;e<i;e++){t[e]=arguments[e]}if(typeof arguments[0]==="function"){var o=arguments[0];return function(r){return Ed(o,r,o.name,true)}}else{return function(r){return Ed(yb(t),r,t.join("-"),false)}}}if(!da)throw new Error("mobx-react requires React to be available");if(!T)throw new Error("mobx-react requires mobx to be available");import co from"react";import Od,{css as Cb}from"styled-components";import vb,{css as xb}from"styled-components";var Ko=xb`
  position: absolute;
  top: 0;
  left: 0;
  height: ${i=>i.theme.measurements.colorItem.size}px;
  width: ${i=>i.theme.measurements.colorItem.size}px;
  border-radius: ${i=>i.theme.colorItem.borderRadius||`${i.theme.shape.radiusSmall}px`};
  pointer-events: none;
`;var Sb=vb.div.attrs(i=>({style:{background:i.color}}))`
  ${Ko}
  z-index: ${i=>i.theme.measurements.zIndex.colorItem.background};
`;var tn=Sb;var wb=Od.div`
  ${Ko}
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: ${i=>i.theme.measurements.zIndex.colorItem.overlay};

  box-sizing: border-box;
  border: 2px solid transparent;
  border-radius: ${i=>i.theme.colorItem.borderRadius||`${i.theme.shape.radiusSmall}px`};
  transition: border-color 300ms ease-in-out;
  ${i=>i.isActive&&Cb`
      border-color: ${i.theme.selectColor.activeBorderColor};
    `}
`;var pa=Od.span`
  display: inline-block;
  height: 2px;
  width: 2px;
  border-radius: 50%;
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.6);
  background: rgba(255, 255, 255, 0.87);
  margin: 1px;
  pointer-events: none;
`;var kb=({isActive:i,className:t,style:e})=>{return co.createElement(wb,{isActive:i,className:t,style:e},i&&co.createElement(co.Fragment,null,co.createElement(pa,null),co.createElement(pa,null),co.createElement(pa,null)))};var en=kb;import Tb from"styled-components";var Ib=Tb.button.attrs({type:"button"})`
  &&& {
    box-sizing: border-box;
  }
  position: relative;
  background: transparent;
  border: none;
  height: ${i=>i.theme.measurements.colorItem.size}px;
  width: ${i=>i.theme.measurements.colorItem.size}px;
  margin: ${i=>i.theme.colorItem.margin};
  padding: 0;
  cursor: pointer;
  border-radius: ${i=>i.theme.colorItem.borderRadius||`${i.theme.shape.radiusSmall}px`};

  &:hover {
    opacity: 0.7;
  }

  ${ut}

  &:disabled {
    opacity: ${i=>i.theme.selectColor.inactiveOpacity};
    cursor: default;
  }
`;var on=Ib;import Mb from"styled-components";var Db=Mb.div.attrs(i=>{const t=i.url?{backgroundImage:`url(${i.url})`}:{};return{style:t,...i.style}})`
  ${Ko}
  z-index: ${i=>i.theme.measurements.zIndex.colorItem.tiledBackground};
`;var rn=Db;var Eb=({isActive:i,onClick:t,color:e,label:o,isDisabled:r,tiledBackgroundUrl:n,className:a,style:l,children:c})=>{return nn.createElement(on,{disabled:r,onClick:t,"aria-label":o,className:a,style:l},nn.createElement(rn,{url:n}),nn.createElement(tn,{color:e}),nn.createElement(en,{isActive:i}),c)};var Fd=O("config")(E(Eb));import ha from"react";import Pb from"styled-components";var zb=Pb.div`
  display: block;
  opacity: 1;
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: ${i=>i.theme.measurements.zIndex.dialog.backdrop};
  text-align: left;
  background: ${i=>i.theme.modal.backdrop};
  height: 100%;
  width: 100%;
`;var sn=zb;import Ab from"react";import Lb,{css as Bb}from"styled-components";var Ob=Lb.div`
  display: none;
  visibility: hidden;
  opacity: 0;
  position: absolute;
  width: 100%;
  height: 100%;
  z-index: ${i=>i.theme.measurements.zIndex.dialog.base};
  transition: opacity 100s ease-in-out;

  ${i=>i.isVisible&&Bb`
      opacity: 1;
      display: block;
      visibility: visible;
    `};
`;var an=({isVisible:i,className:t,children:e})=>{return Ab.createElement(Ob,{isVisible:i,className:t},e)};import Fb from"styled-components";var Rb=Fb.div.attrs(({style:i})=>({role:"dialog","aria-hidden":false,style:i}))`
  display: flex;
  flex: 0 0 auto;
  flex-direction: column;
  transition: top 0.25s ease;
  position: absolute;
  top: calc(50% + ${i=>i.top}px);
  left: calc(50% + ${i=>i.left}px);
  width: ${i=>i.width};
  height: ${i=>i.height};
  transform: translate(-50%, -50%);
  border-radius: ${i=>i.theme.shape.radiusLarge}px;
  background: ${i=>i.theme.modal.background};
  color: ${i=>i.theme.modal.bodyForeground};
  z-index: ${i=>i.theme.measurements.zIndex.dialog.container};

  @media all and (min-width: 0) and (max-width: 640px) {
    text-align: center;
    width: auto;
    min-width: 200px;
    height: auto;
    top: 50%;
    left: 50%;
  }
`;var ln=Rb;var Hb=({isVisible:i=false,width:t="350px",height:e="fit-content",position:o,header:r,body:n,footer:a,className:l,style:c,children:d})=>ha.createElement(an,{isVisible:i},ha.createElement(sn,null),ha.createElement(ln,{height:e,width:t,left:o.x,top:o.y,className:l,style:c,"data-test":S.Dialog},r,n,d,a));var Rd=Hb;import _b from"styled-components";var $b=_b.div`
  display: flex;
  flex-direction: column;
  overflow: hidden;
  box-sizing: border-box;
  font-size: ${i=>i.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${i=>i.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${i=>i.theme.measurements.fontSystem.body.case};
  color: ${i=>i.theme.modal.bodyForeground};

  padding: 0px 20px 11px;
  &:first-child {
    padding-top: 11px;
  }

  @media all and (min-width: 0) and (max-width: 640px) {
    align-items: center;
  }
`;var ve=$b;import Wb from"styled-components";var Nb=Wb.div`
  display: flex;
  border-top: 2px solid
    ${i=>i.type==="error"?i.theme.error:i.theme.warning};

  min-height: 40px;
  justify-content: flex-end;
  @media all and (min-width: 0) and (max-width: 640px) {
    height: auto;
    flex-direction: column;
    justify-content: space-around;
  }
`;var po=Nb;import Vb from"styled-components";var Ub=Vb.h3`
  font-size: ${i=>i.theme.measurements.fontSystem.headline2.size}px;
  letter-spacing: ${i=>i.theme.measurements.fontSystem.headline2.letterSpacing}px;
  text-transform: ${i=>i.theme.measurements.fontSystem.headline2.case};
  color: ${i=>i.theme.modal.headerForeground};

  padding: 11px 20px 0px;
`;var ho=Ub;import qo from"react";import Hd,{keyframes as Gb}from"styled-components";var jb=Gb`
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
`;var Xb=Hd.div`
  display: inline-block;
  position: relative;
  width: 45px;
  height: 45px;
`;var cn=Hd.div`
  box-sizing: border-box;
  display: block;
  position: absolute;
  width: 40px;
  height: 40px;
  margin: 2.5px;
  border: 2.5px solid ${i=>i.theme.primary};
  border-radius: 50%;
  animation: ${jb} 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
  border-color: ${i=>i.theme.primary} transparent transparent
    transparent;

  :nth-child(1) {
    animation-delay: -0.45s;
  }
  :nth-child(2) {
    animation-delay: -0.3s;
  }
  :nth-child(3) {
    animation-delay: -0.15s;
  }
`;var Yb=({className:i,style:t})=>{return qo.createElement(Xb,{className:i,style:t},qo.createElement(cn,null),qo.createElement(cn,null),qo.createElement(cn,null),qo.createElement(cn,null))};var dn=Yb;import bn from"react";import ya from"react";var ua=["Moz","Webkit","O","ms"];function Kb(i){let t="";let e=true;let o;for(o=0;o<i.length;o+=1){if(e){t+=i[o].toUpperCase();e=false}else if(i[o]==="-"){e=true}else{t+=i[o]}}return t}function ma(i,t){return t?`${t}${Kb(i)}`:i}function qb(i="transform"){if(typeof window==="undefined"||typeof window.document==="undefined"){return""}const{style:t}=window.document.documentElement;if(i in t){return""}let e;for(e=0;e<ua.length;e+=1){if(ma(i,ua[e])in t){return ua[e]}}return""}var _d=qb();function pn(i,t){for(let e=0,{length:o}=i;e<o;e+=1){if(t.apply(t,[i[e],e,i])){return i[e]}}return null}function fa(i){return typeof i==="function"||Object.prototype.toString.call(i)==="[object Function]"}function uo(i){return typeof i==="number"&&!Number.isNaN(i)}function mt(i){return parseInt(i,10)}var hn="";function Jb(i,t){if(!hn){hn=pn(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],e=>{return fa(i[e])})}if(!fa(i[hn])){return false}return i[hn](t)}function ga(i,t,e){let o=i;do{if(Jb(o,t)){return true}if(o===e){return false}o=o.parentNode}while(o);return false}function un(i,t,e){if(!i){return}if(i.attachEvent){i.attachEvent(`on${t}`,e)}else if(i.addEventListener){i.addEventListener(t,e,true)}else{i[`on${t}`]=e}}function Be(i,t,e){if(!i){return}if(i.detachEvent){i.detachEvent(`on${t}`,e)}else if(i.removeEventListener){i.removeEventListener(t,e,true)}else{i[`on${t}`]=null}}function $d(i){let t=i.clientHeight;const e=i.ownerDocument.defaultView.getComputedStyle(i);t+=mt(e.borderTopWidth);t+=mt(e.borderBottomWidth);return t}function Wd(i){let t=i.clientWidth;const e=i.ownerDocument.defaultView.getComputedStyle(i);t+=mt(e.borderLeftWidth);t+=mt(e.borderRightWidth);return t}function Nd(i){let t=i.clientHeight;const e=i.ownerDocument.defaultView.getComputedStyle(i);t-=mt(e.paddingTop);t-=mt(e.paddingBottom);return t}function Vd(i){let t=i.clientWidth;const e=i.ownerDocument.defaultView.getComputedStyle(i);t-=mt(e.paddingLeft);t-=mt(e.paddingRight);return t}function Ud(i,t){const e=t===t.ownerDocument.body;const o=e?{left:0,top:0}:t.getBoundingClientRect();const r=i.clientX+t.scrollLeft-o.left;const n=i.clientY+t.scrollTop-o.top;return{x:r,y:n}}function Gd({x:i,y:t,rotation:e}){const o=`translate(${i}px,${t}px) rotate(${e}rad)`;return{[ma("transform",_d)]:o}}function jd(i,t){let e=null;if(i.targetTouches){e=pn(i.targetTouches,o=>t===o.identifier)}if(i.changedTouches&&!e){e=pn(i.changedTouches,o=>t===o.identifier)}return e}function Xd(i){if(i.targetTouches&&i.targetTouches[0]){return i.targetTouches[0].identifier}if(i.changedTouches&&i.changedTouches[0]){return i.changedTouches[0].identifier}return null}function ba(i){const t=i.findDOMNode();if(!t){return null}return t}function Zb(i){return{left:i.left,top:i.top,right:i.right,bottom:i.bottom}}function Yd(i,t,e){if(!i.props.bounds)return[t,e];let{bounds:o}=i.props;o=typeof o==="string"?o:Zb(o);const r=ba(i);if(!r)return[t,e];if(typeof o==="string"){const{ownerDocument:n}=r;const a=n.defaultView;let l;if(o==="parent"){l=r.parentNode}else{l=n.querySelector(o)}const c=a.getComputedStyle(r);const d=a.getComputedStyle(l);o={left:-r.offsetLeft+mt(d.paddingLeft)+mt(c.marginLeft),top:-r.offsetTop+mt(d.paddingTop)+mt(c.marginTop),right:Vd(l)-Wd(r)-r.offsetLeft+mt(d.paddingRight)-mt(c.marginRight),bottom:Nd(l)-$d(r)-r.offsetTop+mt(d.paddingBottom)-mt(c.marginBottom)}}if(uo(o.right))t=Math.min(t,o.right);if(uo(o.bottom))e=Math.min(e,o.bottom);if(uo(o.left))t=Math.max(t,o.left);if(uo(o.top))e=Math.max(e,o.top);return[t,e]}function mn(i,t,e){const{state:o}=i;const r=!uo(o.lastX);const n=ba(i);if(r){return{node:n,deltaX:0,deltaY:0,lastX:t,lastY:e,x:t,y:e}}return{node:n,deltaX:t-o.lastX,deltaY:e-o.lastY,lastX:o.lastX,lastY:o.lastY,x:t,y:e}}function fn(i,t){return{node:t.node,x:i.state.x+t.deltaX,y:i.state.y+t.deltaY,deltaX:t.deltaX,deltaY:t.deltaY,lastX:i.state.x,lastY:i.state.y}}function Kd(i){return i.props.axis==="both"||i.props.axis==="x"}function qd(i){return i.props.axis==="both"||i.props.axis==="y"}function gn(i,t){const e=ba(t);if(!e)return{x:0,y:0};let{offsetParent:o}=t.props;if(!o&&e instanceof HTMLElement){o=e.offsetParent||e.ownerDocument.body}return Ud(i,o)}var se={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};var Pt=se.mouse;var va={cancel:null,disabled:false,offsetParent:null,handle:null,transform:null,onStart:()=>{},onDrag:()=>{},onStop:()=>{},onMouseDown:()=>{}};var Ci=class extends ya.Component{constructor(){super(...arguments);this.state={dragging:false,lastX:NaN,lastY:NaN,touchIdentifier:void 0};this.findDOMNode=()=>{const{nodeRef:t}=this.props;return(t==null?void 0:t.current)||null};this.getTouchFromEvent=t=>{const e=Xd(t);this.setState({touchIdentifier:e});return jd(t,e)};this.preventDefault=t=>{if(t.stopPropagation){t.stopPropagation()}};this.handleDragStart=t=>{const e=this.findDOMNode();if(!e||!e.ownerDocument||!e.ownerDocument.body){throw new Error("<DraggableCore> not mounted on DragStart!")}const{ownerDocument:o}=e;if(this.props.disabled||!(t.target instanceof Node)||this.props.handle&&!ga(t.target,this.props.handle,e)||this.props.cancel&&ga(t.target,this.props.cancel,e)){return false}const r=gn(t,this);if(r==null){return false}const{x:n,y:a}=r;const l=mn(this,n,a);const c=this.props.onStart(t,l);if(c===false){return false}this.setState({dragging:true,lastX:n,lastY:a});if(Pt.move==="touchmove"){un(o,Pt.move,this.onTouchDrag)}else{un(o,Pt.move,this.onMouseDrag)}un(o,Pt.stop,this.handleDragStop)};this.handleDrag=t=>{const e=gn(t,this);if(e==null){return}const{x:o,y:r}=e;const n=mn(this,o,r);const a=this.props.onDrag(t,n);if(a===false){try{this.handleDragStop(new MouseEvent("mouseup"))}catch(l){const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",true,true,window,0,0,0,0,0,false,false,false,false,0,null);this.handleDragStop(c)}return}this.setState({lastX:o,lastY:r})};this.handleDragStop=t=>{if(!this.state.dragging){return}const e=gn(t,this);if(e==null){return}const{x:o,y:r}=e;const n=mn(this,o,r);const a=this.findDOMNode();this.setState({dragging:false,lastX:NaN,lastY:NaN});this.props.onStop(t,n);if(a){if(Pt.move==="touchmove"){Be(a.ownerDocument,Pt.move,this.onTouchDrag)}else{Be(a.ownerDocument,Pt.move,this.onMouseDrag)}Be(a.ownerDocument,Pt.stop,this.handleDragStop)}};this.onMouseDown=t=>{this.preventDefault(t);Pt=se.mouse;this.props.onMouseDown(t);if(t.button&&typeof t.button==="number"&&t.button!==0){return false}return this.handleDragStart(t)};this.onMouseDrag=t=>{this.preventDefault(t);return this.handleDrag(t)};this.onMouseUp=t=>{this.preventDefault(t);Pt=se.mouse;return this.handleDragStop(t)};this.onTouchStart=t=>{this.preventDefault(t);Pt=se.touch;const e=this.getTouchFromEvent(t);return this.handleDragStart(e)};this.onTouchDrag=t=>{this.preventDefault(t);Pt=se.touch;const e=this.getTouchFromEvent(t);return this.handleDrag(e)};this.onTouchEnd=t=>{this.preventDefault(t);Pt=se.touch;const e=this.getTouchFromEvent(t);return this.handleDragStop(e)}}componentWillUnmount(){const t=this.findDOMNode();if(t){const{ownerDocument:e}=t;Be(e,se.mouse.move,this.onMouseDrag);Be(e,se.touch.move,this.onTouchDrag);Be(e,se.mouse.stop,this.handleDragStop);Be(e,se.touch.stop,this.handleDragStop)}}render(){return ya.cloneElement(ya.Children.only(this.props.children),{style:{touchAction:"none",...this.props.children.props.style},onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};Ci.defaultProps=va;Ci.displayName="DraggableCore";var Qb={...va,axis:"both",bounds:false,defaultClassName:"draggable",defaultClassNameDragging:"draggable-dragging",defaultClassNameDragged:"draggable-dragged",defaultPosition:{x:0,y:0},position:null,rotation:0,updateOnPosition:false};var yn=class extends bn.Component{constructor(t){super(t);this.onDragStart=(t,e)=>{const o=this.props.onStart(t,fn(this,e));if(o===false){return false}this.setState({dragging:true,dragged:true})};this.onDrag=(t,e)=>{const{position:o,defaultPosition:r,onDrag:n,bounds:a}=this.props;if(!this.state.dragging){return false}const l=fn(this,e);const c=Boolean(o);const d={x:c?l.x:r.x,y:c?l.y:r.y,slackX:0,slackY:0};if(a){const{x:m,y:f}=d;d.x+=this.state.slackX;d.y+=this.state.slackY;const[b,v]=Yd(this,d.x,d.y);d.x=b;d.y=v;d.slackX=this.state.slackX+(m-d.x);d.slackY=this.state.slackY+(f-d.y);l.x=d.x;l.y=d.y;l.deltaX=d.x-this.state.x;l.deltaY=d.y-this.state.y}const u=n(t,l);if(u===false){return false}this.setState(d)};this.onDragStop=(t,e)=>{if(!this.state.dragging){return false}const o=this.props.onStop(t,fn(this,e));if(o===false){return false}const r={dragging:false,slackX:0,slackY:0,x:0,y:0};const n=Boolean(this.props.position);if(n){const{x:a,y:l}=this.props.position;r.x=a;r.y=l}this.setState(r)};this.findDOMNode=()=>{const{nodeRef:t}=this.props;return(t==null?void 0:t.current)||null};this.state={dragging:false,dragged:false,x:t.position?t.position.x:t.defaultPosition.x,y:t.position?t.position.y:t.defaultPosition.y,slackX:0,slackY:0}}componentDidUpdate(t){const e=Boolean(this.props.position);if(e){if(this.props.updateOnPosition){if(t.position&&t.position.x!==this.props.position.x||t.position.y!==this.props.position.y){this.setState({x:this.props.position.x,y:this.props.position.y})}}else{if(t.position&&this.props.position.x!==this.state.x||this.props.position.y!==this.state.y){this.setState({x:this.props.position.x,y:this.props.position.y})}}}}componentWillUnmount(){this.setState({dragging:false})}render(){const{position:t,defaultPosition:e,rotation:o,defaultClassName:r,defaultClassNameDragging:n,defaultClassNameDragged:a,...l}=this.props;const{x:c,y:d,dragging:u,dragged:m}=this.state;let f={};const b=Boolean(t);const v=!b||u;const y=t||e;const x={x:Kd(this)&&v?c:y.x,y:qd(this)&&v?d:y.y,rotation:o};f=Gd(x);const C=bn.Children.only(this.props.children);const D=[C.props.className||"",r,u?n:"",m?a:""].join(" ").trim();const z=bn.cloneElement(C,{className:D,style:{...C.props.style,...f}});return bn.createElement(Ci,{...l,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop},z)}};yn.defaultProps=Qb;yn.displayName="Draggable";var Jd=yn;var ap=ui(ip());import Yt from"react";import Oe,{css as rp}from"styled-components";import b0 from"react";import op,{css as y0}from"styled-components";var v0=op.label`
  ${io}
`;var x0=op.label`
  display: block;
  font-size: ${i=>i.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${i=>i.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${i=>i.theme.measurements.fontSystem.label.case};
  color: ${i=>i.theme.toolControlBar.inputLabelForeground};
  margin: 0;
  padding-bottom: 8px;

  ${({isDisabled:i})=>i&&y0`
      opacity: ${t=>t.theme.toolControlBar.inputLabelInactiveOpacity};
      cursor: default;
      pointer-events: none;
    `}
`;var gt=({"data-test":i,label:t,htmlFor:e,show:o,style:r,isDisabled:n,className:a})=>{const l=o?x0:v0;const c=e||(t?t.replace(" ","-"):void 0);return b0.createElement(l,{"data-test":i,style:r,isDisabled:n,htmlFor:c,className:a},t)};gt.defaultProps={show:true};var S0=Oe.div`
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
`;var C0=Oe(gt)`
  align-self: flex-start;
`;var np=Oe(ft)`
  color: ${i=>i.theme.button.textSecondaryForeground};
  padding: 1px 7px 2px;
`;var w0=Oe.div`
  display: flex;
  justify-content: space-between;
  width: ${i=>i.theme.measurements.advancedUIToolControlBar.width-48}px;
`;var k0=Oe.article`
  /* 0.6 of width here refers to the width of the container without padding */
  width: ${i=>.6*i.theme.measurements.advancedUIToolControlBar.width}px;
  font-size: ${i=>i.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${i=>i.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${i=>i.theme.measurements.fontSystem.body.case};
  text-align: center;
  margin-top: 7px;
  display: inline-block;
  color: ${i=>i.theme.toolControlBar.inputLabelForeground};
`;var T0=Oe.div`
  width: ${i=>.6*i.theme.measurements.advancedUIToolControlBar.width}px;
  transform: translateZ(0);
  overflow: hidden;
  transition: all 500ms ease-out;
`;var I0=Oe.span`
  width: ${i=>Math.round(i.length*.6*i.theme.measurements.advancedUIToolControlBar.width)}px;
  margin-left: -${i=>i.activeIndex*.6*i.theme.measurements.advancedUIToolControlBar.width}px;
  position: relative;
  display: inline-block;
  transform: translateZ(0);
  transition: all 600ms cubic-bezier(0.77, 0, 0.175, 1);
  font-family: '${i=>i.theme.typography.fontFamily}', sans-serif;
`;var sp=Oe.div`
  border: solid ${i=>i.theme.card.foreground};
  border-width: 0 2px 2px 0;
  padding: 3px;
  height: 0;
  width: 0;

  ${({direction:i})=>i==="left"?rp`
          margin-left: 2px;
          transform: rotate(135deg);
        `:rp`
          margin-right: 2px;
          transform: rotate(-45deg);
        `}
`;var Sa=class extends Yt.PureComponent{constructor(t){super(t);this.updateIndex=(t,e=false)=>{let o=t+(e?-1:1);const r=this.props.list.length-1;if(o>r){o=0}if(o<0){o=r}this.props.onSelect(this.props.list[o].identifier)};this.getActiveIndex=t=>{const{list:e}=this.props;const o=e.findIndex(r=>r.identifier===t);return o!==-1?o:0};this.throttledUpdateIndex=(0,ap.default)(this.updateIndex,600)}render(){const{list:t,label:e,showLabel:o=true}=this.props;const r=this.getActiveIndex(this.props.defaultIdentifier);const n=t.length<=1;return Yt.createElement(S0,{"data-test":S.CarouselSlider},Yt.createElement(C0,{show:o,label:e}),Yt.createElement(w0,{id:`photoeditorsdk-${e.replace(" ","-")}`},Yt.createElement(np,{ariaLabel:"Select Previous",isDisabled:n,onClick:()=>this.throttledUpdateIndex(r,true)},Yt.createElement(sp,{direction:"left"})),Yt.createElement(T0,null,Yt.createElement(I0,{activeIndex:r,length:t.length},t.map(a=>Yt.createElement(k0,{key:a.identifier},a.value)))),Yt.createElement(np,{ariaLabel:"Select Next",isDisabled:n,onClick:()=>this.throttledUpdateIndex(r)},Yt.createElement(sp,{direction:"right"}))))}};Sa.defaultProps={showLabel:true};var lp=Sa;import Zo from"react";import M0 from"styled-components";var D0=M0.div`
  display: flex;
  position: relative;
  margin-bottom: 12px;
  max-width: ${i=>i.theme.measurements.inputs.checkbox.maxWidth}px;
`;var xn=D0;import E0,{css as cp}from"styled-components";var P0=E0.div.attrs({tabIndex:0})`
  position: relative;
  height: 16px;
  width: 16px;
  cursor: pointer;
  background-color: ${i=>i.theme.checkbox.background};
  border-radius: ${i=>i.theme.shape.radiusSmall}px;
  transition-timing-function: ease-in;
  transition-duration: 0.3s;
  &::after {
    content: '';
    position: absolute;
    display: inline-block;
    left: 5px;
    width: 5px;
    height: 10px;
    border-style: solid;
    border-width: 0 2px 2px 0;
    border-color: transparent;
    transform: rotate(45deg) scale(0.8);
  }

  &:first-child {
    margin-right: 8px;
  }

  &:last-child {
    margin-left: 8px;
  }

  ${ut}

  &:hover {
    opacity: ${i=>i.theme.checkbox.hoverOpacity};
  }
  ${i=>i.isChecked&&cp`
      background-color: ${i.theme.checkbox.activeBackground};
      &::after {
        color: ${i.theme.checkbox.activeForeground};
        border-color: ${i.theme.checkbox.foreground};
      }
      &:hover {
        background-color: ${i.theme.checkbox.activeBackground};
        opacity: 0.8;
      }
    `}
  ${i=>i.isDisabled&&cp`
      opacity: 0.5;
      cursor: default;
      pointer-events: none;
    `}
`;var Jo=P0;import z0 from"styled-components";var A0=z0.input.attrs({type:"checkbox",tabIndex:0})`
  position: absolute;
  opacity: 0;
  cursor: pointer;
  height: 0;
  width: 0;
  margin: 0;
  padding: 0;
  ${ut}
`;var Sn=A0;var dp=({label:i,value:t,checkMarkPosition:e,onClick:o,isDisabled:r,className:n,style:a})=>{const l=`photoeditorsdk-${i.replace(" ","-")}`;return Zo.createElement(xn,{"data-test":S.Checkbox,className:n,style:a},e==="left"&&Zo.createElement(Jo,{onClick:o,isDisabled:r,isChecked:t}),Zo.createElement(gt,{isDisabled:r,label:i,htmlFor:l}),Zo.createElement(Sn,{id:l,disabled:r,checked:t,onChange:o}),e==="right"&&Zo.createElement(Jo,{onClick:o,isDisabled:r,isChecked:t}))};var pp=dp;dp.defaultProps={value:false,checkMarkPosition:"left"};import{css as L0}from"styled-components";var wi=L0`
  font-size: ${i=>i.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${i=>i.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${i=>i.theme.measurements.fontSystem.body.case};
  height: 100%;
  width: 100%;
  min-height: 26px;
  color: ${i=>i.theme.textInput.foreground};
  padding-bottom: 7px;
  border: none;
  appearance: none;
  border-bottom: 1px solid ${i=>i.theme.textInput.borderColor};
  background: ${i=>i.theme.textInput.background};
  font-family: '${i=>i.theme.typography.fontFamily}', sans-serif;
  transition: border-color 0.4s ease-in-out;

  &::-webkit-search-decoration,
  &::-webkit-search-cancel-button,
  &::-webkit-search-results-button,
  &::-webkit-search-results-decoration {
    -webkit-appearance: none;
  }

  &::-webkit-inner-spin-button,
  &::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  &:-moz-focusring {
    outline: none;
    border-color: ${i=>i.theme.textInput.hoverBorderColor};
  }

  &::-ms-clear,
  &::-ms-reveal {
    display: none;
  }

  &:focus {
    outline: none;
    border-color: ${i=>i.theme.textInput.hoverBorderColor};
  }

  &:disabled {
    opacity: ${i=>i.theme.textInput.inactiveOpacity};
    pointer-events: none;
  }

  &:hover {
    border-color: ${i=>i.theme.textInput.hoverBorderColor};
  }
`;import xe from"react";import N0 from"styled-components";import B0,{css as O0}from"styled-components";var hp=O0`
  opacity: ${i=>i.theme.dropdown.inactiveOpacity};
  pointer-events: none;
`;var up=B0.div`
  display: block;
  position: relative;
  width: 100%;
  white-space: nowrap;
  transition-duration: 0.5s;

  &:disabled {
    ${hp}
  }

  ${({isDisabled:i})=>i&&hp}
`;import F0,{css as R0}from"styled-components";var mp=F0.li`
  padding: 10px 16px;
  text-overflow: ellipsis;
  font-size: ${i=>i.theme.measurements.fontSystem.button2.size}px;
  letter-spacing: ${i=>i.theme.measurements.fontSystem.button2.letterSpacing}px;
  text-transform: ${i=>i.theme.measurements.fontSystem.button2.case};
  white-space: nowrap;
  color: ${i=>i.theme.dropdown.foreground};

  &:hover {
    cursor: pointer;
    background: ${i=>i.theme.dropdown.listItemHoverBackground};
  }

  ${({isActive:i})=>i&&R0`
      border-left: 2px solid ${t=>t.theme.primary};
    `}

  ${ut}
`;import $0,{css as bp}from"styled-components";import fp from"react";import gp,{css as mo}from"styled-components";var H0=gp.div`
  display: flex;
  ${i=>{if(ee()||to()){return mo`
        overflow: hidden;
      `}if(i.direction==="vertical"){return mo`
        flex-direction: column;
        flex: 1 1 auto;
        overflow-y: auto;
        overflow-x: hidden;
      `}return mo`
      overflow-y: hidden;
      overflow-x: auto;
    `}};
`;var _0=gp.ul.attrs(()=>({role:"menubar","aria-label":"Tool Navigation"}))`
  display: flex;
  flex-direction: ${i=>i.direction==="vertical"?"column":"row"};

  list-style: none;
  padding: 0;
  margin: 0;

  ${i=>{if(ee()||to()){return mo`
        ${()=>{if(i.direction==="vertical"){return mo`
              width: 100%;
              overflow-y: auto;
              overflow-x: hidden;

              /* hidde the arrows */
              margin-top: -10px;
              margin-bottom: -10px;
              padding-top: 10px;
              padding-bottom: 10px;

              /* hide the scrollbar */
              padding-right: 10px;
              margin-right: -10px;
            `}return mo`
            height: 100%;
            overflow-y: hidden;
            overflow-x: auto;

            margin-right: -10px;
            margin-left: -10px;
            padding-right: 10px;
            padding-left: 10px;

            padding-bottom: 10px;
            margin-bottom: -10px;
          `}}

        scrollbar-face-color: ${i.theme.scrollbar.handleColor};
        scrollbar-track-color: ${i.theme.toolbar.background};
        scrollbar-base-color: ${i.theme.toolbar.background};
        scrollbar-3dlight-color: ${i.theme.scrollbar.handleColor};
        scrollbar-highlight-color: ${i.theme.scrollbar.handleColor};
        scrollbar-arrow-color: ${i.theme.toolbar.background};
        scrollbar-shadow-color: ${i.theme.scrollbar.handleColor};
        scrollbar-dark-shadow-color: ${i.theme.scrollbar.handleColor};
      `}return""}}
`;var ki=({direction:i="horizontal","data-test":t,className:e,children:o})=>fp.createElement(H0,{direction:i,className:e},fp.createElement(_0,{direction:i,"data-test":t},o));var Ca=$0(ki)`
  position: absolute;

  background: ${i=>i.theme.dropdown.listBackground};
  color: ${i=>i.theme.dropdown.listForeground};
  border: 1px solid ${i=>i.theme.dropdown.listBorderColor};
  box-shadow: ${i=>i.theme.dropdown.listShadow};

  visibility: hidden;
  opacity: 0;
  ${i=>{if(i.isOpen){return bp`
        visibility: visible;
        opacity: 1;
        display: flex;
      `}return""}}

  transition: all 0.5s ease;

  width: 100%;
  max-height: 160px;
  margin: 5px 0;

  /* had to add these changes to get the dropdown working in IE11 */
  ${()=>{if(ee()){return bp`
        > ul {
          height: 160px;
          margin-bottom: 0px;
          margin-top: 0px;
          padding-bottom: 0px;
          padding-top: 0px;
        }
      `}return""}}

  border-radius: 0 0 ${i=>i.theme.shape.radiusMedium}px
    ${i=>i.theme.shape.radiusMedium}px;
  z-index: ${i=>i.theme.measurements.zIndex.input.list};
`;Ca.defaultProps={direction:"vertical"};import W0 from"styled-components";var yp=W0.div`
  font-size: ${i=>i.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${i=>i.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${i=>i.theme.measurements.fontSystem.body.case};
  color: ${i=>i.theme.dropdown.foreground};
  background-color: ${i=>i.theme.dropdown.background};
  border: none;
  border-bottom: 1px solid ${i=>i.theme.dropdown.borderColor};
  padding: 5px 0;
  cursor: ${i=>i.showList?"pointer":"default"};
  transition: border-color 0.4s ease-in-out;

  &:hover {
    border-color: ${i=>i.theme.dropdown.hoverBorderColor};
  }

  ${ut}
`;var V0=N0.div``;var wa=class extends xe.PureComponent{constructor(t){super(t);this.state={isOpen:false};this.handleOutsideClick=t=>{if(this.node&&this.node.contains(t.target)){return}this.setState({isOpen:false})};this.onSelect=t=>{const{onSelect:e}=this.props;e(t);this.setState({isOpen:false})};this.onClick=()=>{this.setState(t=>({isOpen:!t.isOpen}))};this.listItem=t=>{const{itemStyle:e,selectedItem:o}=this.props;const{isOpen:r}=this.state;const{value:n,label:a}=t;let l={};if(typeof e==="function"){l=e(t)}else if(e!==null&&typeof e==="object"){l=e}return xe.createElement(mp,{"aria-hidden":!r,tabIndex:0,style:l,onClick:()=>this.onSelect(n),key:n,isActive:o===n},a)};this.onKeyDown=t=>{if(t.code==="Space"||t.code==="Enter"){this.onClick()}};this.nodeRef=e=>{this.node=e}}componentDidMount(){document.addEventListener("mousedown",this.handleOutsideClick,false)}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick,false)}render(){const{selectedItem:t,list:e,label:o,style:r,isDisabled:n}=this.props;const{isOpen:a}=this.state;const l=e.length>1;const c=n?{}:{tabIndex:0};return xe.createElement(V0,null,xe.createElement(gt,{isDisabled:n,style:{paddingLeft:"0px"},label:o}),xe.createElement("div",{ref:this.nodeRef},xe.createElement(up,{isOpen:a,isDisabled:n},xe.createElement(yp,{"data-test":S.Dropdown,"aria-hidden":n,...c,showList:l,style:r,onClick:l?this.onClick:void 0,onKeyDown:this.onKeyDown},t,l&&xe.createElement(Fc,{rotation:a?180:0})),xe.createElement(Ca,{"data-test":S.DropdownList,isOpen:a},l&&e.map(this.listItem)))))}};import U0 from"styled-components";var vp=U0.input.attrs({type:"file",id:"fileUpload",accept:"image/*"})`
  display: none;
`;import G0 from"react";var j0=({children:i})=>{const t=e=>{e.preventDefault()};return G0.createElement("form",{onSubmit:t},i)};var xp=j0;import Qo from"react";import K0,{css as Cp}from"styled-components";import ka from"react";import Sp from"styled-components";var X0=Sp.input`
  ${wi}
  /* override user agent style */
  padding: 0;
  &:disabled {
    opacity: ${i=>i.theme.textInput.inactiveOpacity};
    cursor: default;
    pointer-events: none;
  }
`;var Y0=Sp.div`
  position: relative;
  &:first-child {
    margin-right: 15px;
  }
`;var Ta=class extends ka.Component{constructor(){super(...arguments);this.onChange=t=>{const{onChange:e}=this.props;if(e){e(t.target.value)}}}render(){const{id:t,testId:e,value:o,type:r,min:n,max:a,onBlur:l,onFocus:c,onKeyUp:d,onKeyDown:u,onMouseUp:m,onTouchEnd:f,isDisabled:b,className:v,children:y}=this.props;return ka.createElement(Y0,{className:v},ka.createElement(X0,{id:t,"data-test":e,"aria-hidden":b,disabled:b,value:o,type:r,min:n,max:a,onChange:this.onChange,onBlur:l,onFocus:c,onKeyUp:d,onKeyDown:u,onMouseUp:m,onTouchEnd:f}),y)}};Ta.defaultProps={type:"text"};var Cn=Ta;var q0=K0.div`
  ${ee()?Cp``:Cp`
        display: flex;
        flex: 0 1 auto;
        flex-direction: column;
      `}
`;var tr=class extends Qo.Component{constructor(t){super(t);this.node=null;this.handleOutsideClick=t=>{if(this.node&&this.node.current&&this.node.current.contains(t.target)){return}this.onSubmit()};this.onSubmit=()=>{const{onSubmit:t}=this.props;const{value:e,isActive:o}=this.state;if(t){const r=parseFloat(tr.cleanValue(e));if(!Number.isNaN(r)&&o){t(`${r}`)}}this.setState({isActive:false})};this.onBlur=()=>{this.onSubmit()};this.onFocus=()=>{this.setState({isActive:true})};this.onKeyDown=t=>{const{value:e}=this.state;if(t.key==="Enter"){this.onSubmit()}else if(t.key==="ArrowUp"){const o=parseFloat(tr.cleanValue(e));if(typeof o==="number"){this.setState({value:(o+1).toString(),isActive:true})}}else if(t.key==="ArrowDown"){const o=parseFloat(tr.cleanValue(e));if(typeof o==="number"){this.setState({value:(o-1).toString(),isActive:true})}}};this.onChange=t=>{this.setState({value:t.replace(/[^\d.,-]/g,""),isActive:true})};this.state={value:this.props.value||"",isActive:false};this.node=Qo.createRef()}static getDerivedStateFromProps({value:t},{value:e,isActive:o}){if(t!==e&&!o){return{value:t}}return null}static cleanValue(t){return t?t.replace(",",".").replace(/[a-zA-Z]/g,"").trim():""}componentDidMount(){document.addEventListener("mousedown",this.handleOutsideClick,false);document.addEventListener("touchstart",this.handleOutsideClick,false)}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick,false);document.removeEventListener("touchstart",this.handleOutsideClick,false)}render(){const{id:t,label:e,isDisabled:o,ariaHidden:r,onMouseUp:n,onTouchEnd:a,className:l,style:c}=this.props;const{value:d}=this.state;return Qo.createElement(q0,{ref:this.node,"data-test":S.NummericInput,className:l,style:c},Qo.createElement(gt,{htmlFor:t,label:e,show:!!e,isDisabled:o}),Qo.createElement(Cn,{id:t,value:d,isDisabled:o,"aria-hidden":r,onChange:this.onChange,onKeyDown:this.onKeyDown,onBlur:this.onBlur,onFocus:this.onFocus,onMouseUp:n,onTouchEnd:a}))}};var Ia=tr;Ia.defaultProps={showLabel:true};var wn=Ia;import Ma,{forwardRef as J0}from"react";import Z0 from"styled-components";var Q0=Z0.input.attrs({type:"search"})`
  ${wi}
`;var wp=J0(({value:i,onChange:t,onKeyDown:e,placeholder:o,className:r,style:n},a)=>{const l=c=>{if(t)t(c.target.value)};return Ma.createElement("div",{className:r,style:n},Ma.createElement(gt,{show:false,label:"photoeditorsdk-Search"}),Ma.createElement(Q0,{ref:a,id:"photoeditorsdk-Search",value:i,onChange:l,onKeyDown:e,placeholder:o,autoComplete:"off"}))});import Da from"react";import kp,{css as t1}from"styled-components";var e1=kp.div``;var Tp=({label:i,children:t,inline:e,showLabel:o,isDisabled:r,"data-test":n})=>{return Da.createElement(e1,{"data-test":n},Da.createElement(gt,{isDisabled:r,label:i,show:o}),Da.createElement(i1,{id:`photoeditorsdk-${i.replace(" ","-")}`,inline:!!e},t))};var i1=kp.div`
  display: inline-flex;
  ${i=>!i.inline&&t1`
        flex-wrap: wrap;
      `||""}
`;Tp.defaultProps={showLabel:true};var Ip=Tp;import ir,{useState as m1}from"react";import o1 from"styled-components";var kn=o1.div`
  display: flex;
  flex-direction: column;
  /* needed for IE11 to properly calculate the width */
  min-width: 1px;
`;import r1 from"styled-components";var Tn=r1.div`
  display: flex;
  align-items: center;
  height: 26px;
  margin-right: ${i=>i.centerSlider?-56:0}px;
`;import n1,{useCallback as s1}from"react";import a1 from"styled-components";var l1=a1(wn)`
  max-width: 50px;
  padding-left: 16px;
  > div > input {
    text-align: center;
  }
`;var In=({id:i,value:t,min:e,max:o,divider:r,suffix:n,decimal:a,isDisabled:l,"aria-hidden":c,onChange:d,onMouseUp:u,onTouchEnd:m,className:f,style:b})=>{const v=`${i}-input`;const y=`${(t*r).toFixed(a)}${n}`;const x=s1(C=>{const D=C.replace(n,"");if(D){const z=parseFloat(D)/r;const L=Math.max(e,Math.min(o,z));if(!Number.isNaN(L)){d(L);if(u){u(L)}else if(m){m(L)}}}},[e,o,n,d,u,m]);return n1.createElement(l1,{className:f,style:b,id:v,value:y,isDisabled:l,"aria-hidden":c,onSubmit:x})};import c1 from"styled-components";var Mn=c1(gt)`
  padding-bottom: 2px;
`;import d1,{useCallback as Ea}from"react";import p1,{css as er}from"styled-components";var Pa=er`
  ${to()||ee()?er`
        width: 16px;
        height: 16px;
      `:er`
        width: 20px;
        height: 20px;
      `}
  background: ${i=>i.theme.slider.thumbBackground};
  border: 2px solid ${i=>i.theme.slider.thumbBorderColor};
  border-radius: 50%;
  cursor: pointer;
`;var h1=i=>{let t=(i.value-i.min)*100/(i.max-i.min);if(i.adjust){if(i.value>0){t=i.value*(i.max/2)*100;return`${i.theme.slider.trackColor} 0%,
      ${i.theme.slider.trackColor} 50%,
      ${i.theme.slider.activeTrackColor} 50%,
      ${i.theme.slider.activeTrackColor} ${50+t}%,
      ${i.theme.slider.trackColor} ${50+t}%,
      ${i.theme.slider.trackColor} 100%
      `}if(i.value<0){t=i.value*(i.min/2)*100;return`${i.theme.slider.trackColor} 0%,
      ${i.theme.slider.trackColor} ${50-t}%,
      ${i.theme.slider.activeTrackColor} ${50-t}%,
      ${i.theme.slider.activeTrackColor} 50%,
      ${i.theme.slider.trackColor} 50%,
      ${i.theme.slider.trackColor} 100%
      `}return`${i.theme.slider.trackColor} 0%,
    ${i.theme.slider.trackColor} 100%`}return`${i.theme.slider.activeTrackColor} 0%,
    ${i.theme.slider.activeTrackColor} ${t}%,
    ${i.theme.slider.trackColor} ${t}%,
    ${i.theme.slider.trackColor} 100%`};var u1=p1.input`
  display: flex;
  flex: 1 0 auto;
  appearance: none;
  max-width: ${i=>i.showInput?"calc(100% - 50px)":"100%"};
  outline: none;
  border-radius: 0; /* iOS */

  padding: 0;
  margin: 0;
  border: none;

  ${ut}

  ${to()||ee()?er`
        margin-top: 10px;
        height: 20px;
        /* remove once we have a better concept for focus in all browser */
        &:focus {
          box-shadow: none;
        }
      `:er`
        height: 2px;
        background: ${i=>`linear-gradient(to right, ${h1(i)})`};
      `}
  &::-moz-focus-outer {
    /** This is to remove the dotted focus lines in firefox */
    border: 0;
  }
  &:disabled {
    opacity: ${i=>i.theme.slider.inactiveOpacity};
    pointer-events: none;
  }
  &:hover {
    opacity: ${i=>i.theme.slider.hoverOpacity};
  }
  &::-webkit-slider-runnable-track {
    cursor: pointer;
    appearance: none;
  }
  &::-moz-range-track {
    appearance: none;
    cursor: pointer;
  }
  &::-ms-track {
    cursor: pointer;
    height: 2px;
    appearance: none;
    background: transparent;
    color: transparent;
    border-color: transparent;
    border-width: 6px 0;
  }
  &::-webkit-slider-thumb {
    appearance: none;
    ${Pa}
  }
  &::-moz-range-thumb {
    appearance: none;
    ${Pa}
  }
  &::-ms-thumb {
    appearance: none;
    ${Pa}
  }
  &::-ms-fill-lower {
    background: ${i=>`${i.theme.slider.activeTrackColor}`};
  }
  &::-ms-fill-upper {
    background: ${i=>`${i.theme.slider.trackColor}`};
  }
  &::-ms-tooltip {
    display: none;
  }
  @media all and (min-width: 0) and (max-width: 599px) {
    width: 200px;
  }
`;var Dn=({id:i,label:t,value:e,min:o,max:r,step:n,adjust:a,showInput:l,"aria-hidden":c,isDisabled:d,onChange:u,onMouseUp:m,onTouchEnd:f,"data-test":b,className:v,style:y})=>{const x=Ea(z=>{const L=parseFloat(z.target.value);u(L)},[u]);const C=Ea(z=>{const{value:L}=z.target;const R=parseFloat(L);if(f){f(R)}},[f]);const D=Ea(z=>{const{value:L}=z.target;const R=parseFloat(L);if(m){m(R)}},[f]);return d1.createElement(u1,{type:"range",role:"slider","data-test":b,id:i,name:t,tabIndex:0,value:e,min:o,max:r,step:n,style:y,className:v,adjust:a,showInput:l,disabled:d,"aria-hidden":c,onChange:x,onKeyUp:x,onKeyDown:x,onMouseUp:D,onTouchEnd:C})};var Mp=({"data-test":i,label:t,identifier:e,showLabel:o=true,showInput:r=true,centerSlider:n=false,min:a=-1,max:l=1,value:c=0,step:d=.01,decimal:u=0,divider:m=100,suffix:f="",adjust:b=false,"aria-hidden":v,isDisabled:y,onChange:x,onMouseUp:C,onTouchEnd:D,style:z,className:L})=>{const[R]=m1(`photoeditorsdk-slider-${mi()}`);return ir.createElement(kn,{className:L,"data-test":i||e||R,style:z},ir.createElement(Mn,{isDisabled:y,label:t,show:o}),ir.createElement(Tn,{centerSlider:r&&n},ir.createElement(Dn,{id:R,label:t,value:c,min:a,max:l,step:d,adjust:b,showInput:r,isDisabled:y,"aria-hidden":v,onChange:x,onMouseUp:C,onTouchEnd:D}),r&&ir.createElement(In,{id:R,value:c,min:a,max:l,divider:m,suffix:f,decimal:u,isDisabled:y,"aria-hidden":v,onChange:x,onMouseUp:C,onTouchEnd:D})))};import Se from"react";var za=class extends Se.Component{constructor(){super(...arguments);this.onDismiss=()=>{const{handleClose:t,handleDismiss:e}=this.props;if(t)t();if(e)e()};this.onConfirm=()=>{const{handleClose:t,handleConfirm:e}=this.props;if(t)t();if(e)e()}}render(){const{headerLabel:t,bodyLabel:e,confirmLabel:o,dismissLabel:r,type:n,children:a}=this.props;const l=Se.Children.toArray(a)[0];if(!Se.isValidElement(l))throw new Error("Child is not a valid react element");return Se.cloneElement(l,{handleConfirm:this.onConfirm,handleDismiss:this.onDismiss,header:Se.createElement(ho,null,t),body:Se.createElement(ve,{"data-test":S.DialogBody},e),footer:Se.createElement(po,{type:n},r&&Se.createElement(fi,{label:r,ariaLabel:r,onClick:this.onDismiss}),o&&Se.createElement(Wo,{label:o,ariaLabel:o,onClick:this.onConfirm}))});return null}};import ae from"react";import En from"styled-components";var f1=En.div`
  display: flex;
`;var g1=En(ho)`
  padding: 0;
`;var b1=En.div`
  display: flex;
  flex-direction: column;
  margin-left: 8px;
  @media all and (min-width: 640px) {
    margin-left: 30px;
  }
`;var y1=En(ve)`
  padding: 0;
  margin: 0;
`;var Aa=class extends ae.PureComponent{render(){const{headerLabel:t,bodyLabel:e,children:o}=this.props;const r=ae.Children.toArray(o)[0];if(!ae.isValidElement(r))throw new Error("Child is not a valid react element");return ae.cloneElement(r,{height:"90px",body:ae.createElement(ve,{"data-test":S.DialogBody},ae.createElement(f1,null,ae.createElement(dn,null),ae.createElement(b1,null,ae.createElement(g1,null,t),ae.createElement(y1,null,e))))});return null}};import Ht from"react";import or from"styled-components";var v1=or.form`
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
`;var x1=or.textarea`
  display: flex;
  caret-color: ${i=>i.theme.primary};
  ${wi}
  min-height: 100%;
  padding: 0px;
  outline-offset: -8px;
  color: ${i=>i.theme.modal.bodyForeground};
  resize: none;
  font-family: '${i=>i.theme.typography.fontFamily}', sans-serif;

  &:selection,
  &:-moz-selection {
    background-color: ${i=>i.theme.primary};
    color: ${i=>i.theme.foreground};
  }
`;var S1=or.label`
  padding: 11px 20px 8px;
  font-size: ${i=>i.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${i=>i.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${i=>i.theme.measurements.fontSystem.label.case};
  color: ${i=>i.theme.modal.headerForeground};
`;var C1=or(ve)`
  height: 100%;
`;var w1=or(po)`
  border-top: none;
`;var La=class extends Ht.Component{constructor(){super(...arguments);this.state={value:""};this.input=Ht.createRef();this.handleKeydown=t=>{Ic(this.handleDismiss)(t)};this.handleDismiss=()=>{const{handleDismiss:t}=this.props;if(t)t(false)};this.handleConfirm=()=>{const{handleConfirm:t}=this.props;const{value:e}=this.input.current;if(e){if(t)t(e);this.handleDismiss()}};this.onChange=t=>{const{allowEmojis:e}=this.props;const o=e?t.target.value:sc(t.target.value);this.input.current.value=o;this.setState({value:o})};this.onSubmit=t=>{t.preventDefault()}}componentDidMount(){const{text:t,defaultText:e}=this.props;this.input.current.focus();this.input.current.value=t||e||"";this.setState({value:this.input.current.value});document.addEventListener("keydown",this.handleKeydown,false);if(t===e){this.input.current.select()}}componentDidUpdate(t){const{isVisible:e}=this.props;if(t.isVisible!==e){if(e){this.input.current.focus()}}}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeydown,false)}render(){const{headerLabel:t,dismissLabel:e,confirmLabel:o,maxLength:r,type:n,children:a}=this.props;const{value:l}=this.state;const c=Ht.Children.toArray(a)[0];if(!Ht.isValidElement(c))throw new Error("Child is not a valid react element");return Ht.cloneElement(c,{handleConfirm:this.handleConfirm,handleDismiss:this.handleDismiss,isConfirmDisabled:!l,height:"150px",header:Ht.createElement(S1,{htmlFor:"photoeditorsdk-TextInput"},t),body:Ht.createElement(C1,null,Ht.createElement(v1,{onSubmit:this.onSubmit},Ht.createElement(x1,{ref:this.input,id:"photoeditorsdk-TextInput",placeholder:"Write Something",autoFocus:true,onChange:this.onChange,maxLength:r}))),footer:Ht.createElement(w1,{type:n},Ht.createElement(fi,{label:e,ariaLabel:e,onClick:this.handleDismiss}),Ht.createElement(Wo,{label:o,ariaLabel:o,isDisabled:!l,onClick:this.handleConfirm}))});return null}};La.defaultProps={defaultText:"Write Something",allowEmojis:false};var Dp=La;import k1 from"styled-components";var Ba=k1.div`
  padding-bottom: ${i=>(i.count||1)*8}px;
`;Ba.defaultProps={count:1};import fo from"react";var Oa=class extends fo.Component{getChildren(){const t=[];const e=[];fo.Children.forEach(this.props.children,o=>{switch(o.type.componentName){case"case":if(this.props.type===o.props.value){t.push(o)}break;case"default":e.push(o);break}});if(t.length>0){return t}return e}render(){const t=this.getChildren();return t.length===0?null:fo.createElement(fo.Fragment,null,t)}};var Pn=class extends fo.Component{render(){return this.props.children}};Pn.componentName="case";var zn=class extends fo.Component{render(){return this.props.children}};zn.componentName="default";import T1,{keyframes as I1,css as M1}from"styled-components";var D1=I1`
  from { transform: translate(-50%, 0%); }
  to { transform: translate(-50%, 50%); }
`;var E1=T1.div`
  position: absolute;
  top: ${i=>i.position.y}px;
  left: ${i=>i.position.x}px;
  transform: translate(-50%, 50%);
  background: black;
  color: white;
  border-radius: ${i=>i.theme.shape.radiusMedium}px;
  padding: 10px 16px;
  text-align: center;
  z-index: ${i=>i.theme.measurements.zIndex.toast};
  visibility: hidden;

  ${({show:i})=>i&&M1`
      visibility: visible;
      animation: ${D1} 0.5s, fadeout 0.5s 2.5s;
    `}
`;var Ep=E1;import go from"react";import P1,{css as Pp}from"styled-components";var z1=()=>Pp`
    animation: ${_r} 0.2s linear;
  `;var A1=Pp`
  border: 1px solid ${i=>i.theme.card.activeBorderColor};
  ${Bs} {
    background-color: ${i=>i.theme.card.activeOverlayColor};
  }
`;var L1=P1.button.attrs(i=>{const t={};if(i.image){t.backgroundImage=`url(${i.image})`}return{style:t,...i.style}})`
  &&& {
    box-sizing: border-box;
  }

  /* basic ui text items use position absolute */
  position: relative;

  padding: 0;
  cursor: pointer;
  /* Safari will change the height of the toolbar and position the category cards at the bottom for some reason */
  vertical-align: top;
  border: none;
  box-sizing: border-box;
  background-size: cover;
  background-position: center center;
  background-repeat: no-repeat;
  background-color: ${i=>i.theme.card.background};
  color: ${i=>i.theme.card.foreground};

  border-radius: ${i=>i.theme.shape.radiusMedium}px;
  ${z1};
  animation-fill-mode: both;
  overflow: hidden;

  ${ut}

  /* Active */

  /* No :active styles on purpose. */

  ${({isActive:i})=>i&&A1}

  /* Disabled */

  &:disabled {
    cursor: default;
    pointer-events: none;

    ${xt} {
      background-color: ${i=>i.theme.card.inactiveOverlayColor};
    }
  }

  /* Hover */

  &:hover {
    ${oo} {
      background-color: ${i=>i.theme.card.hoverOverlayColor};
    }
  }
`;var Ti=class extends go.Component{constructor(){super(...arguments);this.state=Rr;this.timeout=null;this.onKeyDown=t=>{if(t.key==="Space"||t.key==="Enter"){if(this.props.onClick){this.props.onClick()}}};this.onClick=t=>{const e=t.currentTarget.getBoundingClientRect();const o=t.pageX-e.left;const r=t.pageY-e.top;if(this.state.display==="block"){this.setState({display:"none"},()=>{this.setRippleState(o,r)})}else{this.setRippleState(o,r)}this.props.onClick(t)};this.setRippleState=(t,e)=>{this.setState({left:t,top:e,display:"block"});this.timeout=setTimeout(()=>{this.setState({display:"none"})},1200)}}componentWillUnmount(){clearTimeout(this.timeout)}render(){const{children:t,label:e,isActive:o,isDisabled:r,image:n,style:a,className:l}=this.props;const{left:c,top:d,display:u}=this.state;return go.createElement(L1,{isActive:o,"aria-label":e,"data-test":e,disabled:r,image:n,onClick:this.onClick,onKeyDown:this.onKeyDown,style:a,className:l},t,go.createElement(Hr,{display:u,left:c,top:d}),go.createElement(Bs,null),go.createElement(xt,null),go.createElement(oo,null))}};Ti.defaultProps={isActive:false};import Ln from"react";var zp=i=>{const t=[];t[0]=requestAnimationFrame(()=>{t[1]=requestAnimationFrame(()=>{i()})});return t};var Fa=i=>{i.forEach(t=>cancelAnimationFrame(t))};var An=i=>{return!Number.isNaN(parseFloat(i))&&Number.isFinite(i)};var Ra=i=>{return typeof i==="string"&&i.search("%")===i.length-1&&An(i.substr(0,i.length-1))};var Ha;var B1=(Ha=class extends Ln.Component{constructor(i){super(i);this.contentRef=null;this.contentRef=Ln.createRef();this.animationFrameIDs=[];let t="auto";let e="visible";if(An(i.height)){t=i.height<0||i.height==="0"?0:i.height;e="hidden"}else if(Ra(i.height)){t=i.height==="0%"?0:i.height;e="hidden"}const o=typeof window!=="undefined";if(o&&window.matchMedia){this.prefersReducedMotion=window.matchMedia("(prefers-reduced-motion)").matches}this.state={height:t,overflow:e,shouldUseTransitions:false}}componentDidMount(){const{height:i}=this.state;if(this.contentRef.current&&this.contentRef.current.style){this.hideContent(i)}}componentDidUpdate(i,t){const{height:e}=this.props;const{duration:o,delay:r}=this.getTimings();if(this.contentRef.current&&e!==i.height){this.showContent(t.height);this.contentRef.current.style.overflow="hidden";const n=this.contentRef.current.offsetHeight;this.contentRef.current.style.overflow="";const a=o+r;let l=null;const c={height:null,overflow:"hidden"};const d=t.height==="auto";if(An(e)){l=e<0||e==="0"?0:e;c.height=l}else if(Ra(e)){l=e==="0%"?0:e;c.height=l}else{l=n;c.height="auto";c.overflow=null}if(d){c.height=l;l=n}this.setState({height:l,overflow:"hidden",shouldUseTransitions:!d});clearTimeout(this.timeoutID);clearTimeout(this.animationClassesTimeoutID);if(d){Fa(this.animationFrameIDs);this.animationFrameIDs=zp(()=>{this.setState({height:c.height,overflow:c.overflow,shouldUseTransitions:true})});this.animationClassesTimeoutID=setTimeout(()=>{this.setState({shouldUseTransitions:false});this.hideContent(c.height)},a)}else{this.timeoutID=setTimeout(()=>{this.setState({height:c.height,overflow:"visible",shouldUseTransitions:false});if(e!=="auto"){this.hideContent(l)}},a)}}}componentWillUnmount(){Fa(this.animationFrameIDs);clearTimeout(this.timeoutID);clearTimeout(this.animationClassesTimeoutID);this.timeoutID=null}getTimings(){if(this.prefersReducedMotion){return{delay:0,duration:0}}const{delay:i,duration:t}=this.props;return{delay:i,duration:t}}showContent(i){if(i===0){this.contentRef.current.style.display=""}}hideContent(i){if(i===0){this.contentRef.current.style.display="none"}}render(){const{animateOpacity:i,children:t,className:e,easing:o}=this.props;const{height:r,overflow:n,shouldUseTransitions:a}=this.state;const{duration:l,delay:c}=this.getTimings();const d={height:r,overflow:n};if(a){d.transition=`height ${l}ms ${o} ${c}ms`;d.WebkitTransition=d.transition}const u={};if(i){u.transition=`opacity ${l}ms ${o} ${c}ms`;u.WebkitTransition=u.transition;if(r===0){u.opacity=0}}return Ln.createElement("div",{"aria-hidden":r===0,className:e,style:d},Ln.createElement("div",{style:u,ref:this.contentRef},t))}},Ha.defaultProps={animateOpacity:false,duration:250,delay:0,easing:"ease"},Ha);var OI={Focused:ut,VisuallyHidden:io};var Ap={ripple:Or,scale:_c,slide:_r};var A={Container:Zs,ColorItem:Fd,ColorItemBase:on,ColorItemBackground:tn,ColorItemTiledBackground:rn,ColorItemActiveOverlay:en,Dialog:Rd,DialogBase:an,DialogContainer:ln,DialogBackdrop:sn,DialogHeader:ho,DialogBody:ve,DialogFooter:po,DialogSpinner:dn,TextEditModal:Dp,ActionModal:za,InfoModal:Aa,Spacer:Ba,Draggable:Jd,DraggableCore:Ci,Toast:Ep,Input:{Label:gt,File:vp,Search:wp,Slider:Mp,SliderBase:kn,SliderContainer:Tn,SliderInput:In,SliderTrack:Dn,SliderLabel:Mn,CarouselSlider:lp,Selection:Ip,Checkbox:pp,CheckboxBase:xn,CheckboxInput:Sn,CheckboxCheckMark:Jo,Dropdown:wa,Text:Cn,NumericInput:wn,Form:xp},Switch:{Index:Oa,Case:Pn,Default:zn}};import O1 from"styled-components";var Lp=O1(Xt)`
  font-size: ${i=>i.theme.measurements.fontSystem.button2.size}px;
  letter-spacing: ${i=>i.theme.measurements.fontSystem.button2.letterSpacing}px;
  text-transform: ${i=>i.theme.measurements.fontSystem.button2.case};
  color: ${i=>i.theme.button.textSecondaryForeground};

  ${xt} {
    display: none;
  }

  &:disabled {
    opacity: ${i=>i.theme.button.textInactiveOpacity};
  }
`;import _a,{css as Bp}from"styled-components";var Op=_a.div`
  display: inline-flex;
`;var Fe=_a(Xt)`
  background: ${i=>i.theme.canvasActionBar.background};
  color: ${i=>i.theme.canvasActionBar.foreground};
  font-size: ${i=>i.theme.measurements.fontSystem.button2.size}px;
  letter-spacing: ${i=>i.theme.measurements.fontSystem.button2.letterSpacing}px;
  text-transform: ${i=>i.theme.measurements.fontSystem.button2.case};
  padding: 4px 10px;
  position: relative;
  /* for safari */
  margin: 0;
  &:last-child:after {
    opacity: 0;
  }
`;var rr=_a.div`
  ${({show:i})=>i?Bp`
          opacity: 1;
        `:Bp`
          opacity: 0;
        `};
  position: absolute;
  transform: translate(-50%, -100%);
  background: ${i=>i.theme.canvasActionBar.background};
  color: ${i=>i.theme.canvasActionBar.foreground};
  border-radius: ${i=>i.theme.canvasActionBar.borderRadius?i.theme.canvasActionBar.borderRadius:i.theme.shape.radiusMedium}px;
  white-space: nowrap;
  transition: opacity 0.3s ease-in-out;
  z-index: ${i=>i.theme.measurements.zIndex.buttonGroup};

  ${Fe} {
    &:after {
      content: '';
      position: absolute;
      right: 0px;
      top: 6px;
      height: calc(100% - 12px);
      border-right: 1px solid
        ${i=>i.theme.canvasActionBar.separatorColor};
      &:last-child {
        border-right: unset;
      }
    }
  }
`;import Fp from"react";import Rp from"styled-components";var F1=Rp(ft)`
  width: 60px;
  height: 60px;
  background-color: gray;
  border-radius: 50%;
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  z-index: ${i=>i.theme.measurements.zIndex.button.float};
  padding: 2px;
`;var R1=Rp.div`
  height: 56px;
  width: 56px;
  border-radius: 50%;
  background-color: ${i=>i.theme.webcam.floatButton};
`;var Hp=i=>{return Fp.createElement(F1,{...i},Fp.createElement(R1,null))};var Bn=["library",["transform","filter","adjustment"],["focus","frame","overlay"],["text","textdesign","sticker","brush"]];var bo={image:"",license:"",order:"default",language:"en",theme:"dark",layout:"advanced",mainCanvasActions:["undo","redo","export","close"],displayResizeWarning:false,displayCloseWarning:true,displayCanvasRendererWarning:true,displayToolControlBarTitle:true,displaySerializationModal:true,engine:{crossOrigin:"anonymous",downscaleOptions:{maxMegaPixels:{desktop:10,mobile:5}},preferredRenderer:nc()?"webgl":"canvas",backgroundColor:[0,0,0,1]},enableZoom:true,scaleImageToFit:true,restrictZoomOutToDefault:true,forceCrop:false,assetBaseUrl:"assets/",defaultTool:"filter",tools:Bn,snapping:new lc,filter:new hc,focus:new uc,adjustment:new pc,library:new fc,overlay:new gc,sticker:new bc,text:new yc,textdesign:new xc,frame:new mc,brush:new vc,transform:new Sc,export:{image:{exportType:"image",format:"image/png",quality:.9,enableDownload:true,transparent:true},filename:"photoeditorsdk-export"},custom:{},watermark:new cc};var H1=typeof Symbol==="function"&&Symbol.for;var _1=i=>{return Object.prototype.toString.call(i)==="[object RegExp]"||Object.prototype.toString.call(i)==="[object Date]"||Object.prototype.toString.call(i).includes("HTML")||Object.prototype.toString.call(i)==="[object Array]"};var $1=i=>{if(H1&&Object.hasOwnProperty.call(i,"$$typeof")){return i.$$typeof===Symbol.for("react.element")||i.$$typeof===Symbol.for("react.forward_ref")}return false};var W1=i=>{return Object.hasOwnProperty.call(i,"__ngContext__")};function Wa(i){const t=i&&typeof i==="object";return t&&!_1(i)&&!W1(i)&&!$1(i)}function N1(i){return Array.isArray(i)?[]:{}}function Na(i,t){const e=t&&t.clone===true;return e&&Wa(i)?Va(N1(i),i,t):i}function V1(i,t,e){const o={};if(Wa(i)){Object.keys(i).forEach(r=>{o[r]=Na(i[r],e)})}Object.keys(t).forEach(r=>{const n=Wa(t[r])&&i[r];o[r]=n?Va(i[r],t[r],e):Na(t[r],e)});return o}function Va(i,t,e){const o=Array.isArray(t);if(o){return Array.isArray(i)?t:Na(t,e)}return V1(i,t,e)}function wt(i,t=null){if(!Array.isArray(i)||i.length<2){throw new Error("first argument should be an array with at least two elements")}return i.reduce((e,o)=>{return Va(e,o,t)})}var U1={headline1:{size:16,letterSpacing:1.5,case:"uppercase"},headline2:{size:14,letterSpacing:.8,case:"uppercase"},body:{size:13,letterSpacing:0,case:"none"},label:{size:13,letterSpacing:0,case:"capitalize"},basicUICardLabel:{size:12,letterSpacing:0,case:"capitalize"},button1:{size:14,letterSpacing:0,case:"uppercase"},button2:{size:14,letterSpacing:0,case:"capitalize"},basicUITabLabel:{size:14,letterSpacing:.8,case:"uppercase"}};var G1={toast:2,controlsBar:5,buttonGroup:5,toolControlBar:6,toolbar:7,label:10,disable:11,canvas:{knob:4,bar:5,controls:5,snappingGuide:1,crop:{grid:2,dragImage:3,backdrop:4},webcam:{backdrop:7}},input:{list:6},button:{float:5},dialog:{base:100,backdrop:1,container:2},colorItem:{overlay:2,background:1,tiledBackground:0}};var j1=(i,t=8)=>{const e=i;const o=3*t;const r=e-2*o;const n=(r-2*t)/3;const a=(r-t)/2;return{advancedUIToolControlBar:{width:e,paddingTop:2*t,paddingBottom:2*t,paddingLeft:o,paddingRight:o,marginBottom:0,controls:{gutter:2*t}},advancedUICard:{small:{height:n,width:n},medium:{height:a,width:a},large:{height:86,width:r}},advancedUISpacer:t,inputs:{cropSize:{maxWidth:e},checkbox:{maxWidth:e}}}};var On=()=>{const i=j1(230);const t={advancedUIToolbar:{width:55,itemHeight:48,separatorHeight:20,marginBottom:0},basicCanvasOffset:40+76-88,basicUIToolbar:{openHeight:88,closeHeight:40},basicUIToolControlBar:{itemsBarHeight:72,controlsBarHeight:80,maxHeight:72+40+4,maxWidth:300},basicCard:{medium:{height:56,width:90},large:{height:60,width:110}},basicSpacer:8,mainCanvasActionBar:{height:50},crop:{minSize:50},canvas:{marginTop:0,transform:{minSliderWidth:435,minValueWidth:235,minFlipWidth:160}},canvasControls:{sprite:{controlOffset:16,rotateHandle:{height:16},minSize:30,controlPadding:16},knob:{size:16,touchable:{desktop:24}},corner:{size:14,touchable:{desktop:24,mobile:48},borderWidth:4},width:{size:14}},buttons:{float:{size:56}},colorItem:{size:20},color:{colorPicker:{width:214,height:370,saturationSlider:{height:150},thumb:{size:14},arrow:{width:36}}},fontSystem:U1,zIndex:G1};return wt([i,t])};var Ua=i=>{let t=Number(i).toString(16);if(t.length<2){t=`0${t}`}return t};var $p=(i,t,e)=>{const o=Ua(i*255);const r=Ua(t*255);const n=Ua(e*255);return`#${o}${r}${n}`};var le=i=>{if(Bc(i)){const[t,e,o,r]=i;return`rgba(${t*255}, ${e*255}, ${o*255}, ${r})`}if(Lc(i)){const{r:t,g:e,b:o,a:r}=i;return`rgba(${t*255}, ${e*255}, ${o*255}, ${r})`}if(Ac(i)){const[t,e,o]=i;return $p(t,e,o)}if(zc(i)){const{r:t,g:e,b:o}=i;return $p(t,e,o)}return i};var Kt=i=>{return i.map(t=>({identifier:t.name,color:t.color,colorString:le(t.color)}))};var kt={black:[0/255,0/255,0/255,1],white:[255/255,255/255,255/255,1],gray:[191/255,191/255,191/255,1],blue:[102/255,134/255,255/255,1],skyBlue:[102/255,204/255,255/255,1],red:[231/255,80/255,80/255,1],orange:[242/255,136/255,85/255,1],yellow:[255/255,247/255,99/255,1]};var Ga={transparent:[0/255,0/255,0/255,0],black:[0/255,0/255,0/255,1],white:[255/255,255/255,255/255,1],blue:[102/255,134/255,255/255,1],skyBlue:[102/255,204/255,255/255,1],red:[231/255,80/255,80/255,1],orange:[242/255,136/255,85/255,1],yellow:[255/255,247/255,99/255,1]};var Ii={["brightness"]:0,["saturation"]:0,["contrast"]:0,["gamma"]:0,["clarity"]:0,["exposure"]:0,["shadows"]:0,["highlights"]:0,["whites"]:0,["blacks"]:0,["temperature"]:0,["sharpness"]:0};var et=class{constructor(t,e){this.assets=[];this.entityMapper=t=>{if("items"in t){return this.categoryMapper(t)}return this.itemMapper(t)};this.categoryMapper=t=>t?{...t,thumbnailURI:this.getCategoryThumbnailURI(t),name:this.config.locale[t.identifier]||t.name,items:t.items.map(this.itemMapper)}:null;this.itemMapper=t=>{return{...t,thumbnailURI:this.getItemThumbnailURI(t),name:this.config.locale[t.identifier]||("name"in t?t.name:"")}};this.getCategoryThumbnailURI=t=>{if(t.thumbnailURI){if(Fo(t.thumbnailURI)||t.thumbnailURI.substr(0,10)==="data:image"){return t.thumbnailURI}return this.config.getAssetPath(t.thumbnailURI||"")}return""};this.getItemThumbnailURI=t=>{var o;if((o=t.thumbnailURI)==null?void 0:o.trim()){if(Fo(t.thumbnailURI)||t.thumbnailURI.substr(0,10)==="data:image"){return t.thumbnailURI}return this.config.getAssetPath(t.thumbnailURI||"")}const e=t[this.config.itemFallbackKey];if(!e)return"";return this.config.getAssetPath(e)};this.config=e;this.assets=t.map(this.entityMapper).filter(Boolean)}static isCategory(t){return Object.prototype.hasOwnProperty.call(t,"items")}get categories(){return this.assets.reduce((t,e)=>{if(et.isCategory(e)){return[...t,e]}return void 0},[]).filter(Boolean)}get items(){return this.assets.reduce((t,e)=>{if(et.isCategory(e)){return[...t,...e.items]}return[...t,e]},[]).filter(Boolean)}};var Ce=class{constructor(t,e){this.from=t;this.to=e}contains(t){return this.from<=t&&t<=this.to}clamp(t){return Math.min(Math.max(this.from,t),this.to)}};var Y1=new Ce(-1,1);var yo=class{constructor(t){this.editAdjustments=({type:t,value:e})=>{const o=Y1.clamp(e);this.state[t]=o};this.reset=()=>{rt(()=>{if(this.indexInContainer===-1){Object.keys(Ii).forEach(t=>{this.state[t]=Ii[t]});this.orderHelper.removeIndex("adjustment")}})};this.setAdjustmentEffect=t=>{const e=this.orderHelper.addIndex("adjustment");if(this.effect){this.effect.setProperties(t)}else{this.effect=this.engineMediator.engine.addAdjustments(t,this.engineMediator.image.container,e)}return this.effect.getProperties()};this.removeAdjustmentEffect=()=>{if(this.effect){this.engineMediator.engine.removeEffect(this.effect);if(this.indexInContainer===-1){this.effect=void 0}}};this.engineMediator=t;this.state=Ii}get indexInContainer(){if(this.effect){return this.effect.getIndexInParent()}return-1}get orderHelper(){return this.engineMediator.orderHelper}};s([T],yo.prototype,"state",2);s([p],yo.prototype,"editAdjustments",2);s([p],yo.prototype,"reset",2);var G=class{constructor(t){this.dirty=T.box(false);this.isHistoryChanged=false;this.editAdjustments=({type:t,value:e})=>{this.isHistoryChanged=!(0,ct.default)(this.state[t],e);this.pureSetAdjustment({type:t,value:e});this.editor.render()};this.toolSnapshot=()=>{if((0,ct.default)(this.state,Ii)){this.dirty.set(false)}else{this.dirty.set(true)}if(this.isHistoryChanged){this.addSnapshot("edit","adjustment");this.isHistoryChanged=false}};this.addSnapshot=(t,e)=>{this.editor.addSnapshot(void 0,t,e)};this.toggleOptionSelection=t=>{this.selectedOption=t};this.pureSetAdjustment=({type:t,value:e})=>{const o=this.adjustmentsStore.setAdjustmentEffect({[t]:e});this.adjustmentsStore.editAdjustments({type:t,value:o[t]})};this.pureReset=()=>{this.dirty.set(false);this.adjustmentsStore.removeAdjustmentEffect();this.adjustmentsStore.reset();this.selectedOption=""};this.reset=()=>{this.pureReset();this.addSnapshot("delete",this.locale.controls.buttonReset);this.editor.render()};this.updateStateFromHistory=t=>{if((0,ct.default)(t,this.state)){return}if((0,ct.default)(t,Ii)){this.pureReset();return}rt(()=>{this.dirty.set(Object.values(t).some(e=>e!==0));Object.keys(t).forEach(e=>{this.pureSetAdjustment({type:e,value:t[e]})})})};this.updateStateFromSerialization=t=>{this.updateStateFromHistory(t)};this.editor=t;this.adjustmentsStore=new yo(this.editor.engineMediator);this.selectedOption="";const e=this.editor.assetProvider.getAssets("adjustment");this.entityManager=new et(e,{...this.config,locale:{...this.locale.items,...this.locale.categories},getAssetPath:this.editor.getAssetPath("adjustment")})}get selectedAdjustmentType(){return this.selectedOption}get isDirty(){return this.dirty.get()}get state(){return this.adjustmentsStore.state}get selectedOptionLabel(){const t=this.items.find(e=>e?e.identifier===this.selectedOption:false);return t?t.name:""}get brightness(){return this.state.brightness}get saturation(){return this.state.saturation}get contrast(){return this.state.contrast}get gamma(){return this.state.gamma}get clarity(){return this.state.clarity}get exposure(){return this.state.exposure}get shadows(){return this.state.shadows}get highlights(){return this.state.highlights}get whites(){return this.state.whites}get blacks(){return this.state.blacks}get temperature(){return this.state.temperature}get sharpness(){return this.state.sharpness}get categories(){return this.entityManager.categories}get items(){return this.entityManager.items}get config(){return this.editor.configStore.config["adjustment"]}get locale(){return this.editor.configStore.locale["adjustment"]}};s([T],G.prototype,"selectedOption",2);s([T],G.prototype,"dirty",2);s([p],G.prototype,"editAdjustments",2);s([p],G.prototype,"toggleOptionSelection",2);s([p],G.prototype,"pureSetAdjustment",2);s([p],G.prototype,"pureReset",2);s([p],G.prototype,"reset",2);s([p],G.prototype,"updateStateFromHistory",2);s([p],G.prototype,"updateStateFromSerialization",2);s([h],G.prototype,"selectedAdjustmentType",1);s([h],G.prototype,"isDirty",1);s([h],G.prototype,"state",1);s([h],G.prototype,"selectedOptionLabel",1);s([h],G.prototype,"brightness",1);s([h],G.prototype,"saturation",1);s([h],G.prototype,"contrast",1);s([h],G.prototype,"gamma",1);s([h],G.prototype,"clarity",1);s([h],G.prototype,"exposure",1);s([h],G.prototype,"shadows",1);s([h],G.prototype,"highlights",1);s([h],G.prototype,"whites",1);s([h],G.prototype,"blacks",1);s([h],G.prototype,"temperature",1);s([h],G.prototype,"sharpness",1);s([h],G.prototype,"categories",1);s([h],G.prototype,"items",1);s([h],G.prototype,"config",1);s([h],G.prototype,"locale",1);var Fn={identifier:"identity",intensity:1,isDuotone:false};var K1=new Ce(0,1);var Re=class{constructor(t){this.changeIdentifier=t=>{this.state.identifier=t};this.changeIfDuotone=t=>{this.state.isDuotone=t};this.changeIntensity=t=>{const e=K1.clamp(t);this.state.intensity=e};this.reset=()=>{if(this.indexInContainer===-1){this.state.identifier=Fn.identifier;this.state.intensity=Fn.intensity;this.removeIndex()}};this.setFilterEffect=({identifier:t,intensity:e,isDuotone:o})=>{const r=this.state;const n=()=>{this.changeIdentifier(t);this.changeIntensity(e);this.changeIfDuotone(o)};this.removeFilterEffect();const a=this.engineMediator.orderHelper.addIndex("filter");if(o){return new Promise((l,c)=>{this.engineMediator.engine.addDuoToneFilterFromAssets(t,this.engineMediator.image.container,a).then(d=>{n();this.effect=d;this.effect.setProperties({colorIntensity:e});l()}).catch(d=>{this.fallbackOnError(r);c(d)})})}return new Promise((l,c)=>{this.engineMediator.engine.addLUTFilterFromAssets(t,this.engineMediator.image.container,a).then(d=>{n();this.effect=d;this.effect.setProperties({intensity:e});l()}).catch(d=>{this.fallbackOnError(r);c(d)})})};this.removeFilterEffect=()=>{if(this.effect){this.engineMediator.engine.removeEffect(this.effect);if(this.indexInContainer===-1){this.effect=void 0}}};this.setEffectProperties=({intensity:t})=>{if(this.effect){if(this.state.isDuotone){this.effect.setProperties({colorIntensity:t})}else{this.effect.setProperties({intensity:t})}return this.effect.getProperties()}return null};this.removeIndex=()=>{this.engineMediator.orderHelper.removeIndex("filter")};this.fallbackOnError=t=>{this.changeIdentifier(t.identifier);this.changeIntensity(t.intensity);if(t.identifier==="identity"){this.removeIndex()}};this.engineMediator=t;this.state=Fn}get indexInContainer(){if(this.effect){return this.effect.getIndexInParent()}return-1}};s([T],Re.prototype,"state",2);s([p],Re.prototype,"changeIdentifier",2);s([p],Re.prototype,"changeIfDuotone",2);s([p],Re.prototype,"changeIntensity",2);s([p],Re.prototype,"reset",2);var Rn="identity";var it=class{constructor(t){this.selectFilter=async(t,e=1)=>{if(t!==this.identifier){const o=this.selectedCategory;await this.filterStore.setFilterEffect({identifier:t,intensity:e,isDuotone:this.isOptionDuoTone(t)});if(this.selectedCategory===Rn){this.selectedCategory=o}this.editor.render();this.addSnapshot("add","filter")}};this.changeIntensity=t=>{const e=this.isOptionDuoTone(this.identifier);const o=this.filterStore.setEffectProperties({intensity:t});if(o){const r=e?o.colorIntensity:o.intensity;this.filterStore.changeIntensity(r);this.editor.render()}};this.setImageAndGetPreviews=async()=>{const{image:t}=this.editor.activeStore.state;await this.editor.previewThumbnails.addImageToContainer(t);await this.getAllFilterPreview()};this.getAllFilterPreview=async()=>{const t=this.entityManager.items.map(n=>({identifier:n.identifier,isDuotone:this.isOptionDuoTone(n.identifier)}));const e=await this.editor.previewThumbnails.getAllFilterPreviewThumbnails(t);await this.editor.wait();const{config:o}=this;const r=this.editor.configStore.assetProvider.getAssets("filter").map(n=>{return{...n,items:n.items.map(a=>({...a,thumbnailURI:e[a.identifier]}))}});this.entityManager=new et(r,{...o,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("filter")})};this.toolSnapshot=()=>{this.addSnapshot("edit",this.locale.controls.sliderIntensity)};this.addSnapshot=(t,e)=>{this.editor.addSnapshot(void 0,t,e)};this.pureReset=()=>{this.selectedCategory=Rn;this.filterStore.removeFilterEffect();this.filterStore.reset()};this.reset=()=>{this.pureReset();this.addSnapshot("delete",this.locale.controls.buttonReset);this.editor.render()};this.toggleCategorySelection=t=>{this.selectedCategory=this.selectedCategory===t?Rn:t};this.updateStateFromSerialization=({identifier:t,intensity:e})=>{const o=this.doesFilterAssetExist(t);if(o){const r=ws(o);return this.filterStore.setFilterEffect({identifier:t,intensity:e,isDuotone:r})}throw new ie(t)};this.updateStateFromHistory=async t=>{if(t.identifier==="identity"){this.pureReset();return new Promise(e=>{e()})}return this.filterStore.setFilterEffect(t)};this.doesFilterAssetExist=t=>{return this.entityManager.items.find(e=>t===e.identifier)};this.isOptionDuoTone=t=>{const e=this.doesFilterAssetExist(t);if(e){return ws(e)}return false};this.editor=t;this.selectedCategory=Rn;this.filterStore=new Re(this.editor.engineMediator);const{config:e}=this;const o=this.editor.configStore.assetProvider.getAssets("filter");this.entityManager=new et(o,{...e,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("filter")})}get state(){return this.filterStore.state}get identifier(){return this.state.identifier}get intensity(){return this.state.intensity}get isDuotone(){return this.state.isDuotone}get selectedCategoryIdentifier(){return this.selectedCategory}get isOptionSelected(){return this.identifier!=="identity"}get config(){return this.editor.configStore.config["filter"]}get locale(){return this.editor.configStore.locale["filter"]}get categories(){return this.entityManager.categories}get items(){return this.entityManager.items}};s([T],it.prototype,"selectedCategory",2);s([T],it.prototype,"entityManager",2);s([p],it.prototype,"selectFilter",2);s([p],it.prototype,"changeIntensity",2);s([p],it.prototype,"pureReset",2);s([p],it.prototype,"reset",2);s([p],it.prototype,"toggleCategorySelection",2);s([p],it.prototype,"updateStateFromSerialization",2);s([p],it.prototype,"updateStateFromHistory",2);s([h],it.prototype,"state",1);s([h],it.prototype,"identifier",1);s([h],it.prototype,"intensity",1);s([h],it.prototype,"isDuotone",1);s([h],it.prototype,"selectedCategoryIdentifier",1);s([h],it.prototype,"isOptionSelected",1);s([h],it.prototype,"config",1);s([h],it.prototype,"locale",1);s([h],it.prototype,"categories",1);s([h],it.prototype,"items",1);var vo=(i,t=0,e=3)=>{const o=Math.tan(t);const r=Math.sqrt(o**2+1);return{x:i.x+e/r,y:i.y+e*o/r}};var Hn={blurRadius:40,gradientSize:.2};var q1={start:{x:0,y:0},end:{x:0,y:0},...Hn};var J1={center:{x:0,y:0},radius:0,...Hn};var Z1={origin:{x:0,y:0},rotation:0,size:0,...Hn};var Q1=Hn;var Mi={identifier:"identity",linear:q1,radial:J1,mirrored:Z1,gaussian:Q1};var bt=class{constructor(t){this.selectFocus=(t,e)=>{rt(()=>{this.state.identifier=t;if(e){this.state[t].blurRadius=e}})};this.changeBlurRadius=(t,e)=>{if(t!=="identity"){this.state[t].blurRadius=e}};this.reset=()=>{if(this.indexInContainer===-1){this.state.identifier=Mi.identifier;if(this.state.identifier!=="identity"){this.state[this.state.identifier].blurRadius=Mi[this.state.identifier].blurRadius}}};this.setLinear=({start:t,end:e})=>{this.state.linear.start.x=t.x;this.state.linear.start.y=t.y;this.state.linear.end.x=e.x;this.state.linear.end.y=e.y};this.setLinearStart=t=>{this.state.linear.start.x=t.x;this.state.linear.start.y=t.y};this.setLinearEnd=t=>{this.state.linear.end.x=t.x;this.state.linear.end.y=t.y};this.setRadialCenter=t=>{this.state.radial.center.x=t.x;this.state.radial.center.y=t.y};this.setRadialRadius=t=>{this.state.radial.radius=t};this.setMirroredOrigin=t=>{this.state.mirrored.origin.x=t.x;this.state.mirrored.origin.y=t.y};this.setMirroredRotation=t=>{this.state.mirrored.rotation=t};this.setMirroredSize=t=>{this.state.mirrored.size=t};this.getEffectProperties=()=>{if(this.effect){return this.effect.getProperties()}return null};this.setLinearFocus=t=>{this.effect=this.engineMediator.engine.addLinearBlur(t,this.imageContainer,this.order);this.updateLinearState(this.effect.getProperties())};this.setGaussianFocus=t=>{this.effect=this.engineMediator.engine.addGaussianBlur(t,this.imageContainer,this.order);this.updateGaussianState(this.effect.getProperties())};this.setRadialFocus=t=>{this.effect=this.engineMediator.engine.addRadialBlur(t,this.imageContainer,this.order);this.updateRadialState(this.effect.getProperties())};this.setMirroredFocus=t=>{this.effect=this.engineMediator.engine.addMirroredBlur(t,this.imageContainer,this.order);this.updateMirroredState(this.effect.getProperties())};this.updateFromEngineState=t=>{const e=this.getEffectProperties();if(e&&t!=="identity"){switch(t){case"linear":this.updateLinearState(e);break;case"radial":this.updateRadialState(e);break;case"mirrored":this.updateMirroredState(e);break;default:break}}};this.updateGaussianState=t=>{this.changeBlurRadius("gaussian",t.blurRadius)};this.updateMirroredState=t=>{const e=this.editor.worldToPreview(t.mirrorAxisOrigin);const o=new g(this.editor.worldToPreview(t.mirrorAxisDirection));const r=o.subtract(e);const n=Math.atan2(r.y,r.x);this.setMirroredOrigin(this.editor.worldToPreview(t.mirrorAxisOrigin));this.setMirroredRotation(n);this.setMirroredSize(this.editor.worldToPreview(t.clearAreaWidth));this.changeBlurRadius("mirrored",t.blurRadius)};this.updateRadialState=t=>{this.setRadialCenter(this.editor.worldToPreview(t.center));this.setRadialRadius(this.editor.worldToPreview(t.radius));this.changeBlurRadius("radial",t.blurRadius)};this.updateLinearState=t=>{this.setLinearStart(this.editor.worldToPreview(t.start));this.setLinearEnd(this.editor.worldToPreview(t.end));this.changeBlurRadius("linear",t.blurRadius)};this.setEffectProperties=t=>{if(this.effect){this.effect.setProperties(t);return this.effect.getProperties()}return null};this.removeFocus=()=>{if(this.effect){this.engineMediator.engine.removeEffect(this.effect);this.engineMediator.orderHelper.removeIndex("focus")}};this.editor=t;this.engineMediator=this.editor.engineMediator;this.state=Mi}get indexInContainer(){if(this.effect){return this.effect.getIndexInParent()}return-1}get order(){return this.engineMediator.orderHelper.addIndex("focus")}get imageContainer(){return this.engineMediator.image.container}};s([T],bt.prototype,"state",2);s([p],bt.prototype,"selectFocus",2);s([p],bt.prototype,"changeBlurRadius",2);s([p],bt.prototype,"reset",2);s([p],bt.prototype,"setLinear",2);s([p],bt.prototype,"setLinearStart",2);s([p],bt.prototype,"setLinearEnd",2);s([p],bt.prototype,"setRadialCenter",2);s([p],bt.prototype,"setRadialRadius",2);s([p],bt.prototype,"setMirroredOrigin",2);s([p],bt.prototype,"setMirroredRotation",2);s([p],bt.prototype,"setMirroredSize",2);s([p],bt.prototype,"updateFromEngineState",2);var Di=class{constructor(t){this.selectFocus=t=>{if(t!==this.identifier){this.focusStore.removeFocus();const e=this.maxIntensity*.2;const{width:o}=this.editor.engine.getOutputContainer().getBounds();const r=this.editor.shortestOutputSide*.2;switch(t){case"linear":const n=this.editor.outputToWorld({x:-o/2,y:0});const a=this.editor.outputToWorld({x:o/2,y:0});this.setLinearFocus({start:n,end:a,blurRadius:e});break;case"radial":const l=this.editor.outputToWorld({x:0,y:0});this.setRadialFocus({center:l,radius:r,blurRadius:e});break;case"mirrored":const c=this.editor.outputToWorld({x:0,y:0});const d=r;const u=this.editor.outputToWorld(vo({x:0,y:0},0));this.setMirroredFocus({mirrorAxisOrigin:c,clearAreaWidth:d,blurRadius:e,mirrorAxisDirection:u});break;case"gaussian":this.setGaussianFocus({blurRadius:e});break;default:break}this.focusStore.selectFocus(t,e);this.editor.render();this.addSnapshot("add","focus")}};this.changeIntensity=t=>{const e=this.focusStore.setEffectProperties({blurRadius:t});if(e){this.focusStore.changeBlurRadius(this.identifier,e.blurRadius);this.editor.render()}};this.changeRelativeIntensity=t=>{const e=(this.maxIntensity-Di.minIntensity)*t/100+Di.minIntensity;const o=this.focusStore.setEffectProperties({blurRadius:e});if(o){this.focusStore.changeBlurRadius(this.identifier,o.blurRadius);this.editor.render()}};this.toolSnapshot=t=>{this.addSnapshot("edit",t)};this.addSnapshot=(t,e)=>{this.editor.addSnapshot(void 0,t,e)};this.clickableCanvas=t=>{this.editor.clickableCanvas(t)};this.pureReset=()=>{this.focusStore.removeFocus();this.focusStore.reset()};this.reset=()=>{this.pureReset();this.editor.render();this.addSnapshot("delete",this.locale.controls.buttonReset)};this.setStart=t=>{const e=this.focusStore.setEffectProperties({start:this.editor.previewToWorld(t)});if(e){this.focusStore.setLinearStart(this.editor.worldToPreview(e.start));this.editor.render()}};this.setEnd=t=>{const e=this.focusStore.setEffectProperties({end:this.editor.previewToWorld(t)});if(e){this.focusStore.setLinearEnd(this.editor.worldToPreview(e.end));this.editor.render()}};this.setCenter=t=>{const e=this.focusStore.setEffectProperties({center:this.editor.previewToWorld(t)});if(e){this.focusStore.setRadialCenter(this.editor.worldToPreview(e.center));this.editor.render()}};this.setRadius=t=>{const e=this.focusStore.setEffectProperties({radius:this.editor.previewToWorld(t)});if(e){this.focusStore.setRadialRadius(this.editor.worldToPreview(e.radius));this.editor.render()}};this.setOrigin=t=>{const e=this.focusStore.setEffectProperties({mirrorAxisOrigin:this.editor.previewToWorld(t),mirrorAxisDirection:this.editor.previewToWorld(vo(t,this.rotation))});if(e){this.focusStore.setMirroredOrigin(this.editor.worldToPreview(e.mirrorAxisOrigin));this.editor.render()}};this.setSize=t=>{const e=this.focusStore.setEffectProperties({clearAreaWidth:this.editor.previewToWorld(t)});if(e){this.focusStore.setMirroredSize(this.editor.worldToPreview(e.clearAreaWidth));this.editor.render()}};this.setRotation=t=>{this.focusStore.setEffectProperties({mirrorAxisDirection:this.editor.previewToWorld(vo(this.origin,t))});this.focusStore.setMirroredRotation(t);this.editor.render()};this.updateStateFromHistory=(t,e)=>{this.focusStore.removeFocus();const{magnitude:o}=e;rt(()=>{this.focusStore.selectFocus(t.identifier);switch(t.identifier){case"linear":this.setLinearFocus({start:this.editor.previewToWorld(new g(t.linear.start).multiply(e)),end:this.editor.previewToWorld(new g(t.linear.end).multiply(e)),blurRadius:t.linear.blurRadius});break;case"gaussian":this.setGaussianFocus({blurRadius:t.gaussian.blurRadius});break;case"radial":this.setRadialFocus({center:this.editor.previewToWorld(new g(t.radial.center).multiply(e)),radius:this.editor.previewToWorld(t.radial.radius*o),blurRadius:t.radial.blurRadius});break;case"mirrored":{const r=new g(t.mirrored.origin).multiply(e);this.setMirroredFocus({mirrorAxisOrigin:this.editor.previewToWorld(r),mirrorAxisDirection:this.editor.previewToWorld(vo(r,t.mirrored.rotation)),clearAreaWidth:this.editor.previewToWorld(t.mirrored.size*o),blurRadius:t.mirrored.blurRadius});break}case"identity":this.pureReset();break;default:break}})};this.updateStateFromSerialization=async t=>{if(Di.doesFocusIdentifierExist(t.identifier)){this.focusStore.removeFocus();rt(()=>{this.focusStore.selectFocus(t.identifier);switch(t.identifier){case"linear":this.setLinearFocus(t.linear);break;case"gaussian":this.setGaussianFocus(t.gaussian);break;case"radial":this.setRadialFocus(t.radial);break;case"mirrored":this.setMirroredFocus({mirrorAxisOrigin:t.mirrored.origin,clearAreaWidth:t.mirrored.size,blurRadius:t.mirrored.blurRadius,mirrorAxisDirection:vo(t.mirrored.origin,t.mirrored.rotation)});break;default:break}})}else{throw new ie(t.identifier)}};this.updateCanvasControls=()=>{this.focusStore.updateFromEngineState(this.identifier)};this.getFocusStateForHistory=()=>{const t=this.editor.canvasStore.sizeVector;const{linear:e}=this.focusStore.state;const{radial:o}=this.focusStore.state;const{mirrored:r}=this.focusStore.state;const n=t;const{magnitude:a}=n;return{...this.focusStore.state,linear:{...e,start:new g(e.start).divide(n),end:new g(e.end).divide(n)},radial:{...o,center:new g(o.center).divide(n),radius:o.radius/a},mirrored:{...r,origin:new g(r.origin).divide(n),size:r.size/a},gaussian:{...this.focusStore.state.gaussian}}};this.editor=t;this.focusStore=new bt(this.editor);const e=this.editor.assetProvider.getAssets("focus");this.entityManager=new et(e,{...this.config,flattenCategories:true,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("focus")})}static get minIntensity(){return 0}static doesFocusIdentifierExist(t){return Object.keys(Ro).map(e=>Ro[e]).findIndex(e=>e===t)!==-1}get state(){return this.focusStore.state}get serializableState(){switch(this.identifier){case"linear":return{identifier:this.identifier,linear:this.focusStore.getEffectProperties()};case"radial":return{identifier:this.identifier,radial:this.focusStore.getEffectProperties()};case"mirrored":const t=this.focusStore.getEffectProperties();return{identifier:this.identifier,mirrored:{blurRadius:t.blurRadius,origin:t.mirrorAxisOrigin,rotation:I(this.state.mirrored.rotation),size:t.clearAreaWidth}};case"gaussian":return{identifier:this.identifier,gaussian:this.focusStore.getEffectProperties()};default:return Mi}}get start(){return this.focusStore.state.linear.start}get startOnPreview(){const t=this.editor.applyFlipToPreview(this.focusStore.state.linear.start);return{x:Math.abs(t.x),y:Math.abs(t.y)}}get end(){return this.focusStore.state.linear.end}get endOnPreview(){const t=this.editor.applyFlipToPreview(this.focusStore.state.linear.end);return{x:Math.abs(t.x),y:Math.abs(t.y)}}get center(){return this.focusStore.state.radial.center}get radius(){return this.focusStore.state.radial.radius}get origin(){return this.focusStore.state.mirrored.origin}get rotation(){return this.focusStore.state.mirrored.rotation}get rotationOnPreview(){const{flipHorizontally:t,flipVertically:e}=this.editor.outputContainer.getData();return Ho({rotation:this.focusStore.state.mirrored.rotation,flipHorizontally:t,flipVertically:e})}get size(){return this.focusStore.state.mirrored.size}get mirroredAreaWidth(){const{width:t,height:e}=this.editor.canvasStore.canvasSize;return Math.sqrt(t**2+e**2)*2}get identifier(){return this.state.identifier}get intensity(){if(this.identifier==="identity"){return Mi.gaussian.blurRadius}return this.state[this.identifier].blurRadius}get relativeIntensity(){const{blurRadius:t}=this.identifier==="identity"?this.state.gaussian:this.state[this.identifier];return(t-Di.minIntensity)*100/(this.maxIntensity-Di.minIntensity)}get maxIntensity(){return this.editor.shortestOutputSide/10}get isOptionSelected(){return this.identifier!=="identity"}get config(){return this.editor.configStore.config["focus"]}get locale(){return this.editor.configStore.locale["focus"]}get items(){return this.entityManager.items}setGaussianFocus({blurRadius:t}){this.focusStore.setGaussianFocus({blurRadius:t})}setLinearFocus({start:t,end:e,blurRadius:o}){this.focusStore.setLinearFocus({start:t,end:e,blurRadius:o})}setRadialFocus({center:t,radius:e,blurRadius:o}){this.focusStore.setRadialFocus({center:t,radius:e,blurRadius:o})}setMirroredFocus({mirrorAxisOrigin:t,clearAreaWidth:e,blurRadius:o,mirrorAxisDirection:r}){this.focusStore.setMirroredFocus({mirrorAxisOrigin:t,clearAreaWidth:e,blurRadius:o,mirrorAxisDirection:r})}};var $=Di;s([p],$.prototype,"selectFocus",2);s([p],$.prototype,"changeIntensity",2);s([p],$.prototype,"changeRelativeIntensity",2);s([p],$.prototype,"clickableCanvas",2);s([p],$.prototype,"pureReset",2);s([p],$.prototype,"reset",2);s([p],$.prototype,"setStart",2);s([p],$.prototype,"setEnd",2);s([p],$.prototype,"setCenter",2);s([p],$.prototype,"setRadius",2);s([p],$.prototype,"setOrigin",2);s([p],$.prototype,"setSize",2);s([p],$.prototype,"setRotation",2);s([p],$.prototype,"updateStateFromHistory",2);s([p],$.prototype,"updateStateFromSerialization",2);s([p],$.prototype,"updateCanvasControls",2);s([h],$.prototype,"state",1);s([h],$.prototype,"start",1);s([h],$.prototype,"startOnPreview",1);s([h],$.prototype,"end",1);s([h],$.prototype,"endOnPreview",1);s([h],$.prototype,"center",1);s([h],$.prototype,"radius",1);s([h],$.prototype,"origin",1);s([h],$.prototype,"rotation",1);s([h],$.prototype,"rotationOnPreview",1);s([h],$.prototype,"size",1);s([h],$.prototype,"mirroredAreaWidth",1);s([h],$.prototype,"identifier",1);s([h],$.prototype,"intensity",1);s([h],$.prototype,"relativeIntensity",1);s([h],$.prototype,"maxIntensity",1);s([h],$.prototype,"isOptionSelected",1);s([h],$.prototype,"config",1);s([h],$.prototype,"locale",1);s([h],$.prototype,"items",1);var sr={identifier:"identity",opacity:1,blendMode:"lighten"};var ty=new Ce(0,1);var we=class{constructor(t,e){this.changeIdentifier=t=>{this.state.identifier=t};this.changeOpacity=t=>{const e=ty.clamp(t);this.state.opacity=e};this.changeBlendMode=t=>{this.state.blendMode=t};this.reset=()=>{if(this.indexInContainer===-1){this.state.identifier=sr.identifier;this.state.opacity=sr.opacity;this.state.blendMode=sr.blendMode;this.removeIndex()}};this.correctOverlayFlip=()=>{const{flipHorizontally:t,flipVertically:e}=this.editor.outputContainer.getData();if(this.effect){this.effect.setFlipHorizontally(t);this.effect.setFlipVertically(e)}};this.removeOverlayEffect=()=>{if(this.effect){this.engineMediator.engine.removeEffect(this.effect);this.removeIndex();this.effect=void 0}};this.setEffectProperties=t=>{if(this.effect){this.effect.setProperties(t);return this.effect.getProperties()}return null};this.setOverlayEffect=({identifier:t,blendMode:e,opacity:o})=>{const r={...this.state};this.removeOverlayEffect();const n=this.engineMediator.orderHelper.addIndex("overlay");return new Promise((a,l)=>{this.engineMediator.engine.addOverlayFromAssets(t,this.engineMediator.image.container,n).then(c=>{this.changeIdentifier(t);this.changeOpacity(o);this.changeBlendMode(e);this.effect=c;this.effect.setProperties({blendMode:e,opacity:o});this.correctOverlayFlip();a()}).catch(c=>{this.changeIdentifier(r.identifier);this.changeOpacity(r.opacity);this.changeBlendMode(r.blendMode);if(r.identifier==="identity"){this.removeIndex()}l(c)})})};this.removeIndex=()=>{this.engineMediator.orderHelper.removeIndex("overlay")};this.engineMediator=t;this.editor=e;this.state=sr}get indexInContainer(){if(this.effect){return this.effect.getIndexInParent()}return-1}};s([T],we.prototype,"state",2);s([p],we.prototype,"changeIdentifier",2);s([p],we.prototype,"changeOpacity",2);s([p],we.prototype,"changeBlendMode",2);s([p],we.prototype,"reset",2);s([p],we.prototype,"correctOverlayFlip",2);var st=class{constructor(t){this.selectOverlay=async t=>{if(t!==this.identifier){const e=this.defaultBlendModeForIdentifier(t);await this.overlayStore.setOverlayEffect({identifier:t,opacity:1,blendMode:e});this.addSnapshot("add","overlay");this.editor.render()}};this.changeOpacity=t=>{const e=this.overlayStore.setEffectProperties({opacity:t});if(e){this.overlayStore.changeOpacity(e.opacity);this.editor.render()}};this.toolSnapshot=()=>{this.addSnapshot("edit",this.locale.controls.sliderOpacity)};this.addSnapshot=(t,e)=>{this.editor.addSnapshot(void 0,t,e)};this.changeBlendMode=t=>{const e=this.overlayStore.setEffectProperties({blendMode:t});if(e){this.overlayStore.changeBlendMode(e.blendMode);this.addSnapshot("edit",this.locale.controls.carouselBlendMode);this.editor.render()}};this.pureReset=()=>{this.overlayStore.removeOverlayEffect();this.overlayStore.reset()};this.reset=()=>{this.pureReset();this.addSnapshot("delete",this.locale.controls.buttonReset);this.editor.render()};this.updateStateFromSerialization=async t=>{const e=this.entityManager.items.find(o=>o.identifier===t.identifier);if(e){return this.overlayStore.setOverlayEffect(t).then(()=>{this.editor.transformToolStore.setOverlayOpacity(t.opacity)})}throw new ie(t.identifier)};this.updateStateFromHistory=async t=>{if(t.identifier==="identity"){this.pureReset();return new Promise(e=>{e()})}return this.overlayStore.setOverlayEffect(t)};this.correctOverlayFlip=()=>{this.overlayStore.correctOverlayFlip()};this.defaultBlendModeForIdentifier=t=>{const e=this.entityManager.items.findIndex(o=>o.identifier===t);return e!==-1?this.entityManager.items[e].defaultBlendMode:"lighten"};this.editor=t;this.overlayStore=new we(this.editor.engineMediator,t);const e=this.editor.assetProvider.getAssets("overlay");const{config:o}=this;this.entityManager=new et(e,{...o,flattenCategories:true,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("overlay")})}get state(){return this.overlayStore.state}get identifier(){return this.overlayStore.state.identifier}get opacity(){return this.overlayStore.state.opacity}get blendMode(){return this.overlayStore.state.blendMode}get isOptionSelected(){return this.identifier!=="identity"}get config(){return this.editor.configStore.config["overlay"]}get locale(){return this.editor.configStore.locale["overlay"]}get items(){return this.entityManager.items}get allBlendModes(){const t=this.locale.controls;return Object.keys(eo).map(e=>{const o=eo[e];const r=`blendMode${o.charAt(0).toUpperCase()}${o.slice(1)}`;return{identifier:o,value:t[r]}})}};s([p],st.prototype,"selectOverlay",2);s([p],st.prototype,"changeOpacity",2);s([p],st.prototype,"changeBlendMode",2);s([p],st.prototype,"pureReset",2);s([p],st.prototype,"reset",2);s([p],st.prototype,"updateStateFromSerialization",2);s([p],st.prototype,"updateStateFromHistory",2);s([p],st.prototype,"correctOverlayFlip",2);s([h],st.prototype,"state",1);s([h],st.prototype,"identifier",1);s([h],st.prototype,"opacity",1);s([h],st.prototype,"blendMode",1);s([h],st.prototype,"isOptionSelected",1);s([h],st.prototype,"config",1);s([h],st.prototype,"locale",1);s([h],st.prototype,"items",1);s([h],st.prototype,"allBlendModes",1);var ey="white";var At={identifier:"identity",opacity:1,tintColor:kt[ey],tintMode:"none",resizeMode:"keepAspect"};var ja={};var ce=()=>{return Object.keys(kt).map(i=>{const t=kt[i];return{identifier:i,color:t,colorString:le(t)}})};function _n(i,t=null){return new Promise((e,o)=>{const r=new Image;r.addEventListener("load",()=>{const n=document.createElement("canvas");const a=n.getContext("2d");n.width=r.width;n.height=r.height;if(t){n.width=t;n.height=t*r.height/r.width}a.drawImage(r,0,0,n.width,n.height);const l=n.toDataURL("image/png");Qi(n);e(l)});r.addEventListener("error",()=>{o()});r.src=i})}var Np=i=>{return new Promise((t,e)=>{const o=new FileReader;o.onload=async r=>{try{const{result:n}=r.target;const a=await _n(n,150);t({stickerURI:n,thumbnailURI:a,name:i.name||"",type:i.type,identifier:mi()})}catch(n){e(n)}};o.onerror=r=>{e(r)};o.readAsDataURL(i)})};var Vp="identity";var Xa="imgly_sticker_custom";var W=class{constructor(t){this.state=T.map(ja);this.customStickers=[];this.colorList=ce();this.selectLast=()=>{this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))};this.doesStickerAssetExist=t=>{return this.entityManager.items.findIndex(e=>e.identifier===t)!==-1};this.add=t=>{const e=this.entityManager.items.find(n=>n.identifier===t);const o=e?e.tintMode:At.tintMode;const r=e?e.resizeMode:At.resizeMode;this.editor.spriteStore.addSticker({state:{identifier:t,tintMode:o,tintColor:At.tintColor,opacity:At.opacity,resizeMode:r}})};this.duplicate=()=>{if(this.id){const t=this.editor.spriteStore.getDuplicateContainerTransform(this.id);const e=this.editor.spriteStore.getDuplicateContainerFlip(this.id);const{flipHorizontally:o,flipVertically:r}=this.editor.outputContainer.getData();this.editor.spriteStore.addSticker({state:{identifier:this.identifier,tintColor:I(this.tintColor),tintMode:this.tintMode,resizeMode:this.resizeMode,opacity:this.opacity,flipHorizontally:o!==e.flipHorizontally,flipVertically:r!==e.flipVertically},transform:t})}};this.bringToFront=()=>{if(this.id){this.editor.spriteStore.bringToFront(this.id)}};this.flipHorizontally=()=>{if(this.id){this.editor.spriteStore.flipHorizontally(this.id)}};this.delete=()=>{if(this.id){const t=this.id;this.editor.spriteStore.removeSprite(t);this.state.delete(t);this.selectLast()}};this.updateStateFromHistory=(t,e)=>{if((0,ct.default)(e,this.state.get(t))){return}this.setState(t,e);this.editor.spriteStore.setContainerProperties(t,e)};this.setState=(t,e)=>{const o=this.state.get(t);if(o){if("opacity"in e){o.opacity=e.opacity}if(e.tintColor){o.tintColor=e.tintColor}if(e.tintMode){o.tintMode=e.tintMode}if(e.resizeMode){o.resizeMode=e.resizeMode}this.state.set(t,o)}else{this.state.set(t,{identifier:e.identifier,opacity:e.opacity,tintMode:e.tintMode,resizeMode:e.resizeMode,tintColor:e.tintColor?e.tintColor:At.tintColor})}};this.changeOpacity=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{opacity:t});const o=this.editor.spriteStore.getContainerProperties(this.id);e.opacity=o.opacity;this.state.set(this.id,e)}}};this.changeTintColor=t=>{if(this.id){const e=this.state.get(this.id);if(e){const{tintMode:o}=this.entityManager.items.find(n=>n.identifier===this.identifier);this.editor.spriteStore.setContainerProperties(this.id,{tintColor:t,tintMode:o});const r=this.editor.spriteStore.getContainerProperties(this.id);e.tintColor=r.tintColor;e.tintMode=r.tintMode||At.tintMode;this.state.set(this.id,e)}}};this.tintColorSnapshot=()=>{this.addSnapshot("edit",this.locale.history.color)};this.addFiles=async t=>{this.editor.modalStore.showInfoModal("loading");if(t.length){let e=0;const o=[];for(e=0;e<t.length;e+=1){o.push(Np(t[e]))}try{const r=await Promise.all(o);this.addCustomStickerAsset(r);this.editor.configStore.events.onStickerUploadedAdd(r.map(({identifier:n,stickerURI:a},l)=>({identifier:n,stickerURI:a,file:t[l]})))}catch(r){this.editor.modalStore.hideModal();this.editor.modalStore.showInfoModal("stickerLoading")}}};this.addCustomStickerAsset=async t=>{const e=[];t.forEach(({stickerURI:a,thumbnailURI:l,name:c,identifier:d,type:u})=>{e.push({stickerURI:a,thumbnailURI:l,name:c,tintMode:this.customStickerTintMode,resizeMode:this.customStickerResizeMode,identifier:d});this.customStickers.push({identifier:d,type:u,stickerURI:a,name:c})});const o=this.locale.categories[Xa];this.editor.assetProvider.addCustomStickerAsset(e,Xa,o);const r=this.editor.assetProvider.getAssets("sticker");const{config:n}=this;this.entityManager=new et(r,{...n,itemFallbackKey:"stickerURI",locale:this.locale.items,getAssetPath:this.editor.getAssetPath("sticker")});this.selectedCategory=Xa;this.editor.modalStore.hideModal()};this.toolSnapshot=()=>{this.addSnapshot("edit",this.locale.history.opacity)};this.addSnapshot=(t,e)=>{const o=this.editor.historyStore.getCurrentSpritesState();if((o==null?void 0:o.sticker)&&(0,ct.default)(o.sticker,I(this.state))){return}if(this.currentSticker){this.editor.spriteStore.addSnapshot(t,e)}};this.toggleCategorySelection=t=>{this.selectedCategory=this.selectedCategory===t?Vp:t};this.pureReset=()=>{this.state=T.map(ja)};this.dispose=()=>{this.state=null;this.selectedCategory=null;this.editor=null;this.entityManager=null};this.editor=t;this.selectedCategory=Vp;const{config:e}=this;const o=this.editor.assetProvider.getAssets("sticker");this.entityManager=new et(o,{...e,itemFallbackKey:"stickerURI",locale:{...this.locale.items,...this.locale.categories},getAssetPath:this.editor.getAssetPath("sticker")});At.tintColor=I(Ut(this.config,"defaultTintColor",At.tintColor));if(this.config.colors&&this.config.colors.length>0){this.colorList=Kt(I(this.config.colors))}}get isStickerSelected(){return this.editor.spriteStore.isSpriteSticker}get isCustomStickerEnabled(){return this.config.enableCustomUpload}get customStickerTintMode(){return this.config.customStickerTintMode}get customStickerResizeMode(){return this.config.customStickerResizeMode}get currentSticker(){if(this.isStickerSelected){const t=this.state.get(this.id);if(t){return t}}return void 0}get identifier(){if(this.isStickerSelected){const t=this.state.get(this.id);if(t){return t.identifier}}return"none"}get id(){if(this.isStickerSelected){return this.editor.spriteStore.id}return void 0}get opacity(){if(this.currentSticker){return this.currentSticker.opacity}return At.opacity}get tintMode(){if(this.currentSticker){return this.currentSticker.tintMode}return At.tintMode}get resizeMode(){if(this.currentSticker){return this.currentSticker.resizeMode}return At.resizeMode}get tintable(){if(this.currentSticker){return this.currentSticker.tintMode==="solid"||this.currentSticker.tintMode==="colorized"}return false}get tintColor(){if(this.currentSticker){return this.currentSticker.tintColor}return At.tintColor}get config(){return this.editor.configStore.config["sticker"]}get locale(){return this.editor.configStore.locale["sticker"]}get localeColor(){return this.editor.configStore.locale.common.color}get selectedCategoryIdentifier(){return this.selectedCategory}get items(){return this.entityManager.items}get categories(){return this.entityManager.categories}};s([T],W.prototype,"selectedCategory",2);s([T],W.prototype,"entityManager",2);s([p],W.prototype,"selectLast",2);s([p],W.prototype,"add",2);s([p],W.prototype,"duplicate",2);s([p],W.prototype,"bringToFront",2);s([p],W.prototype,"flipHorizontally",2);s([p],W.prototype,"delete",2);s([p],W.prototype,"updateStateFromHistory",2);s([p],W.prototype,"setState",2);s([p],W.prototype,"changeOpacity",2);s([p],W.prototype,"changeTintColor",2);s([p],W.prototype,"addFiles",2);s([p],W.prototype,"addCustomStickerAsset",2);s([p],W.prototype,"toggleCategorySelection",2);s([p],W.prototype,"pureReset",2);s([p],W.prototype,"dispose",2);s([h],W.prototype,"isStickerSelected",1);s([h],W.prototype,"isCustomStickerEnabled",1);s([h],W.prototype,"customStickerTintMode",1);s([h],W.prototype,"customStickerResizeMode",1);s([h],W.prototype,"currentSticker",1);s([h],W.prototype,"identifier",1);s([h],W.prototype,"id",1);s([h],W.prototype,"opacity",1);s([h],W.prototype,"tintMode",1);s([h],W.prototype,"resizeMode",1);s([h],W.prototype,"tintable",1);s([h],W.prototype,"tintColor",1);s([h],W.prototype,"config",1);s([h],W.prototype,"locale",1);s([h],W.prototype,"localeColor",1);s([h],W.prototype,"selectedCategoryIdentifier",1);s([h],W.prototype,"items",1);s([h],W.prototype,"categories",1);var iy="imgly_font_open_sans_bold";var X={text:"Write Something",identifier:iy,fontSize:73.3,defaultFontSize:73.3,fontFamily:"Open Sans",fontStyle:"",fontWeight:"bold",lineHeight:1,alignment:"center",textColor:kt.white,backgroundColor:kt.transparent||[0,0,0,0],width:0};var Ya={};var Up=()=>{return Object.keys(Ga).map(i=>{const t=Ga[i];return{identifier:i,color:t,colorString:le(t)}})};var Gp={100:"Extra Light",200:"Light",300:"Book",400:"Regular",500:"Medium",600:"SemiBold",700:"Bold",800:"Black",900:"Extra Black",bold:"Bold",normal:"Regular",lighter:"Lighter"};var xo=class{constructor(t){this.state=T.map(Ya);this.colorList=ce();this.backgroundColorList=Up();this.fontsLoadStatus=T.object({pending:false,loaded:false});this.doesTextAssetExist=t=>{return this.editor.assetProvider.getFontAssets().findIndex(e=>e.identifier===t)!==-1};this.validFontWithConfig=t=>{return this.fonts.find(e=>e.identifier===t)||this.fonts[0]};this.addOrselect=()=>{if(!this.state.size){this.add()}else{this.selectLast();this.loadFonts()}};this.selectLast=()=>{this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))};this.add=async()=>{const{fontsLoadStatus:t}=this;const e=()=>{this.editor.spriteStore.addText({state:{identifier:X.identifier,text:X.text,textColor:X.textColor,backgroundColor:X.backgroundColor,lineHeight:X.lineHeight,alignment:X.alignment,fontSize:0}})};if(!t.pending&&!t.loaded){this.fontsLoadStatus.pending=true;const o=this.editor.assetProvider.getFontManager();try{await o.loadFontsWithIdentifiers([X.identifier]);e()}catch(r){this.editor.modalStore.showActionModal({type:"error",identifier:"fontLoading",error:X.identifier})}await this.loadFonts()}else{e()}};this.duplicate=()=>{if(this.id){const t=this.editor.spriteStore.getDuplicateContainerTransform(this.id);this.editor.spriteStore.addText({state:{identifier:this.identifier,text:this.text,textColor:I(this.textColor),lineHeight:this.lineHeight,alignment:this.alignment,fontSize:this.fontSize,backgroundColor:I(this.backgroundColor),width:this.width},transform:t})}};this.bringToFront=()=>{if(this.id){this.editor.spriteStore.bringToFront(this.id)}};this.delete=()=>{if(this.id){const t=this.id;this.editor.spriteStore.removeSprite(t);this.state.delete(t);this.selectLast()}};this.setEditMode=t=>{this.editor.spriteStore.setEditMode(t)};this.changeFont=t=>{const e=this.fonts.find(o=>o.identifier===t);this.changeIdentifier(e,this.id);if(this.id){this.addSnapshot("edit",this.locale.history.fontFamily)}};this.changeIdentifier=(t,e)=>{rt(()=>{if(t&&e){const o=this.state.get(e);if(o){this.editor.spriteStore.setContainerProperties(e,{fontIdentifier:t.identifier},true);const r=this.editor.spriteStore.getContainerProperties(e);o.identifier=r.fontIdentifier;o.fontFamily=t.fontFamily;o.fontStyle=t.fontStyle;o.fontWeight=t.fontWeight;o.fontSize=r.fontSize;o.width=r.width;o.defaultFontSize=o.fontSize;this.state.set(e,o)}}})};this.changeFontSize=(t,e=false)=>{if(this.id){const o=this.state.get(this.id);if(o){o.fontSize=t;if(e){o.defaultFontSize=t}this.state.set(this.id,o)}}};this.updateDefaultFontSize=()=>{if(this.id){const t=this.state.get(this.id);if(t){t.defaultFontSize=t.fontSize;this.state.set(this.id,t)}}};this.changeSize=(t,e)=>{const o=this.state.get(t);if(o){o.width=e.width;o.fontSize=e.fontSize;o.defaultFontSize=e.fontSize;this.state.set(t,o)}};this.changeWidth=t=>{if(this.id){const e=this.state.get(this.id);if(e){e.width=t;this.state.set(this.id,e)}}};this.changeText=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{text:t},true);let o=this.editor.spriteStore.getContainerProperties(this.id);const r=this.editor.outputContainer.getSizeInOutputSpace();const n=this.editor.spriteStore.getSize(this.id);if(!this.config.disableAutoScaling){if(n.height>r.height){this.editor.spriteStore.setContainerProperties(this.id,{fontSize:this.calculateFitFontSize(this.id,r.height)},true)}}o=this.editor.spriteStore.getContainerProperties(this.id);e.text=o.text;e.fontSize=o.fontSize;e.defaultFontSize=o.fontSize;this.state.set(this.id,e);this.addSnapshot("edit",this.locale.history.edit)}}};this.calculateFitFontSize=(t,e)=>{if(!xo.measureContext){const b=document.createElement("canvas");xo.measureContext=b.getContext("2d")}const o=this.editor.spriteStore.getContainerProperties(t);const r=this.editor.engine.assetProvider.getFontManager().getFontWithId(o.fontIdentifier);const n=this.config.minFontSizeForAutoScaling;const a=Ls(xo.measureContext,o.text,r,o.fontSize,o.lineHeight,o.width,r.textMetrics);const l=Math.min(Math.floor(o.fontSize*(e/a.height)),1);const c=Math.round(o.fontSize);let d=0;let u=c-l;let m=Math.floor((c-l)*2);let f=u;while(d<=m){u=d+Math.floor((m-d)/2);const b=Ls(xo.measureContext,o.text,r,u,o.lineHeight,o.width,r.textMetrics);if(e<b.height){m=u-1;f=u-1}else if(e>b.height){d=u+1;if(l+u>=c){return c}}else{f=u;break}}if(n&&f<n){return n}return f};this.changeLineHeight=t=>{if(this.id){const e=this.state.get(this.id);if(e&&t){this.editor.spriteStore.setContainerProperties(this.id,{lineHeight:t},true);const o=this.editor.spriteStore.getContainerProperties(this.id);e.lineHeight=o.lineHeight;this.state.set(this.id,e)}}};this.changeColor=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{textColor:t});const o=this.editor.spriteStore.getContainerProperties(this.id);e.textColor=o.textColor;this.state.set(this.id,e)}}};this.changeBackgroundColor=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{backgroundColor:t});const o=this.editor.spriteStore.getContainerProperties(this.id);e.backgroundColor=o.backgroundColor;this.state.set(this.id,e)}}};this.colorSnapshot=()=>{this.addSnapshot("edit",this.locale.history.textColor)};this.backgroundColorSnapshot=()=>{this.addSnapshot("edit",this.locale.history.backgroundColor)};this.changeAlignment=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{alignment:t});const o=this.editor.spriteStore.getContainerProperties(this.id);e.alignment=o.alignment;this.state.set(this.id,e);this.addSnapshot("edit",this.locale.history.alignment)}}};this.toolSnapshot=()=>{this.addSnapshot("edit",this.locale.history.lineSpacing)};this.addSnapshot=(t,e)=>{const o=this.editor.historyStore.getCurrentSpritesState();if((o==null?void 0:o.text)&&(0,ct.default)(o.text,I(this.state))){return}if(this.currentText){this.editor.spriteStore.addSnapshot(t,e)}};this.updateStateFromHistory=(t,e)=>{if((0,ct.default)(e,this.state.get(t))){return}this.setState(t,e);this.editor.spriteStore.setContainerProperties(t,e)};this.setState=(t,e)=>{const o=this.state.get(t);if(o){if(e.alignment){o.alignment=e.alignment}if(e.text){o.text=e.text}if(e.lineHeight){o.lineHeight=e.lineHeight}if(e.textColor){o.textColor=e.textColor}if(e.backgroundColor){o.backgroundColor=e.backgroundColor}if(e.fontIdentifier){o.identifier=e.fontIdentifier}if(e.fontSize){o.fontSize=e.fontSize;o.defaultFontSize=e.fontSize}if(e.width){o.width=e.width}}else{const r=this.validFontWithConfig(e.fontIdentifier);if(r){this.state.set(t,{text:e.text,identifier:r.identifier,alignment:e.alignment,textColor:e.textColor?e.textColor:X.textColor,backgroundColor:e.backgroundColor?e.backgroundColor:X.backgroundColor,fontFamily:r.fontFamily,fontStyle:r.fontStyle,fontSize:e.fontSize,fontWeight:r.fontWeight,lineHeight:e.lineHeight,width:e.width,defaultFontSize:e.fontSize})}}};this.setFontSize=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{fontSize:t},true);const o=this.editor.spriteStore.getContainerProperties(this.id);e.fontSize=o.fontSize;e.defaultFontSize=o.fontSize;this.state.set(this.id,e)}}};this.pureReset=()=>{this.state=T.map(Ya)};this.dispose=()=>{this.state=null;this.fontsLoadStatus=null;this.editor=null;this.backgroundColorList=null;this.colorList=null};this.editor=t;if(!this.fonts.find(e=>e.identifier===X.identifier)){X.identifier=this.fonts[0].identifier}X.textColor=I(Ut(this.config,"defaultColor",X.textColor));X.backgroundColor=I(Ut(this.config,"defaultBackgroundColor",X.backgroundColor));X.text=this.locale.canvasControls.placeholderText;if(this.config.colors&&this.config.colors.length>0){this.colorList=Kt(I(this.config.colors))}if(this.config.backgroundColors&&this.config.backgroundColors.length>0){this.backgroundColorList=Kt(I(this.config.backgroundColors))}}static defaultText(){return X.text}static getDisplayFontStyle(t){const e=t.fontWeight&&Gp[t.fontWeight].toLowerCase()!=="regular"?Gp[t.fontWeight]:"";const o=t.fontStyle&&t.fontStyle.toLowerCase()!=="normal"?t.fontStyle:"";return`${t.fontFamily.toLowerCase().includes(e.toLowerCase())?"":e} ${o}`.trim()}async loadFonts(){const{fontsLoadStatus:t}=this;if(t.loaded)return;const e=this.editor.assetProvider.getFontManager();const o=this.editor.assetProvider.getFontAssetsForText().map(r=>r.identifier);try{await e.loadFontsWithIdentifiers(o)}catch(r){const n=o.filter(a=>!e.isFontLoaded(a)).join(", ");this.editor.modalStore.showActionModal({type:"error",identifier:"fontLoading",error:n})}t.loaded=true}get isEditMode(){return this.editor.spriteStore.isEditMode}get isTextSelected(){return this.editor.spriteStore.isSpriteText}get fontsLoaded(){return this.fontsLoadStatus.loaded}get currentText(){if(this.isTextSelected){const t=this.state.get(this.id);if(t){return t}}return void 0}get text(){if(this.currentText){return this.currentText.text}return X.text}get fontSize(){if(this.currentText){return this.currentText.fontSize}return X.fontSize}get defaultFontSize(){if(this.currentText){return this.currentText.defaultFontSize}return X.defaultFontSize}get width(){if(this.currentText){return this.currentText.width}return X.width}get fontFamily(){if(this.currentText){return this.currentText.fontFamily}return X.fontFamily}get fontStyle(){if(this.currentText){return this.currentText.fontStyle}return X.fontStyle}get fontWeight(){if(this.currentText){return this.currentText.fontWeight}return X.fontWeight}get lineHeight(){if(this.currentText){return this.currentText.lineHeight}return X.lineHeight}get identifier(){if(this.currentText){return this.currentText.identifier}return X.identifier}get id(){if(this.isTextSelected){return this.editor.spriteStore.id}return void 0}get alignment(){if(this.currentText){return this.currentText.alignment}return X.alignment}get textColor(){if(this.currentText){return this.currentText.textColor}return X.textColor}get backgroundColor(){if(this.currentText){return this.currentText.backgroundColor}return X.backgroundColor}get config(){return this.editor.configStore.config["text"]}get locale(){return this.editor.configStore.locale["text"]}get localeColor(){return this.editor.configStore.locale.common.color}get rawOptions(){return this.editor.assetProvider.getFontAssetsForText()}get fonts(){return this.rawOptions.reduce((t,e)=>{if(this.rawOptions.find(o=>o.identifier===e.identifier)){return[...t,{identifier:e.identifier,fontFamily:e.fontFamily,fontStyle:e.fontStyle||"",fontWeight:e.fontWeight||""}]}return t},[])}get fontFamilies(){return[...new Set(this.fonts)]}};var B=xo;s([p],B.prototype,"addOrselect",2);s([p],B.prototype,"selectLast",2);s([p],B.prototype,"add",2);s([p],B.prototype,"duplicate",2);s([p],B.prototype,"bringToFront",2);s([p],B.prototype,"delete",2);s([p],B.prototype,"setEditMode",2);s([p],B.prototype,"changeFont",2);s([p],B.prototype,"changeIdentifier",2);s([p],B.prototype,"changeFontSize",2);s([p],B.prototype,"updateDefaultFontSize",2);s([p],B.prototype,"changeSize",2);s([p],B.prototype,"changeWidth",2);s([p],B.prototype,"changeText",2);s([p],B.prototype,"changeLineHeight",2);s([p],B.prototype,"changeColor",2);s([p],B.prototype,"changeBackgroundColor",2);s([p],B.prototype,"changeAlignment",2);s([p],B.prototype,"updateStateFromHistory",2);s([p],B.prototype,"setState",2);s([p],B.prototype,"setFontSize",2);s([p],B.prototype,"pureReset",2);s([p],B.prototype,"dispose",2);s([h],B.prototype,"isEditMode",1);s([h],B.prototype,"isTextSelected",1);s([h],B.prototype,"fontsLoaded",1);s([h],B.prototype,"currentText",1);s([h],B.prototype,"text",1);s([h],B.prototype,"fontSize",1);s([h],B.prototype,"defaultFontSize",1);s([h],B.prototype,"width",1);s([h],B.prototype,"fontFamily",1);s([h],B.prototype,"fontStyle",1);s([h],B.prototype,"fontWeight",1);s([h],B.prototype,"lineHeight",1);s([h],B.prototype,"identifier",1);s([h],B.prototype,"id",1);s([h],B.prototype,"alignment",1);s([h],B.prototype,"textColor",1);s([h],B.prototype,"backgroundColor",1);s([h],B.prototype,"config",1);s([h],B.prototype,"locale",1);s([h],B.prototype,"localeColor",1);s([h],B.prototype,"rawOptions",1);s([h],B.prototype,"fonts",1);s([h],B.prototype,"fontFamilies",1);var oy="imgly_text_design_blocks";var at={identifier:oy,color:kt.white,isInverted:false,text:"Write Something With Style",seed:0,padding:0,width:0};var Ka={imgly_text_design_blocks:835,imgly_text_design_rotated:6,imgly_text_design_blocks_light:3,imgly_text_design_equal_width:727,imgly_text_design_masked:259,imgly_text_design_celebrate:579,imgly_text_design_sunshine:77,imgly_text_design_masked_badge:683,imgly_text_design_blocks_condensed:673,imgly_text_design_celebrate_simple:425,imgly_text_design_equal_width_fat:961,imgly_text_design_watercolor:671,imgly_text_design_particles:683,imgly_text_design_masked_speech_bubble:317,imgly_text_design_masked_speech_bubble_comic:229,imgly_text_design_multiline:831};var qa={};var N=class{constructor(t){this.state=T.map(qa);this.colorList=ce();this.fontsLoaded=false;this.doesTextDesignAssetExist=t=>{return this.entityManager.items.findIndex(e=>e.identifier===t)!==-1};this.addOrselect=async()=>{await this.loadFonts();if(!this.state.size){this.add()}else{this.selectLast()}};this.selectLast=()=>{this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))};this.add=()=>{this.editor.spriteStore.addTextDesign({state:{identifier:at.identifier,text:at.text,color:at.color,isInverted:at.isInverted,seed:Ka[at.identifier]||at.seed,padding:0}})};this.updateStateFromHistory=(t,e)=>{if((0,ct.default)(e,this.state.get(t))){return}const o=this.state.get(t);if(e.identifier===o.identifier){this.setState(t,e);this.editor.spriteStore.setContainerProperties(t,e)}else{this.changeIdentifier(e.identifier,false,e.seed,t)}};this.setState=(t,e)=>{const o=this.state.get(t);if(o){if(e.inverted){o.isInverted=e.inverted}if(e.seed){o.seed=e.seed}if(e.color){o.color=e.color}if(e.padding){o.padding=e.padding}if(e.width){o.width=e.width}}else{this.state.set(t,{width:e.width,text:e.text,isInverted:e.inverted,identifier:e.identifier,seed:e.seed,color:e.color?e.color:at.color,padding:e.padding})}};this.changeText=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{text:t},true);const o=this.editor.spriteStore.getContainerProperties(this.id);e.text=o.text;this.state.set(this.id,e);this.addSnapshot("edit",this.locale.history.edit)}}};this.setEditMode=t=>{this.editor.spriteStore.setEditMode(t)};this.duplicate=()=>{if(this.id){const t=this.editor.spriteStore.getDuplicateContainerTransform(this.id);this.editor.spriteStore.addTextDesign({state:{identifier:this.identifier,text:this.text,color:I(this.color),isInverted:this.isInverted,seed:this.seed,padding:this.padding,width:this.width},transform:t})}};this.bringToFront=()=>{if(this.id){this.editor.spriteStore.bringToFront(this.id)}};this.addSnapshot=(t,e)=>{const o=this.editor.historyStore.getCurrentSpritesState();if((o==null?void 0:o.textdesign)&&(0,ct.default)(o.textdesign,I(this.state))){return}if(this.currentTextDesign){this.editor.spriteStore.addSnapshot(t,e)}};this.delete=(t=this.id)=>{if(t){this.editor.spriteStore.removeSprite(t);this.state.delete(t);this.selectLast()}};this.changeSeed=()=>{if(this.id){const t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{seed:-1},true);const e=this.editor.spriteStore.getContainerProperties(this.id);t.seed=e.seed;this.state.set(this.id,t);this.addSnapshot("edit",this.locale.history.shuffle)}}};this.changeIdentifier=(t,e=true,o=null,r=this.id)=>{if(r&&t!==this.identifier){const n=this.state.get(r);const a=this.editor.spriteStore.getContainerTransform(r);this.editor.spriteStore.addTextDesign({spriteId:r,state:{identifier:t,text:n.text,color:I(n.color),isInverted:n.isInverted,seed:o||Ka[t]||n.seed,padding:n.padding,width:n.width},transform:a},e,true)}};this.changeColor=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{color:t});const o=this.editor.spriteStore.getContainerProperties(this.id);e.color=o.color;this.state.set(this.id,e)}}};this.colorSnapshot=()=>{this.addSnapshot("edit",this.locale.history.color)};this.invertBackground=()=>{if(this.id){const t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{inverted:!t.isInverted},true);const e=this.editor.spriteStore.getContainerProperties(this.id);t.isInverted=e.inverted;this.state.set(this.id,t);this.addSnapshot("edit",this.locale.history.invert)}}};this.changeWidth=t=>{if(this.id){const e=this.state.get(this.id);if(e){e.width=t;this.state.set(this.id,e)}}};this.changePadding=t=>{if(this.id){const e=this.state.get(this.id);if(e){e.padding=t;this.state.set(this.id,e)}}};this.pureReset=()=>{this.state=T.map(qa)};this.dispose=()=>{this.state=null;this.fontsLoaded=null;this.editor=null;this.colorList=null};this.editor=t;const e=this.editor.assetProvider.getAssets("textdesign");this.entityManager=new et(e,{...this.config,flattenCategories:true,locale:{},getAssetPath:this.editor.getAssetPath("textdesign")});if(!this.entityManager.items.find(o=>o.identifier===at.identifier)){at.identifier=this.entityManager.items[0].identifier}at.text=this.locale.canvasControls.placeholderText;at.color=I(Ut(this.config,"defaultColor",at.color));if(this.config.colors&&this.config.colors.length>0){this.colorList=Kt(I(this.config.colors))}}static defaultText(){return at.text}async loadFonts(){if(this.fontsLoaded)return;const t=this.editor.assetProvider.getFontManager();const e=this.editor.assetProvider.getFontAssetsForTextDesign().map(o=>o.identifier);try{await t.loadFontsWithIdentifiers(e)}catch(o){const r=e.filter(n=>!t.isFontLoaded(n)).join(", ");this.editor.modalStore.showActionModal({type:"error",identifier:"fontLoading",error:r})}this.fontsLoaded=true}get isTextDesignSelected(){return this.editor.spriteStore.isSpriteTextDesign}get isEditMode(){return this.editor.spriteStore.isEditMode}get currentTextDesign(){if(this.isTextDesignSelected&&this.id){const t=this.state.get(this.id);if(t){return t}}return void 0}get id(){if(this.isTextDesignSelected){return this.editor.spriteStore.id}return void 0}get text(){if(this.currentTextDesign){return this.currentTextDesign.text}return at.text}get seed(){if(this.currentTextDesign){return this.currentTextDesign.seed}return at.seed}get padding(){if(this.currentTextDesign){return this.currentTextDesign.padding}return at.padding}get width(){if(this.currentTextDesign){return this.currentTextDesign.width}return at.width}get identifier(){if(this.currentTextDesign){return this.currentTextDesign.identifier}return null}get isInverted(){if(this.currentTextDesign){return this.currentTextDesign.isInverted}return at.isInverted}get color(){if(this.currentTextDesign){return this.currentTextDesign.color}return at.color}get config(){return this.editor.configStore.config["textdesign"]}get locale(){return this.editor.configStore.locale["textdesign"]}get localeColor(){return this.editor.configStore.locale.common.color}get items(){return this.entityManager.items}};s([p],N.prototype,"addOrselect",2);s([p],N.prototype,"selectLast",2);s([p],N.prototype,"add",2);s([p],N.prototype,"updateStateFromHistory",2);s([p],N.prototype,"setState",2);s([p],N.prototype,"changeText",2);s([p],N.prototype,"setEditMode",2);s([p],N.prototype,"duplicate",2);s([p],N.prototype,"bringToFront",2);s([p],N.prototype,"delete",2);s([p],N.prototype,"changeSeed",2);s([p],N.prototype,"changeIdentifier",2);s([p],N.prototype,"changeColor",2);s([p],N.prototype,"invertBackground",2);s([p],N.prototype,"changeWidth",2);s([p],N.prototype,"changePadding",2);s([p],N.prototype,"pureReset",2);s([p],N.prototype,"dispose",2);s([h],N.prototype,"isTextDesignSelected",1);s([h],N.prototype,"isEditMode",1);s([h],N.prototype,"currentTextDesign",1);s([h],N.prototype,"id",1);s([h],N.prototype,"text",1);s([h],N.prototype,"seed",1);s([h],N.prototype,"padding",1);s([h],N.prototype,"width",1);s([h],N.prototype,"identifier",1);s([h],N.prototype,"isInverted",1);s([h],N.prototype,"color",1);s([h],N.prototype,"config",1);s([h],N.prototype,"locale",1);s([h],N.prototype,"localeColor",1);s([h],N.prototype,"items",1);var de={identifier:"identity",opacity:1,width:0,color:kt.white};var ry=new Ce(0,1);var ke=class{constructor(t){this.changeIdentifier=t=>{this.state.identifier=t};this.changeOpacity=t=>{const e=ry.clamp(t);this.state.opacity=e};this.changeWidth=t=>{this.state.width=t};this.changeColor=t=>{this.state.color=t};this.reset=()=>{if(this.indexInContainer===-1){this.state.identifier=de.identifier;this.state.opacity=de.opacity;this.state.width=de.width;this.state.color=de.color;this.removeIndex()}};this.removeFrameEffect=()=>{if(this.effect){this.engine.removeEffect(this.effect);this.effect=void 0}};this.setEffectProperties=t=>{if(this.effect){this.removeIndex();this.effect.setProperties(t);return this.effect.getProperties()}return null};this.setFrameEffect=({identifier:t,width:e,opacity:o,color:r})=>{const n={...this.state};this.changeIdentifier(t);this.changeWidth(e);this.changeOpacity(o);this.changeColor(r);this.removeFrameEffect();return new Promise((a,l)=>{this.engine.addFrameFromAssets(t,this.engineMediator.image.container).then(c=>{this.effect=c;this.effect.setProperties({tintColor:r,opacity:o,width:e});a()}).catch(c=>{this.changeIdentifier(n.identifier);this.changeOpacity(n.opacity);this.changeWidth(n.width);this.changeColor(n.color);if(n.identifier==="identity"){this.removeIndex()}l(c)})})};this.removeIndex=()=>{this.engineMediator.orderHelper.removeSprite(this.state.identifier)};this.engineMediator=t;this.state=de}get engine(){return this.engineMediator.engine}get imageContainer(){return this.engineMediator.image.container}get indexInContainer(){if(this.effect){return this.effect.getIndexInParent()}return-1}};s([T],ke.prototype,"state",2);s([p],ke.prototype,"changeIdentifier",2);s([p],ke.prototype,"changeOpacity",2);s([p],ke.prototype,"changeWidth",2);s([p],ke.prototype,"changeColor",2);s([p],ke.prototype,"reset",2);var Z=class{constructor(t){this.colorList=ce();this.selectFrame=async t=>{if(t!==this.identifier){const e=.1*this.editor.shortestOutputSide;await this.frameStore.setFrameEffect({identifier:t,width:e,opacity:1,color:de.color});this.editor.render();this.addSnapshot("add","frame")}};this.changeOpacity=t=>{const e=this.frameStore.setEffectProperties({opacity:t});if(e){this.frameStore.changeOpacity(e.opacity);this.editor.render()}};this.changeWidth=t=>{const e=this.frameStore.setEffectProperties({width:t});if(e){this.frameStore.changeWidth(e.width);this.editor.render()}};this.changeColor=t=>{const e=this.frameStore.setEffectProperties({tintColor:t});if(e){this.frameStore.changeColor(e.tintColor);this.editor.render()}};this.colorSnapshot=()=>{this.addSnapshot("edit",this.locale.controls.selectColor)};this.toolSnapshot=t=>{this.addSnapshot("edit",t)};this.addSnapshot=(t,e)=>{this.editor.addSnapshot(void 0,t,e)};this.pureReset=()=>{this.frameStore.removeFrameEffect();this.frameStore.reset()};this.reset=()=>{this.pureReset();this.addSnapshot("delete",this.locale.controls.buttonReset);this.editor.render()};this.updateStateFromHistory=t=>{if(t.identifier==="identity"){this.pureReset();return new Promise(e=>{e()})}return this.frameStore.setFrameEffect(t)};this.updateStateFromSerialization=async t=>{const e=this.entityManager.items.find(o=>o.identifier===t.identifier);if(e){return this.frameStore.setFrameEffect(t).then(()=>{this.editor.transformToolStore.setFrameOpacity(t.opacity)})}return new Promise((o,r)=>{r(new Error(`Frame Asset doesn't exist`))})};this.editor=t;this.frameStore=new ke(this.editor.engineMediator);const e=this.editor.assetProvider.getAssets("frame");const{config:o}=this;this.entityManager=new et(e,{...o,flattenCategories:true,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("frame")});de.color=I(Ut(this.config,"defaultColor",de.color));if(this.config.colors&&this.config.colors.length>0){this.colorList=Kt(I(this.config.colors))}}get state(){return this.frameStore.state}get identifier(){return this.state.identifier}get color(){return this.state.color}get size(){return this.state.width}get tintable(){const t=this.entityManager.items.find(e=>e.identifier===this.identifier);return t&&t.tintable||false}get opacity(){return this.state.opacity}get minSize(){return this.editor.shortestOutputSide*.05}get maxSize(){return this.editor.shortestOutputSide*.3}get config(){return this.editor.configStore.config["frame"]}get locale(){return this.editor.configStore.locale["frame"]}get localeColor(){return this.editor.configStore.locale.common.color}get items(){return this.entityManager.items}get isOptionSelected(){return this.identifier!=="identity"}};s([p],Z.prototype,"selectFrame",2);s([p],Z.prototype,"changeOpacity",2);s([p],Z.prototype,"changeWidth",2);s([p],Z.prototype,"changeColor",2);s([p],Z.prototype,"pureReset",2);s([p],Z.prototype,"reset",2);s([p],Z.prototype,"updateStateFromHistory",2);s([p],Z.prototype,"updateStateFromSerialization",2);s([h],Z.prototype,"state",1);s([h],Z.prototype,"identifier",1);s([h],Z.prototype,"color",1);s([h],Z.prototype,"size",1);s([h],Z.prototype,"tintable",1);s([h],Z.prototype,"opacity",1);s([h],Z.prototype,"minSize",1);s([h],Z.prototype,"maxSize",1);s([h],Z.prototype,"config",1);s([h],Z.prototype,"locale",1);s([h],Z.prototype,"localeColor",1);s([h],Z.prototype,"items",1);s([h],Z.prototype,"isOptionSelected",1);var ar={size:0,color:kt.white,hardness:0,maximumSize:.125,minimumSize:0,maximumHardness:1,minimumHardness:0};var J=class{constructor(t){this.strokes={strokes:[]};this.colorList=ce();this.dirty=T.box(false);this.id="";this.containerId=()=>{return this.id};this.initSize=()=>{const{minimumSize:t,maximumSize:e}=this.state;const{size:o}=this;if(o===0){this.changeSize(ks(this.config,"defaultSize",[t,e]))}};this.changeColor=t=>{this.state.color=t};this.changeSize=t=>{this.state.size=t};this.changeRelativeSize=t=>{const{maximumSize:e,minimumSize:o}=this.state;this.state.size=(e-o)*t/100+o};this.changeHardness=t=>{this.state.hardness=t};this.reset=()=>{this.pureReset();this.addSnapshot("delete",this.locale.controls.buttonReset);this.editor.render()};this.editor=t;this.state={...ar,hardness:ks(this.config,"defaultHardness",[ar.minimumHardness,ar.maximumHardness]),color:I(Ut(this.config,"defaultColor",ar.color))};if(this.config.colors&&this.config.colors.length>0){this.colorList=Kt(I(this.config.colors))}}addSnapshot(t,e){this.editor.addSnapshot(void 0,t,e)}clickableCanvas(t){this.editor.clickableCanvas(t)}beginStroke(t=[]){if(!this.drawingContainer){const e=this.editor.orderHelper.addSprite("brush");this.drawingContainer=this.editor.engine.addDrawing({strokes:t},this.editor.imageContainer,e)}this.id=this.drawingContainer.getID();this.drawingContainer.beginStroke({id:"imgly_brush_radial",color:I(this.state.color),size:this.state.size,hardness:this.state.hardness})}strokePosition(t){if(this.drawingContainer){const e=this.editor.previewToWorld(t,false);this.drawingContainer.addPointToCurrentStroke(e);this.editor.render()}}endStroke(){if(this.drawingContainer){this.drawingContainer.endStroke();this.editor.render();this.strokes=this.drawingContainer.getData();this.addSnapshot("edit",this.locale.history.brushStroke);this.dirty.set(true)}}updateStateFromHistory(t){if((0,ct.default)(t,this.strokes)){return}if((0,ct.default)(t,{strokes:[]})||!t){this.pureReset();return}if(this.drawingContainer){if(this.strokes&&this.strokes.strokes.length===t.strokes.length){this.dirty.set(false);return}this.strokes=t;this.drawingContainer.setData(this.strokes)}else{const e=this.editor.orderHelper.addSprite("brush");this.drawingContainer=this.editor.engine.addDrawing({strokes:t.strokes},this.editor.imageContainer,e);this.strokes=this.drawingContainer.getData()}this.dirty.set(this.strokes.strokes.length!==0);this.id=this.drawingContainer.getID()}pureReset(){this.dirty.set(false);this.strokes={strokes:[]};if(this.drawingContainer){this.editor.engine.removeContainer(this.drawingContainer);this.drawingContainer=void 0}}get config(){return this.editor.configStore.config["brush"]}get locale(){return this.editor.configStore.locale["brush"]}get localeColor(){return this.editor.configStore.locale.common.color}get color(){return this.state.color}get size(){return this.state.size}get relativeSize(){const{size:t,maximumSize:e,minimumSize:o}=this.state;return(t-o)*100/(e-o)}get sizeOnScreenSpace(){const t=this.editor.engineMediator.engine.getSmallerOutputSide();return this.editor.worldToPreview(this.state.size*t)}get hardness(){return this.state.hardness}get isDirty(){return this.dirty.get()}};s([T],J.prototype,"state",2);s([T],J.prototype,"dirty",2);s([p],J.prototype,"initSize",2);s([p],J.prototype,"changeColor",2);s([p],J.prototype,"changeSize",2);s([p],J.prototype,"changeRelativeSize",2);s([p],J.prototype,"changeHardness",2);s([p],J.prototype,"clickableCanvas",1);s([p],J.prototype,"beginStroke",1);s([p],J.prototype,"strokePosition",1);s([p],J.prototype,"endStroke",1);s([p],J.prototype,"updateStateFromHistory",1);s([p],J.prototype,"reset",2);s([h],J.prototype,"config",1);s([h],J.prototype,"locale",1);s([h],J.prototype,"localeColor",1);s([h],J.prototype,"color",1);s([h],J.prototype,"size",1);s([h],J.prototype,"relativeSize",1);s([h],J.prototype,"sizeOnScreenSpace",1);s([h],J.prototype,"hardness",1);s([h],J.prototype,"isDirty",1);var qt={position:{x:0,y:0},size:{height:0,width:0},lockResolution:false,forceDimensions:false,ratio:"*"};var Ja=class extends Cc{constructor(){super(...arguments);this.prevDimensions={width:0,height:0}}onExport(t){this.emit("export",t)}onClose(){this.emit("close")}onUndo(){this.emit("historyUndo")}onRedo(){this.emit("historyRedo")}onHistoryChange(){this.emit("historyChange")}onEditorReady(){this.emit("editorReady")}onErrorImageLoading(t){this.emit("errorImageLoading",t)}onImageLoaded(){this.emit("imageLoad")}onStickerUploadedAdd(t){this.emit("stickerUploadAdd",t)}onToolChanged(t){this.emit("toolEnter",t)}onErrorWebGLContextLost(){this.emit("errorWebGLContextLost")}onCropDimensionsChanged(t){if(this.prevDimensions.width!==t.width||this.prevDimensions.height!==t.height){this.emit("cropDimensionsChange",t);this.prevDimensions=t}}};var Za=wt([bo,{layout:"basic",defaultTool:null}]);var Qa={common:{error:"Fehler",warning:"Warnung",color:{colorPicker:{hex:"Hex",r:"R",g:"G",b:"B",sliderHue:"Farbe",sliderOpacity:"Farbe Transparenz"}}},mainCanvasActions:{buttonExport:"Bild Exportieren",buttonUndo:"R\xFCckg\xE4ngig machen",buttonRedo:"Wiederholen",buttonClose:"Schlie\xDFen"},infoModals:{exporting:{heading:"Exportieren...",body:"Einen Moment bitte..."},saving:{heading:"Speichere...",body:"Einen Moment bitte..."},loading:{heading:"Lade...",body:"Einen Moment bitte..."},resizing:{heading:"Bild wird bearbeitet...",body:"Einen Moment bitte..."},loadingFonts:{heading:"Lade Schriftarten...",body:"Einen Moment bitte..."},stickerLoading:{heading:"Lade Sticker...",body:"Einen Moment bitte..."}},errorModals:{imageLoading:{headingDelimiter:":",body:"Laden des Bildes fehlgeschlagen. Dies kann verschiedene Gr\xFCnde haben, beispielsweise kann die Datei defekt sein oder der Dateityp wird nicht unterst\xFCtzt",buttonYes:"Neu Laden",buttonNo:"Schlie\xDFen"},rendering:{headingDelimiter:":",body:"Beim Rendern des Bildes ist ein Fehler aufgetreten",buttonYes:"Neu Laden",buttonNo:"Schlie\xDFen"},fontLoading:{headingDelimiter:":",heading:"Laden von Schriftarten ist fehlgeschlagen",body:"Die folgenden Schriftarten konnten nicht geladen werden: ${error}",buttonNo:"Schlie\xDFen"},webcamUnavailable:{headingDelimiter:":",body:"Webcam-Bild kann nicht dargestellt werden. (Fehler: ${error})",buttonYes:"Schlie\xDFen"},stickerLoading:{headingDelimiter:":",body:"Laden des Stickers fehlgeschlagen.",buttonNo:"Schlie\xDFen"},unexpectedError:{headingDelimiter:":",body:"Ein unerwarteter Fehler ist aufgetreten, ${error}",buttonYes:"Neu Laden",buttonNo:"Schlie\xDFen"}},warningModals:{imageResized:{headingDelimiter:":",heading:"Bild verkleinert",body:"Ihr Bild \xFCbersteigt die maximale Gr\xF6sse von ${megapixels} megapixels und wurde auf ${width}x${height} Pixel verkleinert",buttonYes:"Weiter"},discardChanges:{headingDelimiter:":",body:"Sind Sie sicher, dass Sie die \xC4nderungen verwerfen wollen?",buttonYes:"\xC4nderungen verwerfen",buttonNo:"\xC4nderungen beibehalten"},unsavedChanges:{headingDelimiter:":",body:"Sind Sie sicher, dass Sie die \xC4nderungen verwerfen wollen?",buttonYes:"Beenden ohne zu speichern",buttonNo:"Schlie\xDFen"},unsupportedSerializationVersion:{headingDelimiter:":",body:"Ihre Daten wurden von einem veralteten Format geladen und k\xF6nnten anders aussehen",buttonYes:"\xC4nderungen anwenden",buttonNo:"Abbrechen"},unsupportedWebGLRenderer:{body:"Es wurde ein Problem im Browser festgestellt, welches zu langen Ladezeiten f\xFChren kann. Bitte probieren sie einen anderen Browser.",buttonYes:"Weiter"}},library:{title:"Bibliothek",controls:{buttonUpload:"Bild Hochladen",buttonWebcamOpen:"Webcam \xD6ffnen",buttonWebcamClose:"Webcam Schlie\xDFen",placeholderSearch:"Bibliothek durchsuchen",noResults:"Keine Ergebnisse"}},filter:{title:"Filter",controls:{buttonReset:"Zur\xFCcksetzen",sliderIntensity:"Filter Intensit\xE4t"},categories:{["imgly_filter_category_duotone"]:"DuoTone",["imgly_filter_category_bw"]:"B & W",["imgly_filter_category_vintage"]:"Vintage",["imgly_filter_category_smooth"]:"Smooth",["imgly_filter_category_cold"]:"Cold",["imgly_filter_category_warm"]:"Warm",["imgly_filter_category_legacy"]:"Legacy"},items:{["imgly_lut_celsius"]:"Inferno",["imgly_lut_chest"]:"Chestnut",["imgly_lut_fixie"]:"Fixie",["imgly_lut_fridge"]:"Fridge",["imgly_lut_front"]:"Sunny 70s",["imgly_lut_k2"]:"Flat Black",["imgly_lut_mellow"]:"Mellow",["imgly_lut_sin"]:"Hard Stuff",["imgly_lut_texas"]:"Oldtimer",["imgly_lut_ad1920"]:"1920 A.D.",["imgly_lut_ancient"]:"Ancient",["imgly_lut_bleached"]:"Kalmen",["imgly_lut_bleachedblue"]:"Joran",["imgly_lut_blues"]:"Polaroid",["imgly_lut_blueshadows"]:"Zephyr",["imgly_lut_breeze"]:"Levante",["imgly_lut_bw"]:"Greyed",["imgly_lut_classic"]:"Classic",["imgly_lut_colorful"]:"Colorful",["imgly_lut_cool"]:"Snappy",["imgly_lut_cottoncandy"]:"Candy",["imgly_lut_creamy"]:"Creamy",["imgly_lut_eighties"]:"Low Fire",["imgly_lut_elder"]:"Colla",["imgly_lut_evening"]:"Sunrise",["imgly_lut_fall"]:"Moss",["imgly_lut_food"]:"Food",["imgly_lut_glam"]:"Glam",["imgly_lut_gobblin"]:"Gobblin",["imgly_lut_highcarb"]:"High Carb",["imgly_lut_highcontrast"]:"Hicon",["imgly_lut_k1"]:"K1",["imgly_lut_k6"]:"K6",["imgly_lut_kdynamic"]:"Pebble",["imgly_lut_keen"]:"Keen",["imgly_lut_lenin"]:"Lemon",["imgly_lut_litho"]:"Litho",["imgly_lut_lomo"]:"Lomo",["imgly_lut_lomo100"]:"Lomo 100",["imgly_lut_lucid"]:"Lucid",["imgly_lut_neat"]:"Neat",["imgly_lut_nogreen"]:"Pumpkin",["imgly_lut_orchid"]:"Solanus",["imgly_lut_pale"]:"Pale",["imgly_lut_pitched"]:"Pitched",["imgly_lut_plate"]:"Weathered",["imgly_lut_pola669"]:"Green Gap",["imgly_lut_polasx"]:"Pola SX",["imgly_lut_pro400"]:"Pro 400",["imgly_lut_quozi"]:"Quozi",["imgly_lut_sepiahigh"]:"Sepia",["imgly_lut_settled"]:"Settled",["imgly_lut_seventies"]:"Seventies",["imgly_lut_soft"]:"Soft",["imgly_lut_steel"]:"Steel",["imgly_lut_summer"]:"Summer",["imgly_lut_sunset"]:"Golden",["imgly_lut_tender"]:"Tender",["imgly_lut_twilight"]:"Twilight",["imgly_lut_winter"]:"Softy",["imgly_lut_x400"]:"Dusty",["imgly_duotone_desert"]:"Desert",["imgly_duotone_peach"]:"Peach",["imgly_duotone_clash"]:"Clash",["imgly_duotone_plum"]:"Plum",["imgly_duotone_breezy"]:"Breezy",["imgly_duotone_deepblue"]:"Deep Blue",["imgly_duotone_frog"]:"Frog",["imgly_duotone_sunset"]:"Sunset"}},adjustment:{title:"Korrekturen",controls:{buttonReset:"Zur\xFCcksetzen"},categories:{basics:"Grundlagen",refinements:"Feinheiten"},items:{brightness:"Helligkeit",saturation:"S\xE4ttigung",contrast:"Kontrast",gamma:"Gamma",sharpness:"Sch\xE4rfe",clarity:"Klarheit",exposure:"Belichtung",shadows:"Schatten",highlights:"Lichter",whites:"Wei\xDF",blacks:"Schwarz",temperature:"Temperatur"}},focus:{title:"Weichzeichnen",controls:{buttonReset:"Zur\xFCcksetzen",sliderIntensity:"Focus Intensit\xE4t"},items:{radial:"Kreisf\xF6rmig",mirrored:"Gespiegelt",linear:"Linear",gaussian:"Gau\xDFsch"},history:{focusPosition:"Focus Position",focusSize:"Focus Gr\xF6\xDFe"}},overlay:{title:"Overlays",controls:{buttonReset:"Zur\xFCcksetzen",sliderOpacity:"Overlay Transparenz",carouselBlendMode:"Overlay Mischmodus",blendModeNormal:"Normal",blendModeOverlay:"\xDCberblenden",blendModeHardLight:"Hartes Licht",blendModeSoftLight:"Weiches Licht",blendModeMultiply:"Multiplizieren",blendModeDarken:"Abdunkeln",blendModeLighten:"Aufhellen",blendModeScreen:"Screen",blendModeColorBurn:"Color Burn",tabOpacity:"Transparenz",tabBlendMode:"Mischmodus"},items:{["imgly_overlay_bokeh"]:"Bokeh",["imgly_overlay_chop"]:"Chop",["imgly_overlay_clouds"]:"Clouds",["imgly_overlay_golden"]:"Golden",["imgly_overlay_grain"]:"Grain",["imgly_overlay_hearts"]:"Hearts",["imgly_overlay_lightleak1"]:"Light Leak 1",["imgly_overlay_lightleak2"]:"Light Leak 2",["imgly_overlay_metal"]:"Metal",["imgly_overlay_mosaic"]:"Mosaic",["imgly_overlay_painting"]:"Painting",["imgly_overlay_paper"]:"Paper",["imgly_overlay_rain"]:"Rain",["imgly_overlay_vintage"]:"Vintage",["imgly_overlay_wall1"]:"Wall",["imgly_overlay_wall2"]:"Wall 2",["imgly_overlay_wood"]:"Wood"}},sticker:{title:"Sticker",controls:{buttonUpload:"Sticker Hochladen",sliderOpacity:"Sticker Transparenz",selectColor:"Stickerfarbe",tabColor:"Farbe",tabOpacity:"Transparenz"},categories:{imgly_sticker_emoticons:"Emoticons",imgly_sticker_shapes:"Shapes",imgly_sticker_custom:"Custom"},items:{imgly_sticker_emoticons_alien:"Alien",imgly_sticker_emoticons_angel:"Angel",imgly_sticker_emoticons_angry:"Angry",imgly_sticker_emoticons_anxious:"Anxious",imgly_sticker_emoticons_asleep:"Asleep",imgly_sticker_emoticons_attention:"Attention",imgly_sticker_emoticons_baby_chicken:"Baby Chicken",imgly_sticker_emoticons_batman:"Batman",imgly_sticker_emoticons_beer:"Beer",imgly_sticker_emoticons_black:"Black",imgly_sticker_emoticons_blue:"Blue",imgly_sticker_emoticons_blush:"Blush",imgly_sticker_emoticons_boxer:"Boxer",imgly_sticker_emoticons_business:"Business",imgly_sticker_emoticons_chicken:"Chicken",imgly_sticker_emoticons_cool:"Cool",imgly_sticker_emoticons_cry:"Cry",imgly_sticker_emoticons_deceased:"Deceased",imgly_sticker_emoticons_devil:"Devil",imgly_sticker_emoticons_duckface:"Duckface",imgly_sticker_emoticons_furious:"Furious",imgly_sticker_emoticons_grin:"Grin",imgly_sticker_emoticons_guitar:"Guitar",imgly_sticker_emoticons_harry_potter:"Harry Potter",imgly_sticker_emoticons_hippie:"Hippie",imgly_sticker_emoticons_hitman:"Hitman",imgly_sticker_emoticons_humourous:"Humourous",imgly_sticker_emoticons_idea:"Idea",imgly_sticker_emoticons_impatient:"Impatient",imgly_sticker_emoticons_kiss:"Kiss",imgly_sticker_emoticons_kisses:"Kisses",imgly_sticker_emoticons_laugh:"Laugh",imgly_sticker_emoticons_loud_cry:"Loud Cry",imgly_sticker_emoticons_loving:"Loving",imgly_sticker_emoticons_masked:"Masked",imgly_sticker_emoticons_music:"Music",imgly_sticker_emoticons_nerd:"Nerd",imgly_sticker_emoticons_ninja:"Ninja",imgly_sticker_emoticons_not_speaking_to_you:"Not speaking to you",imgly_sticker_emoticons_pig:"Pig",imgly_sticker_emoticons_pumpkin:"Pumpkin",imgly_sticker_emoticons_question:"Question",imgly_sticker_emoticons_rabbit:"Rabbit",imgly_sticker_emoticons_sad:"Sad",imgly_sticker_emoticons_sick:"Sick",imgly_sticker_emoticons_skateboard:"Skateboard",imgly_sticker_emoticons_skull:"Skull",imgly_sticker_emoticons_sleepy:"Sleepy",imgly_sticker_emoticons_smile:"Smile",imgly_sticker_emoticons_smoking:"Smoking",imgly_sticker_emoticons_sobbing:"Sobbing",imgly_sticker_emoticons_star:"Star",imgly_sticker_emoticons_steaming_furious:"Steaming Furious",imgly_sticker_emoticons_sunbathing:"Sunbathing",imgly_sticker_emoticons_tired:"Tired",imgly_sticker_emoticons_tongue_out_wink:"Tongue out wink",imgly_sticker_emoticons_wave:"Wave",imgly_sticker_emoticons_wide_grin:"Wide Grin",imgly_sticker_emoticons_wink:"Wink",imgly_sticker_emoticons_wrestler:"Wrestler",imgly_sticker_shapes_arrow_02:"Arrow 1",imgly_sticker_shapes_arrow_03:"Arrow 2",imgly_sticker_shapes_badge_01:"Badge 1",imgly_sticker_shapes_badge_11:"Badge 5",imgly_sticker_shapes_badge_12:"Badge 6",imgly_sticker_shapes_badge_13:"Badge 7",imgly_sticker_shapes_badge_15:"Badge 8",imgly_sticker_shapes_badge_18:"Badge 9",imgly_sticker_shapes_badge_19:"Badge 10",imgly_sticker_shapes_badge_20:"Badge 11",imgly_sticker_shapes_badge_28:"Badge 12",imgly_sticker_shapes_badge_32:"Badge 13",imgly_sticker_shapes_badge_35:"Badge 14",imgly_sticker_shapes_badge_36:"Badge 15",imgly_sticker_shapes_badge_04:"Badge 2",imgly_sticker_shapes_badge_06:"Badge 3",imgly_sticker_shapes_badge_08:"Badge 4",imgly_sticker_shapes_spray_01:"Spray 1",imgly_sticker_shapes_spray_03:"Spray 2",imgly_sticker_shapes_spray_04:"Spray 3"},canvasActions:{buttonDelete:"L\xF6schen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren",buttonFlipHorizontal:"Horizontal spiegeln",buttonFlipVertical:"Vertikal spiegeln"},history:{add:"Sticker",resize:"Sticker resize",position:"Sticker position",color:"Sticker color",delete:"Sticker delete",order:"Sticker order",opacity:"Sticker opacity",flip:"Sticker flip"}},text:{title:"Text",controls:{buttonNew:"Neuer Text",dropdownFontFamily:"Schriftart",textFontSize:"Schriftgr\xF6\xDFe",selectAlignment:"Ausrichtung",selectFontColor:"Schriftfarbe",selectBackgroundColor:"Hintergrundfarbe",sliderLineSpacing:"Zeilenabstand",tabColor:"Farbe",tabBgColor:"Hintergrund",tabAlignment:"Ausrichtung",tabLineHeight:"Zeilenh\xF6he",tabFontSize:"Schriftgr\xF6\xDFe"},canvasControls:{placeholderText:"Etwas aufschreiben",buttonSave:"Fertig",buttonClose:"Abbrechen",inputText:"Texteingabe"},canvasActions:{buttonEdit:"Bearbeiten",buttonDelete:"L\xF6schen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren"},history:{add:"Text",edit:"Text edit",resize:"Text resize",position:"Text position",alignment:"Text alignment",textColor:"Text color",backgroundColor:"Text background color",fontFamily:"Font family",fontStyle:"Font style",lineSpacing:"Line spacing",width:"Text width",delete:"Text delete",order:"Text order"}},textdesign:{title:"Text Design",controls:{buttonNew:"Neues Text Design",buttonShuffle:"Shuffle Layout",selectColor:"Textfarbe",tabColor:"Farbe",tabShuffle:"Shuffle"},canvasControls:{placeholderText:"Etwas aufschreiben mit Style",buttonSave:"Done",buttonClose:"Schlie\xDFen",inputText:"Texteingabe"},canvasActions:{buttonEdit:"Bearbeiten",buttonInvert:"Invertieren",buttonDelete:"L\xF6schen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren"},history:{add:"Text design",edit:"Text design edit",resize:"Text design resize",position:"Text design position",color:"Text design color",shuffle:"Text design shuffle",invert:"Text design invert",padding:"Text design padding",order:"Text design order",delete:"Text design delete"}},frame:{title:"Rahmen",controls:{buttonReset:"Zur\xFCcksetzen",sliderOpacity:"Rahmen Transparenz",sliderSize:"Rahmen Dicke",selectColor:"Rahmen Farbe",tabColor:"Farbe",tabOpacity:"Transparenz",tabSize:"Dicke"},items:{imgly_frame_dia:"Dia",imgly_frame_art_decor:"Art Decor",imgly_frame_black_passepartout:"Black",imgly_frame_lowpoly_shadow:"Low Poly",imgly_frame_wood_passepartout:"Wood"}},brush:{title:"Malen",controls:{buttonReset:"Zur\xFCcksetzen",sliderSize:"Dicke",sliderHardness:"H\xE4rte",selectColor:"Farbe",tabSize:"Dicke",tabHardness:"H\xE4rte",tabColor:"Farbe"},history:{brushStroke:"Brush Stroke"}},transform:{title:"Zuschneiden",controls:{buttonReset:"Zur\xFCcksetzen",checkboxKeepResolution:"Fixiere Aufl\xF6sung",inputCropSize:"Bildgr\xF6\xDFe",inputHeight:"h",inputWidth:"b",tabFlipAndRotate:"Spiegeln & Drehen",tabResolution:"Aufl\xF6sung",tabCropSize:"Bildgr\xF6\xDFe"},categories:{imgly_transforms_common:"Standard",imgly_transforms_facebook:"Facebook",imgly_transforms_twitter:"Twitter",imgly_transforms_instagram:"Instagram"},items:{imgly_transform_common_custom:"Frei",imgly_transform_common_square:"Quadratisch",imgly_transform_common_4:"4:3",imgly_transform_common_16:"16:9",imgly_transform_common_3:"3:4",imgly_transform_common_9:"9:16",imgly_transform_facebook_profile:"Profile",imgly_transform_facebook_title:"Titel",imgly_transform_facebook_post:"Post",imgly_transform_instagram_story:"Story",imgly_transform_instagram_landscape:"Landscape",imgly_transform_instagram_portrait:"Portrait",imgly_transform_instagram_square:"Square",imgly_transform_twitter_profile:"Profile",imgly_transform_twitter_title:"Title",imgly_transform_twitter_post:"Post"},transformActions:{buttonFlipHorizontal:"Horizontal spiegeln",buttonFlipVertical:"Vertikal spiegeln",buttonRotateClockwise:"Drehe im Uhrzeigersinn",buttonRotateAntiClockwise:"Drehe gegen Uhrzeigersinn"}},["customTool"]:{title:"Benutzerdefiniert"}};var Pi={common:{error:"Error",warning:"Warning",color:{colorPicker:{hex:"Hex",r:"R",g:"G",b:"B",sliderHue:"Color",sliderOpacity:"Color Opacity"}}},mainCanvasActions:{buttonExport:"Export Image",buttonUndo:"Undo",buttonRedo:"Redo",buttonClose:"Close"},infoModals:{exporting:{heading:"Exporting...",body:"Just a few seconds..."},saving:{heading:"Saving...",body:"Just a few seconds..."},loading:{heading:"Loading...",body:"Just a few seconds..."},resizing:{heading:"Resizing...",body:"Just a few seconds..."},loadingFonts:{heading:"Loading Fonts...",body:"Just a few seconds..."},stickerLoading:{heading:"Loading Sticker...",body:"Just a few seconds..."}},errorModals:{imageLoading:{headingDelimiter:":",body:"Failed to load image. This can have multiple reasons, e.g. the file is corrupted or the file type is not supported",buttonYes:"Retry",buttonNo:"Close"},rendering:{headingDelimiter:":",body:"An error has occurred while rendering the image",buttonYes:"Retry",buttonNo:"Close"},fontLoading:{headingDelimiter:":",heading:"Failed to load font",body:"The following fonts could not be loaded: ${error}",buttonNo:"Close"},webcamUnavailable:{headingDelimiter:":",body:"Unable to display webcam image (Error: ${error})",buttonYes:"Close"},stickerLoading:{headingDelimiter:":",body:"Unable to load the sticker",buttonNo:"Close"},unexpectedError:{headingDelimiter:":",body:"An unexpected error has occured ${error}",buttonYes:"Retry",buttonNo:"Close"}},warningModals:{imageResized:{headingDelimiter:":",heading:"Image resized",body:"Your image exceeds the maximum size of ${megapixels} megapixels and has been resized to ${width}x${height} pixels",buttonYes:"Continue"},unsupportedSerializationVersion:{headingDelimiter:":",body:"Your data was restored from a legacy data format and might look different",buttonYes:"Apply changes",buttonNo:"Cancel"},discardChanges:{headingDelimiter:":",body:"You have unsaved changes. Are you sure you want to discard the changes?",buttonYes:"Discard changes",buttonNo:"Keep Changes"},unsavedChanges:{headingDelimiter:":",body:"You have unsaved changes. Are you sure you want to exit?",buttonYes:"Exit without saving",buttonNo:"Cancel"},unsupportedWebGLRenderer:{body:"A problem has been detected in the browser that could cause long loading times. Please try a different browser.",buttonYes:"Continue"}},library:{title:"Library",controls:{buttonUpload:"Upload Image",buttonWebcamOpen:"Open Webcam",buttonWebcamClose:"Close Webcam",placeholderSearch:"Search Library",noResults:"No Results"}},filter:{title:"Filters",controls:{buttonReset:"Remove Filter",sliderIntensity:"Filter Intensity"},categories:{["imgly_filter_category_duotone"]:"DuoTone",["imgly_filter_category_bw"]:"B & W",["imgly_filter_category_vintage"]:"Vintage",["imgly_filter_category_smooth"]:"Smooth",["imgly_filter_category_cold"]:"Cold",["imgly_filter_category_warm"]:"Warm",["imgly_filter_category_legacy"]:"Legacy"},items:{["imgly_lut_celsius"]:"Inferno",["imgly_lut_chest"]:"Chestnut",["imgly_lut_fixie"]:"Fixie",["imgly_lut_fridge"]:"Fridge",["imgly_lut_front"]:"Sunny 70s",["imgly_lut_k2"]:"Flat Black",["imgly_lut_mellow"]:"Mellow",["imgly_lut_sin"]:"Hard Stuff",["imgly_lut_texas"]:"Oldtimer",["imgly_lut_ad1920"]:"1920 A.D.",["imgly_lut_ancient"]:"Ancient",["imgly_lut_bleached"]:"Kalmen",["imgly_lut_bleachedblue"]:"Joran",["imgly_lut_blues"]:"Polaroid",["imgly_lut_blueshadows"]:"Zephyr",["imgly_lut_breeze"]:"Levante",["imgly_lut_bw"]:"Greyed",["imgly_lut_classic"]:"Classic",["imgly_lut_colorful"]:"Colorful",["imgly_lut_cool"]:"Snappy",["imgly_lut_cottoncandy"]:"Candy",["imgly_lut_creamy"]:"Creamy",["imgly_lut_eighties"]:"Low Fire",["imgly_lut_elder"]:"Colla",["imgly_lut_evening"]:"Sunrise",["imgly_lut_fall"]:"Moss",["imgly_lut_food"]:"Food",["imgly_lut_glam"]:"Glam",["imgly_lut_gobblin"]:"Gobblin",["imgly_lut_highcarb"]:"High Carb",["imgly_lut_highcontrast"]:"Hicon",["imgly_lut_k1"]:"K1",["imgly_lut_k6"]:"K6",["imgly_lut_kdynamic"]:"Pebble",["imgly_lut_keen"]:"Keen",["imgly_lut_lenin"]:"Lemon",["imgly_lut_litho"]:"Litho",["imgly_lut_lomo"]:"Lomo",["imgly_lut_lomo100"]:"Lomo 100",["imgly_lut_lucid"]:"Lucid",["imgly_lut_neat"]:"Neat",["imgly_lut_nogreen"]:"Pumpkin",["imgly_lut_orchid"]:"Solanus",["imgly_lut_pale"]:"Pale",["imgly_lut_pitched"]:"Pitched",["imgly_lut_plate"]:"Weathered",["imgly_lut_pola669"]:"Green Gap",["imgly_lut_polasx"]:"Pola SX",["imgly_lut_pro400"]:"Pro 400",["imgly_lut_quozi"]:"Quozi",["imgly_lut_sepiahigh"]:"Sepia",["imgly_lut_settled"]:"Settled",["imgly_lut_seventies"]:"Seventies",["imgly_lut_soft"]:"Soft",["imgly_lut_steel"]:"Steel",["imgly_lut_summer"]:"Summer",["imgly_lut_sunset"]:"Golden",["imgly_lut_tender"]:"Tender",["imgly_lut_twilight"]:"Twilight",["imgly_lut_winter"]:"Softy",["imgly_lut_x400"]:"Dusty",["imgly_duotone_desert"]:"Desert",["imgly_duotone_peach"]:"Peach",["imgly_duotone_clash"]:"Clash",["imgly_duotone_plum"]:"Plum",["imgly_duotone_breezy"]:"Breezy",["imgly_duotone_deepblue"]:"Deep Blue",["imgly_duotone_frog"]:"Frog",["imgly_duotone_sunset"]:"Sunset"}},adjustment:{title:"Adjust",controls:{buttonReset:"Reset Adjustment"},categories:{basics:"Basic",refinements:"Refinements"},items:{brightness:"Brightness",saturation:"Saturation",contrast:"Contrast",gamma:"Gamma",sharpness:"Sharpness",clarity:"Clarity",exposure:"Exposure",shadows:"Shadows",highlights:"Highlights",whites:"Whites",blacks:"Blacks",temperature:"Temperature"}},focus:{title:"Focus",controls:{buttonReset:"Remove Focus",sliderIntensity:"Focus Intensity"},items:{radial:"Radial",mirrored:"Mirrored",linear:"Linear",gaussian:"Gaussian"},history:{focusPosition:"Focus Position",focusSize:"Focus Size"}},overlay:{title:"Overlays",controls:{buttonReset:"Remove Overlay",sliderOpacity:"Overlay Opacity",carouselBlendMode:"Overlay Blend mode",blendModeNormal:"Normal",blendModeOverlay:"Overlay",blendModeHardLight:"Hard Light",blendModeSoftLight:"Soft Light",blendModeMultiply:"Multiply",blendModeDarken:"Darken",blendModeLighten:"Lighten",blendModeScreen:"Screen",blendModeColorBurn:"Color Burn",tabOpacity:"Opacity",tabBlendMode:"Blend Mode"},items:{["imgly_overlay_bokeh"]:"Bokeh",["imgly_overlay_chop"]:"Chop",["imgly_overlay_clouds"]:"Clouds",["imgly_overlay_golden"]:"Golden",["imgly_overlay_grain"]:"Grain",["imgly_overlay_hearts"]:"Hearts",["imgly_overlay_lightleak1"]:"Light Leak 1",["imgly_overlay_lightleak2"]:"Light Leak 2",["imgly_overlay_metal"]:"Metal",["imgly_overlay_mosaic"]:"Mosaic",["imgly_overlay_painting"]:"Painting",["imgly_overlay_paper"]:"Paper",["imgly_overlay_rain"]:"Rain",["imgly_overlay_vintage"]:"Vintage",["imgly_overlay_wall1"]:"Wall",["imgly_overlay_wall2"]:"Wall 2",["imgly_overlay_wood"]:"Wood"}},sticker:{title:"Stickers",controls:{buttonUpload:"Upload Sticker",sliderOpacity:"Sticker Opacity",selectColor:"Sticker Color",tabColor:"Color",tabOpacity:"Opacity"},categories:{imgly_sticker_emoticons:"Emoticons",imgly_sticker_shapes:"Shapes",imgly_sticker_custom:"Custom"},items:{imgly_sticker_emoticons_alien:"Alien",imgly_sticker_emoticons_angel:"Angel",imgly_sticker_emoticons_angry:"Angry",imgly_sticker_emoticons_anxious:"Anxious",imgly_sticker_emoticons_asleep:"Asleep",imgly_sticker_emoticons_attention:"Attention",imgly_sticker_emoticons_baby_chicken:"Baby Chicken",imgly_sticker_emoticons_batman:"Batman",imgly_sticker_emoticons_beer:"Beer",imgly_sticker_emoticons_black:"Black",imgly_sticker_emoticons_blue:"Blue",imgly_sticker_emoticons_blush:"Blush",imgly_sticker_emoticons_boxer:"Boxer",imgly_sticker_emoticons_business:"Business",imgly_sticker_emoticons_chicken:"Chicken",imgly_sticker_emoticons_cool:"Cool",imgly_sticker_emoticons_cry:"Cry",imgly_sticker_emoticons_deceased:"Deceased",imgly_sticker_emoticons_devil:"Devil",imgly_sticker_emoticons_duckface:"Duckface",imgly_sticker_emoticons_furious:"Furious",imgly_sticker_emoticons_grin:"Grin",imgly_sticker_emoticons_guitar:"Guitar",imgly_sticker_emoticons_harry_potter:"Harry Potter",imgly_sticker_emoticons_hippie:"Hippie",imgly_sticker_emoticons_hitman:"Hitman",imgly_sticker_emoticons_humourous:"Humourous",imgly_sticker_emoticons_idea:"Idea",imgly_sticker_emoticons_impatient:"Impatient",imgly_sticker_emoticons_kiss:"Kiss",imgly_sticker_emoticons_kisses:"Kisses",imgly_sticker_emoticons_laugh:"Laugh",imgly_sticker_emoticons_loud_cry:"Loud Cry",imgly_sticker_emoticons_loving:"Loving",imgly_sticker_emoticons_masked:"Masked",imgly_sticker_emoticons_music:"Music",imgly_sticker_emoticons_nerd:"Nerd",imgly_sticker_emoticons_ninja:"Ninja",imgly_sticker_emoticons_not_speaking_to_you:"Not speaking to you",imgly_sticker_emoticons_pig:"Pig",imgly_sticker_emoticons_pumpkin:"Pumpkin",imgly_sticker_emoticons_question:"Question",imgly_sticker_emoticons_rabbit:"Rabbit",imgly_sticker_emoticons_sad:"Sad",imgly_sticker_emoticons_sick:"Sick",imgly_sticker_emoticons_skateboard:"Skateboard",imgly_sticker_emoticons_skull:"Skull",imgly_sticker_emoticons_sleepy:"Sleepy",imgly_sticker_emoticons_smile:"Smile",imgly_sticker_emoticons_smoking:"Smoking",imgly_sticker_emoticons_sobbing:"Sobbing",imgly_sticker_emoticons_star:"Star",imgly_sticker_emoticons_steaming_furious:"Steaming Furious",imgly_sticker_emoticons_sunbathing:"Sunbathing",imgly_sticker_emoticons_tired:"Tired",imgly_sticker_emoticons_tongue_out_wink:"Tongue out wink",imgly_sticker_emoticons_wave:"Wave",imgly_sticker_emoticons_wide_grin:"Wide Grin",imgly_sticker_emoticons_wink:"Wink",imgly_sticker_emoticons_wrestler:"Wrestler",imgly_sticker_shapes_arrow_02:"Arrow 1",imgly_sticker_shapes_arrow_03:"Arrow 2",imgly_sticker_shapes_badge_01:"Badge 1",imgly_sticker_shapes_badge_11:"Badge 5",imgly_sticker_shapes_badge_12:"Badge 6",imgly_sticker_shapes_badge_13:"Badge 7",imgly_sticker_shapes_badge_15:"Badge 8",imgly_sticker_shapes_badge_18:"Badge 9",imgly_sticker_shapes_badge_19:"Badge 10",imgly_sticker_shapes_badge_20:"Badge 11",imgly_sticker_shapes_badge_28:"Badge 12",imgly_sticker_shapes_badge_32:"Badge 13",imgly_sticker_shapes_badge_35:"Badge 14",imgly_sticker_shapes_badge_36:"Badge 15",imgly_sticker_shapes_badge_04:"Badge 2",imgly_sticker_shapes_badge_06:"Badge 3",imgly_sticker_shapes_badge_08:"Badge 4",imgly_sticker_shapes_spray_01:"Spray 1",imgly_sticker_shapes_spray_03:"Spray 2",imgly_sticker_shapes_spray_04:"Spray 3"},canvasActions:{buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate",buttonFlipHorizontal:"Flip",buttonFlipVertical:"Flip"},history:{add:"Sticker",resize:"Sticker resize",position:"Sticker position",color:"Sticker color",delete:"Sticker delete",order:"Sticker order",opacity:"Sticker opacity",flip:"Sticker flip"}},text:{title:"Text",controls:{buttonNew:"New Text",dropdownFontFamily:"Font Family",textFontSize:"Font Size",selectAlignment:"Alignment",selectFontColor:"Font Color",selectBackgroundColor:"Background Color",sliderLineSpacing:"Line Spacing",tabColor:"Color",tabBgColor:"Bg Color",tabAlignment:"Alignment",tabLineHeight:"Line Height",tabFontSize:"Font Size"},canvasControls:{placeholderText:"Write Something",buttonSave:"Done",buttonClose:"Cancel",inputText:"Text Input"},canvasActions:{buttonEdit:"Edit",buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate"},history:{add:"Text",edit:"Text edit",resize:"Text resize",position:"Text position",alignment:"Text alignment",textColor:"Text color",backgroundColor:"Text background color",fontFamily:"Font family",fontStyle:"Font style",lineSpacing:"Line spacing",width:"Text width",delete:"Text delete",order:"Text order"}},textdesign:{title:"Text Design",controls:{buttonNew:"New Text Design",buttonShuffle:"Shuffle Layout",selectColor:"Text Color",tabColor:"Color",tabShuffle:"Shuffle"},canvasControls:{placeholderText:"Write Something With Style",buttonSave:"Done",buttonClose:"Schlie\xDFen",inputText:"Text Input"},canvasActions:{buttonEdit:"Edit",buttonInvert:"Invert",buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate"},history:{add:"Text design",edit:"Text design edit",resize:"Text design resize",position:"Text design position",color:"Text design color",shuffle:"Text design shuffle",invert:"Text design invert",padding:"Text design padding",order:"Text design order",delete:"Text design delete"}},frame:{title:"Frames",controls:{buttonReset:"Remove Frame",sliderOpacity:"Frame Opacity",sliderSize:"Frame Size",selectColor:"Frame Color",tabColor:"Color",tabOpacity:"Opacity",tabSize:"Size"},items:{imgly_frame_dia:"Dia",imgly_frame_art_decor:"Art Decor",imgly_frame_black_passepartout:"Black",imgly_frame_lowpoly_shadow:"Low Poly",imgly_frame_wood_passepartout:"Wood"}},brush:{title:"Brush",controls:{buttonReset:"Remove Brush",sliderSize:"Brush Size",sliderHardness:"Brush Hardness",selectColor:"Brush Color",tabSize:"Size",tabHardness:"Hardness",tabColor:"Color"},history:{brushStroke:"Brush Stroke"}},transform:{title:"Transform",controls:{buttonReset:"Reset to default",checkboxKeepResolution:"Keep Resolution",inputCropSize:"Crop Size",inputHeight:"h",inputWidth:"w",tabFlipAndRotate:"Flip & Rotate",tabResolution:"Resolution",tabCropSize:"Crop Size"},categories:{imgly_transforms_common:"Common",imgly_transforms_facebook:"Facebook",imgly_transforms_twitter:"Twitter",imgly_transforms_instagram:"Instagram"},items:{imgly_transform_common_custom:"Custom",imgly_transform_common_square:"Square",imgly_transform_common_4:"4:3",imgly_transform_common_16:"16:9",imgly_transform_common_3:"3:4",imgly_transform_common_9:"9:16",imgly_transform_facebook_profile:"Profile",imgly_transform_facebook_title:"Title",imgly_transform_facebook_post:"Post",imgly_transform_instagram_story:"Story",imgly_transform_instagram_landscape:"Landscape",imgly_transform_instagram_portrait:"Portrait",imgly_transform_instagram_square:"Square",imgly_transform_twitter_profile:"Profile",imgly_transform_twitter_title:"Title",imgly_transform_twitter_post:"Post"},transformActions:{buttonFlipHorizontal:"Flip Horizontal",buttonFlipVertical:"Flip Vertical",buttonRotateClockwise:"Rotate Clockwise",buttonRotateAntiClockwise:"Rotate Counterclockwise"}},["customTool"]:{title:"Custom"}};var jp=i=>{if(i==="de"){return Qa}return Pi};var Xp=(i,t)=>{if(t&&t[i]){return wt([jp(i),t[i]])}return jp(i)||Pi};var cy=({primary:i="#365afc",background:t="#0B0B0B",foreground:e="#FFFFFF"}={primary:"#365afc",background:"#0B0B0B",foreground:"#FFFFFF"})=>{const o="rgba(255, 255, 255, 0.90)";const r="rgba(255, 255, 255, 0.60)";const n="rgba(255, 255, 255, 0.38)";const a="#424242";const l="#333333";const c="#242424";const d="#171717";const u="#0B0B0B";const m="rgba(255, 255, 255, 0.08)";const f="rgba(0, 0, 0, 0.3)";const b="rgba(89, 121, 252, 0.20)";const v="0.3";return{shape:{radiusSmall:2,radiusMedium:4,radiusLarge:4},typography:{fontFamily:"Fira Sans",format:"woff",fontURI:"./fonts/imgly_font_fira_sans_regular.woff",provider:"file"},background:t,foreground:e,primary:i,warning:"#ffba5c",error:"#c2393a",success:"#39c26c",focusOutlineColor:"rgba(255, 255, 255, 0.12)",scrollbar:{handleColor:"rgba(255, 255, 255, 0.2)"},button:{outlinedBorderColor:l,activeForeground:i,containedPrimaryBackground:i,containedPrimaryForeground:o,outlinedPrimaryBackground:c,outlinedPrimaryForeground:o,outlinedSecondaryBackground:"transparent",outlinedSecondaryForeground:r,textPrimaryForeground:i,textSecondaryForeground:r,outlinedInactiveOverlayColor:f,textInactiveOpacity:"0.5",hoverOverlayColor:m},checkbox:{background:l,foreground:e,activeForeground:e,activeBackground:i,inactiveOpacity:v,hoverOpacity:"0.8"},modal:{background:c,bodyForeground:o,headerForeground:r,backdrop:"rgba(0, 0, 0, 0.6)"},card:{background:l,foreground:o,activeBorderColor:i,activeOverlayColor:b,labelBackground:"linear-gradient(transparent, rgba(0, 0, 0, 0.6))",labelForeground:o,inactiveOverlayColor:f,hoverOverlayColor:m},tabTitle:{foreground:r,background:"transparent",activeBackground:"transparent",activeBorderColor:i,activeForeground:o},dropdown:{background:"transparent",foreground:o,hoverBorderColor:r,borderColor:l,caretColor:n,listBackground:l,listBorderColor:l,listItemHoverBackground:a,listForeground:r,listShadow:`0 12px 17px 2px rgba(0,0,0,0.14),
        0 5px 22px 4px rgba(0,0,0,0.12),
        0 7px 8px -4px rgba(0,0,0,0.20)`,inactiveOpacity:v},textInput:{foreground:o,hoverBorderColor:"rgba(255, 255, 255, 0.40)",background:"transparent",borderColor:l,inactiveOpacity:v},slider:{trackColor:"rgba(255, 255, 255, 0.4)",activeTrackColor:i,thumbBackground:d,thumbBorderColor:i,inactiveOpacity:v,hoverOpacity:"0.7"},selectColor:{activeBorderColor:i,inactiveOpacity:v},toolbar:{foreground:o,background:c,activeBackground:"transparent",activeForeground:i,borderColor:"transparent"},tooltip:{background:a,foreground:o},toolControlBar:{background:"rgba(23, 23, 23, 0.9)",borderColor:"transparent",shadow:"none",separatorColor:l,titleForeground:r,inputLabelForeground:r,inputLabelInactiveOpacity:v},mainCanvasActionBar:{background:"linear-gradient(0deg, transparent 0%,  rgba(0, 0, 0, 0.6) 98%)",foreground:o,borderColor:"none"},canvasActionBar:{background:a,foreground:o,separatorColor:n},canvas:{background:u,controlsOutline:"rgba(255, 255, 255, 0.5)",controlsColor:"#ffffff",cropBackdrop:"rgba(0, 0, 0, 0.5)"},colorPicker:{listBackground:l,listShadow:`0 12px 17px 2px rgba(0,0,0,0.14),
        0 5px 22px 4px rgba(0,0,0,0.12),
        0 7px 8px -4px rgba(0,0,0,0.20)`,controlsColor:"#ffffff",inputBorderColor:a},colorItem:{borderRadius:"2px",margin:"1px"},webcam:{backdrop:"rgba(0, 0, 0, 0.3)",floatButton:e,background:u},snapping:{positionGuideColor:"#f0f",rotationGuideColor:"#0ff"},transform:{crops:{main:"#424242",highlight:"#565656",shadow:"#333333"}}}};var $n=cy;var dy=({primary:i="#1e47fb",background:t="#FBFBFB",foreground:e="#000000"}={primary:"#1e47fb",background:"#FBFBFB",foreground:"#000000"})=>{const o="rgba(0, 0, 0, 0.90)";const r="rgba(0, 0, 0, 0.60)";const n="rgba(0, 0, 0, 0.38)";const a="#CCCCCC";const l="#D4D4D4";const c="#E6E6E6";const d="#EEEEEE";const u="#FBFBFB";const m="rgba(125, 125, 125, 0.12)";const f="rgba(30, 71, 251, 0.2)";const b="rgba(0, 0, 0, 0.1)";const v="0.3";return{shape:{radiusSmall:2,radiusMedium:4,radiusLarge:4},typography:{fontFamily:"Fira Sans",format:"woff",fontURI:"./fonts/imgly_font_fira_sans_regular.woff",provider:"file"},background:t,foreground:e,primary:i,warning:"#ffb045",error:"#c01a1b",success:"#17c658",focusOutlineColor:"rgba(125, 125, 125, 0.12)",scrollbar:{handleColor:"rgba(0, 0, 0, 0.2)"},button:{outlinedBorderColor:l,activeForeground:i,containedPrimaryBackground:i,containedPrimaryForeground:"rgba(255, 255, 255, 0.9)",outlinedPrimaryBackground:c,outlinedPrimaryForeground:o,outlinedSecondaryBackground:"transparent",outlinedSecondaryForeground:r,textPrimaryForeground:i,textSecondaryForeground:r,outlinedInactiveOverlayColor:b,textInactiveOpacity:"0.5",hoverOverlayColor:m},checkbox:{background:l,foreground:e,activeForeground:e,activeBackground:i,inactiveOpacity:v,hoverOpacity:"0.8"},modal:{background:c,bodyForeground:o,headerForeground:r,backdrop:"rgba(0, 0, 0, 0.6)"},card:{background:l,foreground:o,activeBorderColor:i,activeOverlayColor:f,labelBackground:"linear-gradient(transparent, rgba(0, 0, 0, 0.6))",labelForeground:"rgba(255, 255, 255, 0.87)",inactiveOverlayColor:b,hoverOverlayColor:m},tabTitle:{foreground:r,background:"transparent",activeBackground:"transparent",activeBorderColor:i,activeForeground:o},dropdown:{background:"transparent",foreground:o,hoverBorderColor:r,borderColor:l,listBackground:l,caretColor:n,listForeground:r,listBorderColor:l,listItemHoverBackground:a,listShadow:`0 8px 10px 1px rgba(0,0,0,0.14),
        0 3px 14px 2px rgba(0,0,0,0.12),
        0 5px 5px -3px rgba(0,0,0,0.20)`,inactiveOpacity:v},textInput:{foreground:o,hoverBorderColor:o,background:"transparent",borderColor:l,inactiveOpacity:v},slider:{trackColor:a,activeTrackColor:i,thumbBackground:d,thumbBorderColor:i,inactiveOpacity:v,hoverOpacity:"0.7"},selectColor:{activeBorderColor:i,inactiveOpacity:v},toolbar:{foreground:o,background:l,activeBackground:"transparent",activeForeground:i,borderColor:"transparent"},tooltip:{background:a,foreground:o},toolControlBar:{background:"rgba(238, 238, 238, 0.9)",borderColor:d,shadow:"none",separatorColor:l,titleForeground:r,inputLabelForeground:r,inputLabelInactiveOpacity:v},mainCanvasActionBar:{background:"transparent",foreground:o,borderColor:"none"},canvasActionBar:{background:a,foreground:o,separatorColor:n},canvas:{background:u,controlsOutline:"rgba(255, 255, 255, 0.6)",controlsColor:"#ffffff",cropBackdrop:"rgba(255, 255, 255, 0.3)"},colorPicker:{listBackground:l,listShadow:`0 8px 10px 1px rgba(0,0,0,0.14),
        0 3px 14px 2px rgba(0,0,0,0.12),
        0 5px 5px -3px rgba(0,0,0,0.20)`,controlsColor:"#ffffff",inputBorderColor:a},colorItem:{borderRadius:"2px",margin:"1px"},webcam:{backdrop:"rgba(0, 0, 0, 0.3)",floatButton:e,background:u},snapping:{positionGuideColor:"#f0f",rotationGuideColor:"#0ff"},transform:{crops:{main:"#B8B8B8",highlight:"#E6E6E6",shadow:"#D4D4D4"}}}};var tl=dy;var lr=$n();var Wn=On();var Lt={...lr,measurements:Wn};var hy=i=>{if(i==="light"){return tl}return $n};var Yp=(i,t)=>{const e=hy(i);if(t&&t[i]){const{primary:o,background:r,foreground:n}=t[i];const a={primary:o,background:r,foreground:n};const l=Object.keys(a).reduce((c,d)=>{if(a[d]){return{...c,[d]:a[d]}}return c},{});return wt([e(l),t[i]])}return e()||lr};var uy=["canvas","advancedUIToolbar","advancedUIToolControlBar","advancedUICard","advancedUISpacer","basicUIToolbar","basicUIToolControlBar","mainCanvasActionBar","inputs","colorItem","fontSystem"];var Kp=i=>{const t=On();if(i){const e={};Object.keys(i).forEach(o=>{if(uy.indexOf(o)!==-1){e[o]=i[o]}});return wt([t,e])}return t};var my={config:bo,locale:Pi,theme:lr,measurements:Wn,initialMeasurements:Wn};var St=class{constructor(){this.dispose=()=>{this.state=null;this.events=null;this.assetProvider=null};this.checkDefaultToolAvailability=(t,e)=>{return e.indexOf(t)!==-1};this.state=T(my);this.events=new Ja;this.licenseChecker=null}saveConfig(t){if(t.mainCanvasActions&&t.mainCanvasActions.length!==4){t.mainCanvasActions.length=4}const e=t.layout&&t.layout==="basic"?Za:bo;const o=wt([e,t],{clone:true});this.licenseChecker=new Oc(o.license);if(!this.licenseChecker.areCustomAssetsAllowed()){o.sticker.enableCustomUpload=false}const r=Xp(o.language,o.custom.languages);const n=Yp(o.theme,o.custom.themes);const a=Kp(o.custom.measurements);const{provider:l}=o.library;const c=[];o.adjustment.categories=o.adjustment.categories.reduce((m,f)=>{m.push({...f,items:f.items.filter(b=>{if(!dc[b.identifier]){c.push(b.identifier);return false}return true})});return m},[]);if(c.length!==0){console.error(`The following identifier are incorrect for the adjustment tool: ${c.join(", ")}`)}delete o.language;delete o.custom.languages;delete o.custom.themes;delete o.library.provider;let d=o.tools.reduce((m,f)=>{if(typeof f==="object"){return[...m,...f]}return[...m,f]},[]);if(!d.length){console.error(`Empty list input for tools`);d=Bn.reduce((m,f)=>{if(typeof f==="object"){return[...m,...f]}return[...m,f]},[])}d=d.filter(m=>this.licenseChecker.isToolAllowed(m));if(o.defaultTool){const m=this.checkDefaultToolAvailability(o.defaultTool,d);if(!m){if(this.licenseChecker.isToolAllowed(o.defaultTool)){console.warn(`Configured default tool ${o.defaultTool} is not a part of configured list of tools: [${d.join(" ")}]`)}[o.defaultTool]=d}}o.tools=d;this.state.config=o;this.state.locale=r;this.state.theme=n;this.state.measurements=a;this.state.initialMeasurements=a;const u=this.buildCustomAssetsConfig();this.assetProvider=new Dc(u,this.licenseChecker.areCustomAssetsAllowed(),o.assetResolver);this.loadThemeFont();return l}get config(){return this.state.config}get locale(){return this.state.locale}get theme(){return this.state.theme}get measurements(){return this.state.measurements}get initialMeasurements(){return this.state.initialMeasurements}get tools(){return this.config.tools.reduce((t,e)=>{if(typeof e==="string"){return[...t,e]}return[...t,"",...e]},[])}get defaultTool(){return this.config.defaultTool}get isOrderDefault(){return this.config.order==="default"}get isLayoutAdvanced(){return this.config.layout==="advanced"}get displayCloseButton(){return this.config.mainCanvasActions.indexOf("close")!==-1}loadThemeFont(){const{typography:t}=this.theme;if(!t.skipLoading){this.assetProvider.getFontManager().injectFonts([t])}}buildCustomAssetsConfig(){const t=this.tools;const e=I(this.state.config);const o=this.state.config.assetBaseUrl;const{theme:r}=this.state;const n=t.indexOf("filter")!==-1?e["filter"]:void 0;const a=t.indexOf("focus")!==-1?e["focus"]:void 0;const l=t.indexOf("adjustment")!==-1?e["adjustment"]:void 0;const c=t.indexOf("sticker")!==-1?e["sticker"]:void 0;const d=t.indexOf("frame")!==-1?e["frame"]:void 0;const u=t.indexOf("overlay")!==-1?e["overlay"]:void 0;const m=t.indexOf("transform")!==-1?e["transform"]:void 0;const f=t.indexOf("text")!==-1?e["text"]:void 0;const b=t.indexOf("textdesign")!==-1?e["textdesign"]:void 0;return{basePath:o,theme:r,filter:n,focus:a,sticker:c,frame:d,overlay:u,transform:m,text:f,adjustment:l,textdesign:b}}};s([p],St.prototype,"saveConfig",1);s([p],St.prototype,"dispose",2);s([h],St.prototype,"config",1);s([h],St.prototype,"locale",1);s([h],St.prototype,"theme",1);s([h],St.prototype,"measurements",1);s([h],St.prototype,"initialMeasurements",1);s([h],St.prototype,"tools",1);s([h],St.prototype,"defaultTool",1);s([h],St.prototype,"isOrderDefault",1);s([h],St.prototype,"isLayoutAdvanced",1);s([h],St.prototype,"displayCloseButton",1);var el=class{constructor(t){this.editor=t}setBackgroundImage(t){if(!this.container){this.container=this.engine.addImage({image:t,originalImage:t,blendMode:"normal",opacity:1})}else{this.container.setData({image:t,originalImage:t})}}getchildren(){return this.container.getChildren()}addImageToContainer(){return new Promise((t,e)=>{const{image:o}=this.editor.activeStore;if(ac(o)){this.setBackgroundImage(o);t()}else{const r=this.editor.libraryStore.getRawUrl(o);this.getImageElement(r).then(n=>{this.setBackgroundImage(n);t()}).catch(n=>{e({identifier:"imageLoading",message:n.message})})}})}getImageElement(t){return new Promise((e,o)=>{const r=new Image;r.addEventListener("load",()=>{e(r)});r.addEventListener("error",n=>{o(n)});r.crossOrigin=this.editor.configStore.config.engine.crossOrigin;r.src=t})}getImgageContainerId(){return this.container?this.container.getID():""}get engine(){return this.editor.engine}};var il=class{constructor(t){this.applyNewImageTransform=()=>{const{size:t,width:e,height:o}=this.editor.engineMediator.image.container.getBounds();const r=this.container;r.setTransform(be.IDENTITY);r.setResolution(t);r.setPivot(.5,.5);r.setPosition({x:e/2,y:o/2})};this.editor=t}get engine(){return this.editor.engine}get container(){return this.engine.getOutputContainer()}};function cr(i,t){const e=i.width/i.height;const o=t.width/t.height;if(e>o){return i.height/t.height}return i.width/t.width}var fy={transform:be.IDENTITY};var Te=class{constructor(t){this.initialTransform=be.IDENTITY;this.editor=t;this.state=T(fy)}createPreview(t){this.container=this.editor.engine.createPreview(t)}updateTransform(t=0,e=true){const o=this.calculateTransform(t);if(o.scale.x){if(e){this.saveInitialTransform(o)}else{this.savePreviewTransform(o)}this.container.setTransform(this.state.transform);return true}return false}saveInitialTransform(t){this.initialTransform=t;this.savePreviewTransform(t)}savePreviewTransform(t){rt(()=>{this.state.transform.position=t.position;this.state.transform.scale=t.scale;this.state.transform.rotation=t.rotation;const e=Gt();const o=new g(t.scale).divide(e);this.previewTransformWithoutDpr={position:new g(t.position).divide(e),scale:o,rotation:t.rotation}})}get transform(){return this.state.transform}get position(){return this.state.transform.position}get scale(){return this.state.transform.scale}get rotation(){return this.state.transform.rotation}calculateTransform(t=0){const e=Gt();const{scaleImageToFit:o}=this.editor.configStore.config;const{width:r,height:n}=this.editor.canvasStore.canvasSize;const a=this.editor.engine.getOutputDimensions();const l=cr({width:r,height:n},a);let c=o?l:Math.min(1,l);const d=n-a.height*c;const u=this.editor.configStore.measurements.mainCanvasActionBar.height*2;if(d<u){c=cr({width:r,height:n-u},a)}const m=.95;if(a.height*c>n*m){c=cr({width:r,height:n*m},a)}if(a.width*c>r*m){c=cr({width:r*m,height:n},a)}c*=e;const f={x:r*e/2,y:n*e/2};const b={x:c,y:c};return new be(f,b,t)}};s([p],Te.prototype,"updateTransform",1);s([p],Te.prototype,"savePreviewTransform",1);s([h],Te.prototype,"transform",1);s([h],Te.prototype,"position",1);s([h],Te.prototype,"scale",1);s([h],Te.prototype,"rotation",1);var He=class{constructor(){this.imageContainerOrder=[];this.spriteContainerOrder=[]}static checkTool(t){if(["sticker","text","textdesign","brush"].indexOf(t)!==-1){throw new Error("addIndex is used for non sprites, for sprites use addSprite")}}static remove(t,e){const o=e.findIndex(r=>r===t);if(o!==-1){e.splice(o,1)}return void 0}static indexForOrder(t,e,o){const r=t[o];const n=e.findIndex(l=>l===o);if(n!==-1){return{index:n,order:e}}const{length:a}=e;if(a){let l;for(l=0;l<a;l+=1){const c=e[l];const d=t[c];if(r<d){e=[...e.slice(0,l),o,...e.slice(l)];return{index:l,order:e}}}}e.push(o);return{index:e.length-1,order:e}}addIndex(t){He.checkTool(t);const{index:e,order:o}=He.indexForOrder(He.IMAGE_CONTAINER_INDEX,this.imageContainerOrder,t);this.imageContainerOrder=o;return e}removeIndex(t){He.checkTool(t);He.remove(t,this.imageContainerOrder)}addSprite(t){this.spriteContainerOrder.push(t);return this.imageContainerOrder.length+this.spriteContainerOrder.length-1}removeSprite(t){He.remove(t,this.spriteContainerOrder)}renameSprite(t,e){const o=this.spriteContainerOrder.findIndex(r=>r===t);if(o!==-1){this.spriteContainerOrder[o]=e}}bringToFront(t){const e=this.spriteContainerOrder.findIndex(o=>o===t);if(e!==-1){this.spriteContainerOrder.splice(e,1);this.spriteContainerOrder.push(t)}return this.getLastSpriteIndex()}getLastSpriteId(){const{length:t}=this.spriteContainerOrder;return this.spriteContainerOrder[t-1]}getSpriteIndex(t){const e=this.spriteContainerOrder.findIndex(o=>o===t);return e+this.imageContainerOrder.length-1}getLastSpriteIndex(){return this.imageContainerOrder.length+this.spriteContainerOrder.length-1}};var Nn=He;Nn.IMAGE_CONTAINER_INDEX={["filter"]:0,["adjustment"]:1,["focus"]:2,["overlay"]:3};var ol=class{constructor(t){this.orderHelper=new Nn;this.init=()=>{const t=this.editor.configStore.config.engine;this.engine=new Br({...t,license:this.editor.configStore.config.license,assetProvider:this.editor.configStore.assetProvider,watermark:this.editor.configStore.config.watermark});this.image=new el(this.editor);this.output=new il(this.editor);this.preview=new Te(this.editor)};this.dispose=()=>{if(this.engine){this.engine.dispose();this.engine=null}this.image=null;this.output=null;this.preview=null};this.editor=t}render(t){return this.engine.render(t)}previewSpaceToWorldSpace(t,e){const o=this.preview.previewTransformWithoutDpr;if(oe(t)){const r=this.editor.engine.convertPointFromPreviewIntoWorldSpace(g.ZERO,o,e);const n=this.editor.engine.convertPointFromPreviewIntoWorldSpace({x:t,y:0},o,e);return g.distance(new g(r),new g(n))}return this.editor.engine.convertPointFromPreviewIntoWorldSpace(t,o,e)}worldSpaceToPreviewSpace(t){const e=this.preview.previewTransformWithoutDpr;if(oe(t)){const o=this.editor.engine.convertPointFromWorldIntoPreviewSpace(g.ZERO,e);const r=this.editor.engine.convertPointFromWorldIntoPreviewSpace({x:t,y:0},e);return g.distance(new g(o),new g(r))}return this.editor.engine.convertPointFromWorldIntoPreviewSpace(t,e)}outputSpaceToWorldSpace(t){if(oe(t)){return zs.getScalarInWorldSpace(t,this.editor.engine.getOutputContainer())}return zs.getPointInWorldSpace(t,this.editor.engine.getOutputContainer())}previewSpaceToOutputSpace(t){const e=this.preview.previewTransformWithoutDpr;if(oe(t)){const o=this.editor.engine.convertPointFromPreviewIntoOutputSpace(g.ZERO,e);const r=this.editor.engine.convertPointFromPreviewIntoOutputSpace({x:t,y:0},e);return g.distance(new g(o),new g(r))}return this.editor.engine.convertPointFromPreviewIntoOutputSpace(t,e)}previewSpaceToFlippedPreviewSpace(t){return this.editor.engine.convertPointFromPreviewIntoFlippedPreviewSpace(t)}};var So=class{constructor(){this.snapshots=[];this.observeIndex=T.box(-1)}addSnapshot(t){if(this.index===this.snapshots.length-1){this.snapshots=this.snapshots.concat(JSON.stringify(t))}else{this.snapshots=[...this.snapshots.slice(0,this.index+1),JSON.stringify(t)]}this.observeIndex.set(this.snapshots.length-1)}getCurrentState(){return this.snapshots[this.index]}reset(){this.snapshots=[];this.observeIndex.set(-1)}undo(){if(this.canUndo){this.observeIndex.set(this.index-1);return JSON.parse(this.getCurrentState())}return null}redo(){if(this.canRedo){this.observeIndex.set(this.index+1);return JSON.parse(this.getCurrentState())}return null}discardSnapshotsfromIndex(t){if(t>0&&t<this.snapshots.length-1){this.snapshots=this.snapshots.slice(0,t);this.observeIndex.set(this.snapshots.length-1)}}get index(){return this.observeIndex.get()}get canUndo(){return this.index>0}get canRedo(){return this.snapshots.length-1>this.index}};s([h],So.prototype,"index",1);s([h],So.prototype,"canUndo",1);s([h],So.prototype,"canRedo",1);var zi=class{constructor(t){this.awaitHistoryChange=false;this.isDirtySinceSave=false;this.undo=async()=>{if(!this.awaitHistoryChange){this.editor.configStore.events.onUndo();this.awaitHistoryChange=true;const t=this.appHistoryManager.undo();await this.applyState(t);this.awaitHistoryChange=false;if(!this.canUndo){this.isDirtySinceSave=false}}};this.redo=async()=>{if(!this.awaitHistoryChange){this.editor.configStore.events.onRedo();this.awaitHistoryChange=true;const t=this.appHistoryManager.redo();await this.applyState(t);this.awaitHistoryChange=false}};this.editor=t;this.appHistoryManager=new So}get canUndo(){return this.appHistoryManager.canUndo}get canRedo(){return this.appHistoryManager.canRedo}getHistoryState(){const t=I(this.editor.adjustmentsToolStore.state);const e=I(this.editor.filterToolStore.state);const o=this.editor.focusToolStore.getFocusStateForHistory();const r=I(this.editor.overlayToolStore.state);const n=I(this.editor.frameToolStore.state);const{strokes:a}=this.editor.brushToolStore;const l=this.editor.spriteStore.getSpriteHistoryState();const c=this.editor.transformToolStore.serializableState;return{["adjustment"]:t,["filter"]:e,["focus"]:o,["overlay"]:r,["frame"]:n,["brush"]:a,sprite:l,["transform"]:c}}addInitialSnapshot(){const t=this.getHistoryState();this.appHistoryManager.addSnapshot({state:t,type:"add",description:"Initial State"})}addSnapshot(t,e,o){let r;if(!t){r=this.getHistoryState()}else if(t.sprite||t.transform){r={...this.getHistoryState(),...t}}else{r=t}this.appHistoryManager.addSnapshot({state:r,type:e,description:o});this.editor.configStore.events.onHistoryChange();if(!this.isDirtySinceSave){this.isDirtySinceSave=true}}async applyState({state:t}){try{if(t){const e=Object.keys(t);for(const o of e){switch(o){case"filter":await this.editor.filterToolStore.updateStateFromHistory(t[o]);break;case"adjustment":await this.editor.adjustmentsToolStore.updateStateFromHistory(t[o]);break;case"overlay":await this.editor.overlayToolStore.updateStateFromHistory(t[o]);break;case"frame":await this.editor.frameToolStore.updateStateFromHistory(t[o]);break;case"focus":await this.editor.focusToolStore.updateStateFromHistory(t[o],this.editor.canvasStore.sizeVector);break;case"brush":await this.editor.brushToolStore.updateStateFromHistory(t[o]);break;case"sprite":await this.editor.spriteStore.updateStateFromHistory(t[o]);break;case"transform":this.editor.outputContainer.pauseChildrenUpdates();this.editor.transformToolStore.onEnter();this.editor.transformToolStore.updateStateFromSerialization(t[o]);this.editor.transformToolStore.onLeave();this.editor.transformToolStore.onEnter();this.editor.transformToolStore.onLeave();this.editor.outputContainer.resumeChildrenUpdates();await this.editor.wait();break;default:break}}await this.editor.renderPromise()}}catch(e){console.error(e);this.editor.modalStore.showActionModal({type:"error",identifier:"unexpectedError",error:e,handleConfirm:()=>{this.applyState({state:t})}})}}isDirty(){return this.appHistoryManager.snapshots.length>1}reset(){this.appHistoryManager.reset();this.isDirtySinceSave=false}getCurrentSpritesState(){var t,e;return(e=(t=JSON.parse(this.appHistoryManager.getCurrentState()))==null?void 0:t.state)==null?void 0:e.sprite}};s([p],zi.prototype,"undo",2);s([p],zi.prototype,"redo",2);s([h],zi.prototype,"canUndo",1);s([h],zi.prototype,"canRedo",1);var gy=(i,t)=>new Promise((e,o)=>{const r=new XMLHttpRequest;r.onload=()=>{const n=new FileReader;n.onloadend=()=>{if(typeof n.result==="string"&&n.result.substr(0,10)==="data:image"){e(n.result)}else{o(new Error(`The image could not be loaded from ${i}`))}};n.onerror=a=>{o(a)};n.readAsDataURL(r.response)};r.open("GET",i);r.responseType="blob";r.withCredentials=t==="use-credentials";r.send()});var qp=(i,t)=>{return new Promise((e,o)=>{const r=new Image;r.onload=()=>{e(r)};r.onerror=()=>{o(new Error(`Failed to load image with src:${i}`))};r.crossOrigin=t;r.src=i})};var by=(i,t)=>new Promise((e,o)=>{gy(i,t).then(r=>{const n=new Image;n.addEventListener("load",()=>{e(n)});n.src=r}).catch(()=>{qp(i,t).then(r=>e(r)).catch(r=>{o(r)})})});var rl=async({url:i,image:t,crossOrigin:e="anonymous"})=>{try{if(t&&t.src&&t.src.substr(0,5)==="data:"||t&&t.src&&t.src.includes(".svg")){return t}if(typeof i==="string"&&i.substr(0,5)==="data:"||typeof i==="string"&&i.includes(".svg")){return qp(i,e)}return by(i||t.src,e)}catch(o){throw new Error(o)}};var yy={tool:null,isWebcam:false,image:"",imageLoadedToEngine:false};var Tt=class{constructor(t){this.setImage=async t=>{try{const{crossOrigin:e}=this.editor.configStore.config.engine;if(typeof t==="string"&&!t.trim()||t===void 0||t===null){this.state.image=null}else if(typeof t==="string"){this.state.image=await rl({url:Fo(t)?t:this.editor.assetProvider.getPath(t),crossOrigin:e})}else if(t instanceof HTMLImageElement){this.state.image=await rl({image:t,crossOrigin:e})}if(this.isWebcam){this.state.isWebcam=false}}catch(e){throw new Error(e)}};this.setImageLoadedToEngine=t=>{this.state.imageLoadedToEngine=t};this.newImage=t=>{this.editor.init(t)};this.dispose=()=>{this.state=null;this.editor=null};this.editor=t;this.state=T(yy)}selectTool(t){var o,r,n;const{licenseChecker:e}=this.editor.configStore;if(this.state.tool!==t&&(e==null?void 0:e.isToolAllowed(t))&&(this.image||t==="library"||t==="customTool")){if(this.editor.configStore.isLayoutAdvanced){const a=(n=(r=(o=this.editor.configStore.state.config["customTool"])==null?void 0:o.measurements)==null?void 0:r.advancedUIToolControlBar)==null?void 0:n.width;if(a){if(t==="customTool"){this.editor.configStore.measurements.advancedUIToolControlBar.width=a}else if(this.state.tool==="customTool"){this.editor.configStore.measurements.advancedUIToolControlBar.width=this.editor.configStore.initialMeasurements.advancedUIToolControlBar.width}}}this.editor.onToolChange(this.state.tool,t);this.state.tool=t;this.editor.configStore.events.onToolChanged(t);switch(t){case"text":if(this.editor.configStore.config.text.addDefaultTextOnEnter){this.editor.spriteStore.textToolStore.addOrselect()}else{this.editor.spriteStore.textToolStore.loadFonts()}break;case"textdesign":if(this.editor.configStore.config.textdesign.addDefaultTextOnEnter){this.editor.spriteStore.textDesignToolStore.addOrselect()}break;case"brush":{this.editor.brushToolStore.initSize();break}case"transform":this.editor.transformToolStore.applyDefaultCrop();break;default:break}}}selectWebcam(t){this.state.isWebcam=t}get webcamLabel(){return this.editor.libraryStore.locale.controls.buttonWebcamClose}get tool(){return this.state.tool}get isWebcam(){return this.state.isWebcam}get image(){return this.state.image}get imageLoadedToEngine(){return this.state.imageLoadedToEngine}};s([p],Tt.prototype,"selectTool",1);s([p],Tt.prototype,"selectWebcam",1);s([p],Tt.prototype,"setImage",2);s([p],Tt.prototype,"setImageLoadedToEngine",2);s([p],Tt.prototype,"newImage",2);s([p],Tt.prototype,"dispose",2);s([h],Tt.prototype,"webcamLabel",1);s([h],Tt.prototype,"tool",1);s([h],Tt.prototype,"isWebcam",1);s([h],Tt.prototype,"image",1);s([h],Tt.prototype,"imageLoadedToEngine",1);var vy={height:150,width:150};var nl={height:0,width:0};var sl=class{constructor(t){this.canvasClickDisabled=T.box(false);this.resizeCanvas=(t=null)=>{const e=this.editor.activeStore.tool;const o=t==="transform"||!t&&e==="transform";const{isLayoutAdvanced:r,measurements:n}=this.editor.configStore;const{storedSize:a}=this.editor.canvasStore;let l=0;if(!r&&o){l=n.basicUIToolControlBar.controlsBarHeight*-1;if(t==="transform"&&e==="brush"){l-=n.basicUIToolControlBar.itemsBarHeight+4}}this.setCanvasSize({width:a.width,height:a.height+l})};this.setCanvasSize=t=>{this.state.canvasSize=t};this.dispose=()=>{this.state=null;this.canvas=null;this.canvasClickDisabled=null;this.editor=null};this.editor=t;this.state=T(sl.initialState)}setCanvasElement(t){this.canvas=t;this.editor.engineMediator.preview.createPreview(t);if(this.editor.activeStore.image){this.editor.init(this.editor.activeStore.image)}}saveDimensions({height:t,width:e,render:o}){const{imageLoadedToEngine:r}=this.editor.activeStore;if(t>nl.height&&e>nl.width){this.state.storedSize={width:e,height:t};if(this.state.canvasSize.height===0){this.state.canvasSize={width:e,height:t}}if(o&&r){this.editor.resize()}}}disableCanvasClick(){this.canvasClickDisabled.set(true)}enableCanvasClick(){this.canvasClickDisabled.set(false)}get isCanvasClickable(){return!this.canvasClickDisabled.get()}get canvasSize(){return this.state.canvasSize}get storedSize(){return this.state.storedSize}get sizeVector(){return g.fromSize(this.state.canvasSize)}get sizeVectorMagnitude(){return this.sizeVector.magnitude}getContainersAtPreviewPoint(t){const e=this.editor.engine.getContainersAtPreviewPoint(t,this.editor.engineMediator.preview.previewTransformWithoutDpr).map(o=>o.getID()).filter(o=>o!==this.editor.engineMediator.image.getImgageContainerId());this.editor.spriteStore.onCanvasClick(e)}};var yt=sl;yt.initialState={canvasSize:nl,storedSize:vy};s([p],yt.prototype,"setCanvasElement",1);s([p],yt.prototype,"saveDimensions",1);s([p],yt.prototype,"resizeCanvas",2);s([p],yt.prototype,"disableCanvasClick",1);s([p],yt.prototype,"enableCanvasClick",1);s([p],yt.prototype,"setCanvasSize",2);s([p],yt.prototype,"dispose",2);s([h],yt.prototype,"isCanvasClickable",1);s([h],yt.prototype,"canvasSize",1);s([h],yt.prototype,"storedSize",1);s([h],yt.prototype,"sizeVector",1);s([h],yt.prototype,"sizeVectorMagnitude",1);var xy={type:null,identifier:null,isVisible:false,error:""};var Bt=class{constructor(t){this.showActionModal=({type:t,identifier:e,error:o,handleConfirm:r,handleDismiss:n})=>{this.resetHandlers();this.state.isVisible=true;this.state.identifier=e;this.state.type=t;this.state.error=o||"";this.handleConfirm=r;this.handleDismiss=n};this.hideModal=()=>{this.state.isVisible=false;this.state.type=null;this.state.error="";this.state.identifier=null;this.resetHandlers()};this.dispose=()=>{this.state=null;this.configStore=null};this.resetHandlers=()=>{this.handleConfirm=null;this.handleDismiss=null};this.configStore=t.configStore;this.state=T(xy)}showInfoModal(t){this.resetHandlers();this.state.isVisible=true;this.state.type="info";this.state.identifier=t;this.state.error=""}showTextEditModal(){this.resetHandlers();this.state.isVisible=true;this.state.type="textEdit";this.state.identifier="inputText";this.state.error=""}get modalProps(){const{isVisible:t}=this.state;const e=this.getModalLocale();if(e){const{bodyLabel:o,headerLabel:r,buttonYes:n,buttonNo:a}=e;return{headerLabel:r,bodyLabel:o,confirmLabel:n,dismissLabel:a,isVisible:t,handleClose:this.hideModal,handleConfirm:this.handleConfirm,handleDismiss:this.handleDismiss}}return{isVisible:false}}get isVisible(){return this.state.isVisible}get type(){return this.state.type}get identifier(){return this.state.identifier}get positionOffset(){const{isLayoutAdvanced:t,measurements:{basicCanvasOffset:e,advancedUIToolControlBar:o,advancedUIToolbar:r},isOrderDefault:n}=this.configStore;const a=(o.width+r.width)*(!n?-1:1);const l=e;return t?{x:a/2,y:0}:{x:0,y:-l}}getModalLocale(){const{identifier:t,error:e,type:o}=this.state;const{locale:r}=this.configStore;if(!o||!t||o==="textEdit")return null;if(o&&t&&r[`${o}Modals`]&&r[`${o}Modals`][t]){const n=r[`${o}Modals`][t];let{body:a}=n;if(a&&typeof e==="object"){Object.keys(e).forEach(c=>{a=a.replace(`\${${c}}`,e[c])})}else if(a){a=a.replace("${error}",e)}let l=n.heading;if(o==="error"||o==="warning"){const c={error:r.common.error,warning:r.common.warning};const d=o==="error"?c.error:c.warning;l=`${d}${n.headingDelimiter||""} ${n.header||""}`}return{bodyLabel:a,headerLabel:l,buttonYes:n.buttonYes,buttonNo:n.buttonNo}}return null}};s([p],Bt.prototype,"showActionModal",2);s([p],Bt.prototype,"showInfoModal",1);s([p],Bt.prototype,"showTextEditModal",1);s([p],Bt.prototype,"hideModal",2);s([p],Bt.prototype,"dispose",2);s([h],Bt.prototype,"modalProps",1);s([h],Bt.prototype,"isVisible",1);s([h],Bt.prototype,"type",1);s([h],Bt.prototype,"identifier",1);s([h],Bt.prototype,"positionOffset",1);var lt=class{constructor(t){this.defaultScale=1;this.SCALE_LEVELS=[8.33,12.5,16.66,25,33.33,50,66.66,100,125,150,200,300,400,500,600].map(t=>t/100);this.state={position:{x:0,y:0},scaleIndex:-1};this.offset={x:0,y:0};this.in=()=>{if(this.canZoomIn){this.state.scaleIndex+=1;this.scaleRender()}};this.out=()=>{if(this.canZoomOut){this.state.scaleIndex-=1;const{maxOffsetX:t,maxOffsetY:e}=this.checkOffset({x:0,y:0});if(this.state.scaleIndex===this.defaultIndex){this.offset.y=e}if(this.state.scaleIndex===this.defaultIndex){this.offset.x=t}this.savePosition();this.scaleRender()}};this.setOffset=t=>{const{canDragX:e,canDragY:o}=this.checkOffset(t);if(e){this.offset.x=t.x}if(o){this.offset.y=t.y}this.scaleRender()};this.editor=t}setInitialTransform(t=0){const e=Gt();const{scaleImageToFit:o}=this.editor.configStore.config;const{transform:r}=this.editor.engineMediator.preview;rt(()=>{const n=Math.abs(t||r.scale.x);this.setDefaultScale(o?n:Math.min(1*e,n));this.setPosition(r.position)})}resetScale(){this.state.scaleIndex=-1}resetPosition(){const{width:t,height:e}=this.editor.canvasStore.canvas;this.setPosition({x:t/2,y:e/2})}resetOffset(){this.offset={x:0,y:0}}setPosition(t){this.state.position.x=t.x;this.state.position.y=t.y}savePosition(){this.setPosition(this.getPositionWithOffset());this.offset={x:0,y:0}}setDefaultScale(t){if(this.defaultScale!==1){const o=this.SCALE_LEVELS.findIndex(r=>r===this.defaultScale);if(o!==-1){this.SCALE_LEVELS=[...this.SCALE_LEVELS.slice(0,o),...this.SCALE_LEVELS.slice(o+1)]}}const e=this.SCALE_LEVELS.findIndex(o=>o===t);if(e!==-1){this.state.scaleIndex=e}else{const o=this.SCALE_LEVELS.findIndex((r,n)=>{if(n===0){return t<r}return this.SCALE_LEVELS[n-1]<t&&t<r});if(o!==-1){this.SCALE_LEVELS=[...this.SCALE_LEVELS.slice(0,o),t,...this.SCALE_LEVELS.slice(o)];this.state.scaleIndex=o}else{this.SCALE_LEVELS=[...this.SCALE_LEVELS,t];this.state.scaleIndex=this.SCALE_LEVELS.length-1}}this.defaultScale=t}setScaleToDefault(){this.state.scaleIndex=this.defaultIndex}checkOffset(t){const e=Gt();const{scaledSize:o}=this;const{previewSize:r}=this;const n=this.editor.engineMediator.preview.initialTransform.position;const a=this.getPositionWithOffset(t);const l=(o.width-r.width)*e/2;const c=(o.height-r.height)*e/2;const d=n.x-a.x;const u=n.y-a.y;const m=Math.abs(d);const f=Math.abs(u);const b=d>0;const v=u>0;const y=m-l;const x=f-c;return{canDragX:y<0,canDragY:x<0,maxOffsetX:b?-y:y,maxOffsetY:v?-x:x}}calculateScale(t=0,e=this.previewSize,o=this.defaultScale){const{width:r,height:n}=e;const a=new g({x:r,y:n});const l=new g(Math.abs(a.x*Math.cos(t))+Math.abs(a.y*Math.sin(t)),Math.abs(a.x*Math.sin(t))+Math.abs(a.y*Math.cos(t)));const c=a.subtract(l).divide(2).multiply(o).abs;if(c.y>c.x){return c.y*2/a.y+o}return c.x*2/a.x+o}get defaultIndex(){return this.SCALE_LEVELS.findIndex(t=>t===this.defaultScale)}getPositionWithOffset(t=this.offset){const{position:e}=this;return{x:e.x-t.x,y:e.y-t.y}}scaleRender(t=false){const e=this.editor.scale.getPositionWithOffset();const o=t?this.defaultScale:this.scale;const r={x:o,y:o};this.editor.engineMediator.preview.container.setScale(r);this.editor.engineMediator.preview.container.setPosition(e);this.editor.engineMediator.preview.savePreviewTransform({scale:r,position:e,rotation:0});if(!t){this.editor.render()}}get scale(){const t=this.state.scaleIndex;return t!==-1?this.SCALE_LEVELS[t]:this.defaultScale}get zoomLevel(){const t=Gt();return(this.scale/t*100).toFixed(1)}get canDrag(){return this.defaultScale<this.scale}get canZoomOut(){const{restrictZoomOutToDefault:t}=this.editor.configStore.config;if(t){return this.state.scaleIndex>this.defaultIndex}return this.state.scaleIndex!==0}get canZoomIn(){return this.SCALE_LEVELS.length-1>this.state.scaleIndex}get position(){return this.state.position}get scaledSize(){const t=this.state.scaleIndex;const e=t!==-1?this.SCALE_LEVELS[t]:this.defaultScale;const{previewSize:o}=this;return{width:o.width*e/this.defaultScale,height:o.height*e/this.defaultScale}}get previewSize(){return this.editor.getPreviewSize()}};s([T],lt.prototype,"state",2);s([p],lt.prototype,"in",2);s([p],lt.prototype,"out",2);s([p],lt.prototype,"setInitialTransform",1);s([p],lt.prototype,"resetScale",1);s([p],lt.prototype,"resetPosition",1);s([p],lt.prototype,"setPosition",1);s([p],lt.prototype,"savePosition",1);s([p],lt.prototype,"setDefaultScale",1);s([p],lt.prototype,"setScaleToDefault",1);s([h],lt.prototype,"scale",1);s([h],lt.prototype,"zoomLevel",1);s([h],lt.prototype,"canDrag",1);s([h],lt.prototype,"canZoomOut",1);s([h],lt.prototype,"canZoomIn",1);s([h],lt.prototype,"position",1);s([h],lt.prototype,"scaledSize",1);var Jp=[[0,0],[0,1],[1,0],[1,1]];var Sy=[[0,1,2,3],[2,3,0,1],[1,0,3,2],[3,2,1,0]];var pe=class{constructor(t,e,o="center",r=true,n=false){this.considerRotation=true;this.considerFlip=true;this.store=e;this.m=o==="center"?pe.movePivotTo([.5,.5]):Jp;this.considerRotation=r;this.considerFlip=n;this.configStore=t.configStore}static getFlippedEdgeIndex(t,e,o){return Sy[(e?1:0)+(o?2:0)][t]}static movePivotTo(t){return Jp.map(e=>[e[0]-t[0],e[1]-t[1]])}get position(){return this.store.position}get size(){return this.store.size}get rotation(){return this.considerRotation?this.store.rotationWRTOutputRotation:0}get flipHorizontally(){return this.considerFlip?this.store.isFlippedHorizontal:false}get flipVertically(){return this.considerFlip?this.store.isFlippedVertical:false}get flipCenter(){return this.considerFlip?this.store.flipCenter:null}handleOrigin(t,e,o){const r=pe.getFlippedEdgeIndex(t,e,o);const n=this.m[r][0]*this.size.width;const a=this.m[r][1]*this.size.height;return{width:n,height:a}}get leftTop(){const{position:t,flipHorizontally:e,flipVertically:o}=this;const r=this.handleOrigin(0,e,o);return pe.coordinatesWithRotation(r,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get leftBottom(){const{position:t,flipHorizontally:e,flipVertically:o}=this;const r=this.handleOrigin(1,e,o);return pe.coordinatesWithRotation(r,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get rightTop(){const{position:t,flipHorizontally:e,flipVertically:o}=this;const r=this.handleOrigin(2,e,o);return pe.coordinatesWithRotation(r,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get rightBottom(){const{position:t,flipHorizontally:e,flipVertically:o}=this;const r=this.handleOrigin(3,e,o);return pe.coordinatesWithRotation(r,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get leftBottomHandle(){const{position:t,flipHorizontally:e,flipVertically:o}=this;const r=this.handleOrigin(1,e,o);r.height+=this.configStore.measurements.canvasControls.sprite.rotateHandle.height;return pe.coordinatesWithRotation(r,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get rightBottomHandle(){const{position:t,flipHorizontally:e,flipVertically:o}=this;const r=this.handleOrigin(3,e,o);r.height+=this.configStore.measurements.canvasControls.sprite.rotateHandle.height;return pe.coordinatesWithRotation(r,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get leftMid(){const t=new g(this.leftTop);const e=new g(this.leftBottom);return t.add(e).divide(2)}get rightMid(){const t=new g(this.rightTop);const e=new g(this.rightBottom);return t.add(e).divide(2)}};var tt=pe;tt.coordinatesWithRotation=({width:t,height:e},o,r,n,a,l)=>{let c=t*Math.cos(o)-e*Math.sin(o)+l.x;let d=t*Math.sin(o)+e*Math.cos(o)+l.y;if(r){c=a.x*2-c}if(n){d=a.y*2-d}return new g({x:c,y:d}).rounded};s([h],tt.prototype,"position",1);s([h],tt.prototype,"size",1);s([h],tt.prototype,"rotation",1);s([h],tt.prototype,"flipHorizontally",1);s([h],tt.prototype,"flipVertically",1);s([h],tt.prototype,"flipCenter",1);s([h],tt.prototype,"leftTop",1);s([h],tt.prototype,"leftBottom",1);s([h],tt.prototype,"rightTop",1);s([h],tt.prototype,"rightBottom",1);s([h],tt.prototype,"leftBottomHandle",1);s([h],tt.prototype,"rightBottomHandle",1);s([h],tt.prototype,"leftMid",1);s([h],tt.prototype,"rightMid",1);var F=class{constructor(t,e){this.minCropSize=0;this.id="";this.dispose=()=>{this.state=null;this.defaults=null;this.configStore=null};this.state={identifier:"identity",outputRotation:0,rotationInDegrees:0,flipHorizontally:false,flipVertically:false,cropState:T.map({})};this.configStore=t.configStore;this.id=mi();this.minCropSize=this.configStore.measurements.crop.minSize;this.defaults=e}changeIdentifier(t){this.state.identifier=t;const e=this.state.cropState.get(`${this.id}-${t}`);if(!e){this.state.cropState.set(`${this.id}-${t}`,{...qt})}}changeRatio(t){const e=this.state.cropState.get(`${this.id}-${this.identifier}`);if(e){this.state.cropState.set(`${this.id}-${this.identifier}`,{...e,ratio:t})}}changeSize(t){const e=this.state.cropState.get(`${this.id}-${this.identifier}`);if(e){if(t.width&&t.width>0){e.size.width=Math.round(t.width)}if(t.height&&t.height>0){e.size.height=Math.round(t.height)}this.state.cropState.set(`${this.id}-${this.identifier}`,e)}}changeHeight(t){const e=this.state.cropState.get(`${this.id}-${this.identifier}`);if(e){if(t){e.size.height=Math.round(t);this.state.cropState.set(`${this.id}-${this.identifier}`,e)}}}changeWidth(t){const e=this.state.cropState.get(`${this.id}-${this.identifier}`);if(e){if(t){e.size.width=Math.round(t);this.state.cropState.set(`${this.id}-${this.identifier}`,e)}}}changePositionX(t,e){const o=this.state.cropState.get(`${this.id}-${this.identifier}`);if(o&&t<=e-this.minCropSize&&t>=0){o.position.x=Math.round(t);this.state.cropState.set(`${this.id}-${this.identifier}`,o);return true}return false}changePositionY(t,e){const o=this.state.cropState.get(`${this.id}-${this.identifier}`);if(o&&t<=e-this.minCropSize&&t>=0){o.position.y=Math.round(t);this.state.cropState.set(`${this.id}-${this.identifier}`,o);return true}return false}changePosition(t,e){const o=this.state.cropState.get(`${this.id}-${this.identifier}`);if(o){if(t.x<=e.width-this.minCropSize&&t.x>=0&&t.y<=e.height-this.minCropSize&&t.y>=0){o.position.x=Math.round(t.x);o.position.y=Math.round(t.y);this.state.cropState.set(`${this.id}-${this.identifier}`,o);return true}}return false}changeLockResolution(t){const e=this.state.cropState.get(`${this.id}-${this.identifier}`);if(e){e.lockResolution=t!==void 0?t:!e.lockResolution;this.state.cropState.set(`${this.id}-${this.identifier}`,e)}}changeForceDimensions(t){const e=this.state.cropState.get(`${this.id}-${this.identifier}`);if(e){e.forceDimensions=t;this.state.cropState.set(`${this.id}-${this.identifier}`,e)}}clearState(){this.state.cropState.forEach((t,e)=>e.startsWith(this.id)&&this.state.cropState.delete(e))}setRotation(t){this.state.rotationInDegrees=t}resetRotation(){this.state.rotationInDegrees=0}resetOutputRotation(){this.state.outputRotation=0}resetFlip(){this.state.flipHorizontally=false;this.state.flipVertically=false}updateFlip({flipHorizontally:t,flipVertically:e}){this.state.flipHorizontally=t;this.state.flipVertically=e}setOutputRotation(t){this.state.outputRotation=t}flipHorizontally(){this.state.flipHorizontally=!this.state.flipHorizontally}flipVertically(){this.state.flipVertically=!this.state.flipVertically}get flipCenter(){const{width:t,height:e}=this.defaults.maxCropMaskSize;return new g(t/2,e/2)}get isFlippedHorizontal(){return this.state.flipHorizontally}get isFlippedVertical(){return this.state.flipVertically}get identifier(){return this.state.identifier}get height(){return this.selectedCrop?this.selectedCrop.size.height:qt.size.height}get width(){return this.selectedCrop?this.selectedCrop.size.width:qt.size.width}get position(){return this.selectedCrop?this.selectedCrop.position:qt.position}get ratio(){return this.selectedCrop?this.selectedCrop.ratio:qt.ratio}get size(){return this.selectedCrop?this.selectedCrop.size:qt.size}get x(){return this.selectedCrop?this.selectedCrop.position.x:qt.position.x}get y(){return this.selectedCrop?this.selectedCrop.position.y:qt.position.y}get lockResolution(){return this.selectedCrop?this.selectedCrop.lockResolution:qt.lockResolution}get forceDimensions(){return this.selectedCrop?this.selectedCrop.forceDimensions:qt.forceDimensions}get selectedCrop(){return this.state.cropState.get(`${this.id}-${this.identifier}`)}get rotationInDegrees(){return this.state.rotationInDegrees}get outputRotation(){return this.state.outputRotation}};s([T],F.prototype,"state",2);s([p],F.prototype,"changeIdentifier",1);s([p],F.prototype,"changeRatio",1);s([p],F.prototype,"changeSize",1);s([p],F.prototype,"changeHeight",1);s([p],F.prototype,"changeWidth",1);s([p],F.prototype,"changePositionX",1);s([p],F.prototype,"changePositionY",1);s([p],F.prototype,"changePosition",1);s([p],F.prototype,"changeLockResolution",1);s([p],F.prototype,"changeForceDimensions",1);s([p],F.prototype,"clearState",1);s([p],F.prototype,"setRotation",1);s([p],F.prototype,"resetRotation",1);s([p],F.prototype,"resetOutputRotation",1);s([p],F.prototype,"resetFlip",1);s([p],F.prototype,"updateFlip",1);s([p],F.prototype,"setOutputRotation",1);s([p],F.prototype,"flipHorizontally",1);s([p],F.prototype,"flipVertically",1);s([p],F.prototype,"dispose",2);s([h],F.prototype,"flipCenter",1);s([h],F.prototype,"isFlippedHorizontal",1);s([h],F.prototype,"isFlippedVertical",1);s([h],F.prototype,"identifier",1);s([h],F.prototype,"height",1);s([h],F.prototype,"width",1);s([h],F.prototype,"position",1);s([h],F.prototype,"ratio",1);s([h],F.prototype,"size",1);s([h],F.prototype,"x",1);s([h],F.prototype,"y",1);s([h],F.prototype,"lockResolution",1);s([h],F.prototype,"forceDimensions",1);s([h],F.prototype,"selectedCrop",1);s([h],F.prototype,"rotationInDegrees",1);s([h],F.prototype,"outputRotation",1);var al=class{constructor(t){this.transforms={output:JSON.stringify(be.IDENTITY),preview:JSON.stringify(be.IDENTITY)};this.setFrameOpacity=t=>{this.frameOpacity=t;if(this.entered&&this.editor.frameToolStore.identifier!=="identity"){this.editor.frameToolStore.changeOpacity(0)}};this.setOverlayOpacity=t=>{this.overlayOpacity=t;if(this.entered&&this.editor.overlayToolStore.identifier!=="identity"){this.editor.overlayToolStore.changeOpacity(0)}};this.editor=t;this.overlayOpacity=0;this.frameOpacity=0;this.entered=false}onLeave(){const{flipHorizontally:t,flipVertically:e,rotation:o,outputRotation:r}=this.transformToolStore.rotateFlipState;this.entered=false;if(this.editor.overlayToolStore.identifier!=="identity"){this.editor.overlayToolStore.changeOpacity(this.overlayOpacity)}if(this.editor.frameToolStore.identifier!=="identity"){this.editor.frameToolStore.changeOpacity(this.frameOpacity)}this.editor.engine.setWatermarkOpacity(1);const n=this.editor.previewToWorld(new g(this.transformToolStore.leftTopRespectFlip).add(new g(this.transformToolStore.rightBottomRespectFlip)).divide(2).add(new g(this.transformToolStore.unRotatedDefaults.cropMaskPosition)),true);const a=this.engineMediator.preview.container;const{outputContainer:l}=this.editor;l.setResolution(I(this.transformToolStore.localOutputImageSize));l.setData({flipVertically:e,flipHorizontally:t});const c=a.getScale();this.editor.overlayToolStore.correctOverlayFlip();this.saveTransforms();let d=1;if(this.transformToolStore.lockResolution){const{cropMaskSize:v,defaultImageSize:y}=this.transformToolStore;const x=this.transformToolStore.maxCropMaskSize;const C={height:v.height*y.height/x.height,width:v.width*y.width/x.width};d=C.width/this.transformToolStore.localOutputImageSize.width}const u=Math.abs(c.x);const m=d/(u/this.transformToolStore.defaultScale);const f={x:m,y:m};const b=-(o-r);l.setTransform({scale:f,position:n,rotation:b});this.editor.engineMediator.preview.updateTransform(0,false);this.editor.scale.setInitialTransform();this.editor.spriteStore.updateCanvasControls();this.editor.focusToolStore.updateCanvasControls()}resetTransforms(t){this.transforms=t}onEnter(){this.entered=true;if(this.editor.overlayToolStore.identifier!=="identity"){this.overlayOpacity=this.editor.overlayToolStore.opacity;this.editor.overlayToolStore.changeOpacity(0)}if(this.editor.frameToolStore.identifier!=="identity"){this.frameOpacity=this.editor.frameToolStore.opacity;this.editor.frameToolStore.changeOpacity(0)}this.editor.engine.setWatermarkOpacity(0);this.editor.scale.setScaleToDefault();const t=this.engineMediator.preview.container;const{outputContainer:e}=this.editor;const o=JSON.parse(this.transforms.preview);e.setResolution(I(this.transformToolStore.defaultImageSize));t.setTransform(o);e.setTransform(JSON.parse(this.transforms.output));const r=o.scale;e.setData({flipVertically:false,flipHorizontally:false});this.transformToolStore.transformStore.updateFlip({flipVertically:r.y<0,flipHorizontally:r.x<0});this.engineMediator.preview.savePreviewTransform(o);const{scale:n}=this.engineMediator.preview.calculateTransform();this.editor.scale.setInitialTransform(n.x)}rotateOutputContainer(t,e=true){const{width:o,height:r}=this.editor.engineMediator.image.container.getBounds();const n=Pc(t)?{width:r,height:o}:{width:o,height:r};this.editor.outputContainer.rotate(t,n);this.transformToolStore.transformStore.setOutputRotation(this.editor.outputContainer.getRotation());const{rotation:a}=this.transformToolStore.rotateFlipState;this.engineMediator.preview.updateTransform(a);rt(()=>{this.editor.scale.setInitialTransform();const l=this.getScaleWithFlip(a);this.engineMediator.preview.container.setScale(l);this.transformToolStore.setCropDefaults(true);this.transformToolStore.updateCropMask()});if(e){this.editor.render()}}applyPreviewTransform(){const{rotation:t,flipHorizontally:e,flipVertically:o}=this.transformToolStore.rotateFlipState;const r=this.editor.scale.getPositionWithOffset();const n=this.getScaleWithFlip();let a=t;if(e){a=As(a)}if(o){a=As(a)}const l={position:r,rotation:a,scale:n};this.engineMediator.preview.savePreviewTransform(l);this.engineMediator.preview.container.setTransform(l)}getScaleWithFlip(t=this.transformToolStore.rotateFlipState.rotation){const{flipHorizontally:e,flipVertically:o}=this.transformToolStore.rotateFlipState;const r=e?-1:1;const n=o?-1:1;const a=this.editor.scale.calculateScale(t);return{x:a*r,y:a*n}}saveTransforms(){const t=JSON.stringify(this.engineMediator.preview.container.getTransform());const e=JSON.stringify(this.editor.outputContainer.getTransform());this.transforms={preview:t,output:e}}saveTransformsBasedOnFlip(){const t=this.engineMediator.preview.container.getTransform();const{scale:e}=t;const{flipVertically:o,flipHorizontally:r}=this.editor.outputContainer.getData();const n=JSON.stringify(this.editor.outputContainer.getTransform());this.transforms={preview:JSON.stringify({...t,scale:{x:r?-e.x:e.x,y:o?-e.y:e.y}}),output:n}}get engineMediator(){return this.editor.engineMediator}get transformToolStore(){return this.editor.transformToolStore}};var ll=class{constructor(t){this.store=t;this.initialState={};this.state={};this.dispose=()=>{this.initialState=null;this.state=null}}init(){this.initialState=this.store.serializableState;this.state={...this.initialState}}trackChanges(){this.state=this.store.serializableState}isEqual(){return(0,ct.default)(this.state,this.initialState)}hasChanges(){return!this.isEqual()}};var Zp="identity";var Ai=class{constructor(t){this.unRotatedDefaults={cropMaskPosition:{x:0,y:0},scale:1};this.defaultAngle=0;this.dragMode=T.box(false);this.minCropSize=0;this.transformHistory=new ll(this);this.defaults={cropMaskPosition:{x:0,y:0},maxCropMaskSize:{width:0,height:0},imageSize:{width:0,height:0},scale:1};this.localOutputSize={width:0,height:0};this.checkIfTransformThumbnailExits=t=>{if(!t.trim())return false;let e=this.editor.configStore.config.assetBaseUrl;const{length:o}=e;if(e[o-1]!=="/"){e+="/"}if(`${e}transform`===t){return false}const r=new Image;try{r.src=t;return true}catch(n){return false}};this.reset=()=>{this.transformStore.resetRotation();this.transformStore.resetOutputRotation();this.transformStore.resetFlip();this.resetCrop();this.editor.spriteStore.correctTextFlip();this.editor.overlayToolStore.correctOverlayFlip();this.setDefaultAngle(0);const t=this.editor.outputContainer.getRotation();if(t!==0){this.engineMediator.output.applyNewImageTransform()}this.engineMediator.output.container.setData({flipHorizontally:false,flipVertically:false});this.engineMediator.preview.updateTransform();this.editor.scale.setInitialTransform();this.setCropDefaults();this.applyInitialCrop();this.editor.render();this.trackChanges()};this.changeLocalOutputSize=t=>{this.localOutputSize.height=Math.round(t.height);this.localOutputSize.width=Math.round(t.width);this.editor.configStore.events.onCropDimensionsChanged({width:Math.round(t.width),height:Math.round(t.height)})};this.changeDefaultScale=t=>{this.defaults.scale=t};this.changeLocalOutputHeight=t=>{this.localOutputSize.height=Math.round(t)};this.changeLocalOutputWidth=t=>{this.localOutputSize.width=Math.round(t)};this.changeLockResolution=()=>{this.transformStore.changeLockResolution();this.trackChanges()};this.rotateClockwise=()=>{const t=this.editor.outputContainer.getRotation();const e=this.isFlippedVertical?Ds:Es;this.rotateOutputContainer(e(t))};this.rotateAntiClockwise=()=>{const t=this.editor.outputContainer.getRotation();const e=this.isFlippedVertical?Es:Ds;this.rotateOutputContainer(e(t))};this.flipHorizontally=(t=true)=>{this.transformStore.flipHorizontally();this.editor.spriteStore.reverseTextHorizontally(this.transformStore.isFlippedHorizontal);this.transformRender(t);if(t){this.trackChanges()}};this.flipVertically=(t=true)=>{this.transformStore.flipVertically();this.editor.spriteStore.reverseTextVertically(this.transformStore.isFlippedVertical);this.transformRender(t);if(t){this.trackChanges()}};this.applyDefaultCrop=(t=false)=>{if(this.identifier==="identity"){const{identifier:e}=this.getMatchingItem();this.changeIdentifier(e,t)}};this.updateCropMask=()=>{this.changeIdentifier(this.identifier,true)};this.onLeftTop=({x:t,y:e})=>{const o=this.getRatio();const r=this.rightBottom;const{minCropMaskSize:n,maxCropMaskSize:a}=this;const l=Math.min(Math.max(0,t),r.x-n.width);const c=Math.min(Math.max(0,e),r.y-n.height);const d=r.x-l;const u=r.y-c;const m={width:Math.max(this.minCropSize,Math.min(d,a.width-l)),height:Math.max(this.minCropSize,Math.min(u,a.height-c))};if(o==="*"){if(this.changePosition({x:l,y:c})){this.changeCropAndOutputSize(m)}}else{const f=this.proportionalSize(o,m);const b=new g(r).subtract({x:f.width,y:f.height});if(this.changePosition(b)){this.changeCropAndOutputSize(f,o)}}};this.onLeftBottom=({x:t,y:e})=>{const o=this.getRatio();const r=this.rightTop;const{minCropMaskSize:n,maxCropMaskSize:a}=this;const l=Math.min(Math.max(0,t),r.x-n.width);const c=Math.max(0,e,r.y+n.height);const d=r.x-l;const u=c-r.y;const m={width:Math.max(1,Math.min(d,a.width-l)),height:Math.max(1,Math.min(u,a.height-r.y))};if(o==="*"){if(this.changePositionX(l)){this.changeCropAndOutputSize(m)}}else{const f=this.proportionalSize(o,m);if(this.changePositionX(r.x-f.width)){this.changeCropAndOutputSize(f,o)}}};this.onRightTop=({x:t,y:e})=>{const o=this.getRatio();const r=this.leftBottom;const{minCropMaskSize:n,maxCropMaskSize:a}=this;const l=Math.max(0,t,r.x+n.width);const c=Math.min(Math.max(0,e),r.y-n.height);const d=l-r.x;const u=r.y-c;const m={width:Math.max(1,Math.min(d,a.width-r.x)),height:Math.max(1,Math.min(u,a.height-c))};if(o==="*"){if(this.changePositionY(c)){this.changeCropAndOutputSize(m)}}else{const f=this.proportionalSize(o,m);if(this.changePositionY(r.y-f.height)){this.changeCropAndOutputSize(f,o)}}};this.onRightBottom=({x:t,y:e})=>{const o=this.getRatio();const r=this.leftTop;const{minCropMaskSize:n,maxCropMaskSize:a}=this;const l=Math.max(0,t,r.x+n.width);const c=Math.max(0,e,r.y+n.height);const d=l-r.x;const u=c-r.y;const m={width:Math.max(1,Math.min(d,a.width-r.x)),height:Math.max(1,Math.min(u,a.height-r.y))};if(o==="*"){this.changeCropAndOutputSize(m)}else{const f=this.proportionalSize(o,m);this.changeCropAndOutputSize(f,o)}};this.onPixelWidth=t=>{const e=JSON.stringify(I(this.localOutputSize));const o=this.entityManager.items.find(n=>n.identifier===this.identifier);const r=this.defaults.imageSize;if(o&&o.ratio){let n=t;let a=this.localOutputSize.height;let{ratio:l}=o;if(l==="*"&&this.lockResolution){l=this.localOutputSize.width/this.localOutputSize.height}if(l==="*"&&!this.lockResolution){n=Math.max(Math.min(t,r.width),this.minCropSize);this.changeLocalOutputWidth(n);this.editor.configStore.events.onCropDimensionsChanged({width:Math.round(n),height:Math.round(a)})}else{const c=Ai.placeCropMask(l,r);n=Math.max(Math.min(n,c.width),this.minCropSize);a=n/l;this.changeLocalOutputSize({height:a,width:n})}if(!this.lockResolution){this.updatePreviewSizeWRTImageSize()}this.checkAndAddSnapshot(JSON.parse(e));return Math.round(n)}return t};this.onPixelHeight=t=>{const e=JSON.stringify(I(this.localOutputSize));const o=this.entityManager.items.find(n=>n.identifier===this.identifier);const r=this.defaults.imageSize;if(o&&o.ratio){let n=t;let a=this.localOutputSize.width;let{ratio:l}=o;if(l==="*"&&this.lockResolution){l=this.localOutputSize.width/this.localOutputSize.height}if(l==="*"&&!this.lockResolution){n=Math.max(Math.min(t,r.height),this.minCropSize);this.changeLocalOutputHeight(n);this.editor.configStore.events.onCropDimensionsChanged({width:Math.round(a),height:Math.round(n)})}else{const c=Ai.placeCropMask(l,r);n=Math.max(Math.min(n,c.height),this.minCropSize);a=n*l;this.changeLocalOutputSize({height:n,width:a})}if(!this.lockResolution){this.updatePreviewSizeWRTImageSize()}this.checkAndAddSnapshot(JSON.parse(e));return Math.round(n)}return t};this.dispose=()=>{if(this.transformStore){this.transformStore.dispose();this.transformStore=null}if(this.transformHistory){this.transformHistory.dispose();this.transformHistory=null}this.editor=null;this.dragMode=null;this.selectedCategory=null;this.defaults=null;this.localOutputSize=null;this.rect=null;this.transformations=null;this.entityManager=null};this.setFrameOpacity=t=>{this.transformations.setFrameOpacity(t)};this.setOverlayOpacity=t=>{this.transformations.setOverlayOpacity(t)};this.closestRatioReducer=t=>(e,o)=>{if(o===null)return-1;return Math.abs(t-e.ratio)<Math.abs(t-o.ratio)?-1:1};this.closestDimensionsReducer=t=>(e,o)=>{if(o===null)return-1;const r=Math.abs(e.dimensions.x/e.dimensions.y);const n=Math.abs(o.dimensions.x/o.dimensions.y);if(r===n){return e.dimensions.x*e.dimensions.y>o.dimensions.x*o.dimensions.y?-1:1}return Math.abs(t-r)<Math.abs(t-n)?-1:1};this.getMatchingItem=()=>{const t=this.entityManager.items.findIndex(c=>c.identifier==="imgly_transform_common_custom");if(t!==-1)return this.entityManager.items[t];const e=this.entityManager.items.findIndex(c=>c.ratio==="*");if(e!==-1)return this.entityManager.items[e];const o=I(this.editor.outputContainer.getResolution());const r=Math.abs(o.width/o.height);const[n]=this.entityManager.items.filter(c=>c.ratio&&typeof c.ratio==="number").sort(this.closestRatioReducer(r));const[a]=this.entityManager.items.filter(c=>c.dimensions&&!c.ratio).sort(this.closestDimensionsReducer(r));if(!n||!a||!n.ratio&&!a.dimensions){return this.entityManager.items[0]}if(!a||!a.dimensions)return n;if(!n||!n.ratio)return a;const l=Math.abs(a.dimensions.x/a.dimensions.y);if(l===n.ratio)return n;return Math.abs(r-n.ratio)<Math.abs(r-l)?n:a};this.getTransform=t=>{let e=this.entityManager.items.find(o=>o.identifier===t);if(!e){e=this.getMatchingItem()}return e};this.editor=t;this.selectedCategory=Zp;this.transformStore=new F(t,this.defaults);this.transformations=new al(t);const{enableRotation:e,enableFlip:o,...r}=this.config;const n=this.editor.assetProvider.getAssets("transform");this.entityManager=new et(n,{...r,locale:{...this.locale.items,...this.locale.categories},getAssetPath:this.editor.getAssetPath("transform")});this.rect=new tt(this.editor,this.transformStore,"topLeft",false,false);this.rectForUi=new tt(this.editor,this.transformStore,"topLeft",false,true);this.minCropSize=this.editor.configStore.measurements.crop.minSize}static inRadians(t){return t*Math.PI/180}static placeCropMask(t,e){if(e.height*t>e.width){const r=e.width/t;return{height:r,width:e.width,yChanged:true}}const o=e.height*t;return{height:e.height,width:o,yChanged:false}}changeIdentifier(t,e=false){this.transformStore.changeIdentifier(t);const o=this.getCropMask(t,this.defaults.imageSize);if(o){this.transformStore.changeRatio(o.ratio);this.changeLocalOutputSize(o);this.updatePreviewSizeWRTImageSize();if(o.yChanged!==void 0){this.updateInitialCropMaskPosition(o.yChanged)}if(o.dimensions){this.changeLocalOutputSize({width:o.dimensions.x,height:o.dimensions.y})}if(e){this.trackChanges()}}}setDragMode(t){this.dragMode.set(t)}getCropMask(t,e){const o=this.getTransform(t);if(o){const{ratio:r,forceDimensions:n,lockDimensions:a,dimensions:l=null}=o;if(n){this.transformStore.changeForceDimensions(n)}if(a){this.transformStore.changeLockResolution(a)}if(r){switch(r){case"*":this.changePosition({x:0,y:0});return{...e,yChanged:void 0,ratio:"*",dimensions:l};default:return{...Ai.placeCropMask(o.ratio,e),ratio:o.ratio,dimensions:l}}}else{const{x:c,y:d}=o.dimensions;return{...Ai.placeCropMask(c/d,e),ratio:null,dimensions:l}}}return null}setCropDefaults(t=false){const e=this.editor.outputContainer.getResolution();this.setDefaultImageSize(e);const o=this.editor.getPreviewSize();const{position:r}=this.editor.engineMediator.preview.previewTransformWithoutDpr;this.setMaxCropSize(o);this.setDefaultCropPosition({x:r.x-o.width/2,y:r.y-o.height/2});this.changeDefaultScale(this.editor.scale.defaultScale);if(!t){this.unRotatedDefaults.cropMaskPosition=this.defaultCropMaskPosition;this.unRotatedDefaults.scale=this.defaultScale}}setDefaultImageSize(t){this.defaults.imageSize={...I(t)};if(!this.lockResolution){this.localOutputSize={...I(t)}}}setMaxCropSize(t){this.defaults.maxCropMaskSize.height=t.height;this.defaults.maxCropMaskSize.width=t.width}setDefaultCropPosition(t){this.defaults.cropMaskPosition.x=t.x;this.defaults.cropMaskPosition.y=t.y}resetCrop(){this.transformStore.clearState();this.transformStore.changeIdentifier("identity")}toggleCategorySelection(t){this.selectedCategory=this.selectedCategory===t?Zp:t}pureReset(){this.transformStore.resetRotation();this.transformStore.resetOutputRotation();this.transformStore.resetFlip();this.editor.spriteStore.correctTextFlip();this.editor.overlayToolStore.correctOverlayFlip();this.setDefaultAngle(0);this.engineMediator.output.applyNewImageTransform();this.engineMediator.output.container.setData({flipHorizontally:false,flipVertically:false});this.engineMediator.preview.updateTransform();this.editor.scale.setInitialTransform();this.setCropDefaults();this.applyInitialCrop();const t=JSON.stringify(this.engineMediator.preview.container.getTransform());const e=JSON.stringify(this.editor.outputContainer.getTransform());this.transformations.resetTransforms({preview:t,output:e})}changePosition(t){return this.transformStore.changePosition(t,this.defaults.maxCropMaskSize)}changePositionX(t){return this.transformStore.changePositionX(t,this.defaults.maxCropMaskSize.width)}changePositionY(t){return this.transformStore.changePositionY(t,this.defaults.maxCropMaskSize.height)}changeCropAndOutputSize({width:t,height:e},o,r=true){this.transformStore.changeWidth(t);this.transformStore.changeHeight(e);if(!this.lockResolution){const{height:n,width:a}=this.defaults.maxCropMaskSize;const{height:l,width:c}=this.defaults.imageSize;let d=l/n*e;const u=c/a*t;if(o){d=u/o}if(r){this.editor.configStore.events.onCropDimensionsChanged({width:Math.round(u),height:Math.round(d)})}if(e>=this.minCropSize){this.changeLocalOutputHeight(d)}if(t>=this.minCropSize){this.changeLocalOutputWidth(u)}}}transformRender(t=true){this.transformations.applyPreviewTransform();if(t){this.editor.render()}}addSnapshot(){if(this.transformHistory.isEqual())return;this.editor.addSnapshot({["transform"]:this.serializableState},"edit","Transform edit")}trackChanges(){this.transformHistory.trackChanges()}get serializableState(){const{flipHorizontally:t,flipVertically:e}=this.rotateFlipState;const{identifier:o,rotationInDegrees:r}=this;const n=Ts(r);const a=Ms(Is(this.editor.engineMediator.output.container.getRotation())+r);const{start:l,end:c}=this.convertUIToOperationOptions(n,a);return{flipHorizontally:t,flipVertically:e,rotation:n,start:l,end:c,identifier:o,outputRotation:a}}getStartEndForOperation(t){const{leftTop:e,rightBottom:o,maxCropMaskSize:r}=this;const n=e.y;const a=e.x;const l=o.x;const c=o.y;switch(t){case 270:return{leftTop:{x:r.height-c,y:a},rightBottom:{x:r.height-n,y:l}};case 180:return{leftTop:{x:r.width-l,y:r.height-c},rightBottom:{x:r.width-a,y:r.height-n}};case 90:return{leftTop:{x:n,y:r.width-l},rightBottom:{x:c,y:r.width-a}};default:return{leftTop:{x:a,y:n},rightBottom:{x:l,y:c}}}}getStartEndForUI(t,e,o){const{maxCropMaskSize:r}=this;const n=e.y;const a=e.x;const l=o.x;const c=o.y;switch(t){case 90:return{leftTop:{x:r.width-c,y:a},rightBottom:{x:r.width-n,y:l}};case 180:return{leftTop:{x:r.width-l,y:r.height-c},rightBottom:{x:r.width-a,y:r.height-n}};case 270:return{leftTop:{x:n,y:r.height-l},rightBottom:{x:c,y:r.height-a}};default:return{leftTop:{x:a,y:n},rightBottom:{x:l,y:c}}}}convertOperationOptionsToUI({start:t,end:e,rotation:o,outputRotation:r}){const n=r===90||r===270;const a=n?g.fromSize(this.defaultImageSize).swapped:g.fromSize(this.defaultImageSize);const l=Math.cos(o);const c=Math.sin(o);const d=this.calculateScale(o);const u=new g(Math.min(t.x,e.x),Math.min(t.y,e.y));const m=new g(Math.max(t.x,e.x),Math.max(t.y,e.y));const f=m.subtract(u).divide(2);const b=u.add(f).multiply(a);const v=b.subtract(a.multiply(.5));const y=new g(v.x*l-v.y*c,v.x*c+v.y*l).multiply(d);const x=a.multiply(.5).add(y);const C=x.divide(a);const D=C.subtract(f.multiply(d));const z=C.add(f.multiply(d));const L=n?g.fromSize(this.maxCropMaskSize).swapped:g.fromSize(this.maxCropMaskSize);const R=D.multiply(L);const P=z.multiply(L);const{leftTop:V,rightBottom:U}=this.getStartEndForUI(r,R,P);return{start:new g(V),end:new g(U)}}convertUIToOperationOptions(t,e){const o=e===90||e===270;const r=o?g.fromSize(this.defaultImageSize).swapped:g.fromSize(this.defaultImageSize);const n=o?g.fromSize(this.maxCropMaskSize).swapped:g.fromSize(this.maxCropMaskSize);const a=Math.cos(-t);const l=Math.sin(-t);const c=this.calculateScale(t,o);const{leftTop:d,rightBottom:u}=this.getStartEndForOperation(e);const m=new g(d).divide(n);const f=new g(u).divide(n);const b=f.subtract(m).divide(2);const v=m.add(b).multiply(r);const y=v.subtract(r.multiply(.5));const x=new g(y.x*a-y.y*l,y.x*l+y.y*a).divide(c);const C=r.multiply(.5).add(x);const D=C.divide(r);const z=D.subtract(b.divide(c));const L=D.add(b.divide(c));return{start:z,end:L}}calculateScale(t,e=false){const o=e?g.fromSize(this.defaultImageSize).swapped:g.fromSize(this.defaultImageSize);const r=new g(Math.abs(o.x*Math.cos(t))+Math.abs(o.y*Math.sin(t)),Math.abs(o.x*Math.sin(t))+Math.abs(o.y*Math.cos(t)));const n=o.subtract(r.clone()).divide(2).abs;return n.y>n.x?n.y*2/o.y+1:n.x*2/o.x+1}updateStateFromSerialization(t){this.transformStore.resetRotation();this.transformStore.resetOutputRotation();this.transformStore.resetFlip();this.setDefaultAngle(0);if(this.editor.outputContainer.getRotation()!==0){this.engineMediator.output.applyNewImageTransform()}this.engineMediator.output.container.setData({flipHorizontally:false,flipVertically:false});this.engineMediator.preview.updateTransform();this.editor.scale.setInitialTransform();this.setCropDefaults();this.applyInitialCrop();const e=Math.round(Is(t.rotation));this.transformStore.setRotation(e>180?e-360:e);this.transformations.rotateOutputContainer(Ts(Ms(t.outputRotation||0)));if(t.identifier){this.transformStore.changeIdentifier(t.identifier)}if(t.start&&t.end){if(t.end.x===0||t.end.y===0){t.end.x=1;t.end.y=1}const{start:o,end:r}=this.convertOperationOptionsToUI({start:new g(t.start),end:new g(t.end),rotation:t.rotation,outputRotation:t.outputRotation});this.changePositionX(o.x);this.changePositionY(o.y);const n=r.x-o.x;const a=r.y-o.y;this.transformStore.changeSize({width:n,height:a});const{maxCropMaskSize:l,imageSize:c}=this.defaults;const d={height:a*c.height/l.height,width:n*c.width/l.width};this.changeLocalOutputSize(d)}if(t.flipHorizontally){this.flipHorizontally(false)}if(t.flipVertically){this.flipVertically(false)}this.editor.overlayToolStore.correctOverlayFlip()}setDefaultAngle(t){this.defaultAngle=t}updateCanvasControls(t){const e=I(this.cropMaskPosition);const o=I(this.cropMaskSize);const r=I(this.defaults.maxCropMaskSize);this.changeCropAndOutputSize({height:r.height*o.height/t.height,width:r.width*o.width/t.width},void 0,false);this.changePosition({y:r.height*e.y/t.height,x:r.width*e.x/t.width})}onLeave(){this.transformations.onLeave()}onEnter(){this.transformations.onEnter();this.transformHistory.init()}saveTransforms(){this.transformations.saveTransforms()}saveTransformsBasedOnFlip(){this.transformations.saveTransformsBasedOnFlip()}setRotation(t){this.transformStore.setRotation(t);this.transformRender()}async rotateOutputContainer(t,e=true){this.setDragMode(true);this.transformations.rotateOutputContainer(t,e);await this.editor.wait();this.setDragMode(false)}applyInitialCrop(){const{identifier:t}=this.getMatchingItem();this.changeIdentifier(t,false)}clickableCanvas(t){this.editor.clickableCanvas(t)}proportionalSize(t,e,o=this.defaults.maxCropMaskSize,r=this.minCropSize){let n=e.height*t;let{height:a}=e;if(n>o.width||n<r||a<r){n=e.width;a=e.width/t}return{width:Math.round(n),height:Math.round(a)}}checkAndAddSnapshot(t){const e=I(this.localOutputSize);if(t.width!==e.width||t.height!==e.height){this.trackChanges()}}updateInitialCropMaskPosition(t){const{cropMaskSize:e}=this;const o=this.defaults.maxCropMaskSize;if(t){this.changePosition({x:0,y:Math.abs(o.height-e.height)/2})}else{this.changePosition({x:Math.abs(o.width-e.width)/2,y:0})}}updatePreviewSizeWRTImageSize(){const t=I(this.localOutputSize);const e=I(this.defaults.imageSize);const o=I(this.defaults.maxCropMaskSize);const r={height:o.height*t.height/e.height,width:o.width*t.width/e.width};this.transformStore.changeSize(r)}getScaleWithFlip(t=this.rotateFlipState.rotation){return this.transformations.getScaleWithFlip(t)}get cropState(){return this.transformStore.selectedCrop}get identifier(){return this.transformStore.identifier}get ratio(){return this.transformStore.ratio}get height(){return this.transformStore.height}get width(){return this.transformStore.width}get localOutputImageSize(){return this.localOutputSize}get localOutputHeight(){return this.localOutputSize.height}get localOutputWidth(){return this.localOutputSize.width}get lockResolution(){return this.transformStore.lockResolution}get forceDimensions(){return this.transformStore.forceDimensions}get rotationInDegrees(){return this.transformStore.rotationInDegrees}get outputRotation(){return this.transformStore.outputRotation}get isDragMode(){return this.dragMode.get()}get rotateFlipState(){const{flipHorizontally:t,flipVertically:e,rotationInDegrees:o,outputRotation:r}=this.transformStore.state;return{flipHorizontally:t,flipVertically:e,rotation:Ai.inRadians(o),outputRotation:r}}get selectedCategoryIdentifier(){return this.selectedCategory}get categories(){return this.entityManager.categories}get items(){return this.entityManager.items}get config(){return this.editor.configStore.config["transform"]}get locale(){return this.editor.configStore.locale["transform"]}get isOptionSelected(){return this.identifier!=="identity"}get leftTop(){return this.rect.leftTop}get leftBottom(){return this.rect.leftBottom}get rightTop(){return this.rect.rightTop}get rightBottom(){return this.rect.rightBottom}get isFlippedHorizontal(){return this.transformStore.isFlippedHorizontal}get isFlippedVertical(){return this.transformStore.isFlippedVertical}get leftTopRespectFlip(){return this.rectForUi.leftTop}get leftBottomRespectFlip(){return this.rectForUi.leftBottom}get rightTopRespectFlip(){return this.rectForUi.rightTop}get rightBottomRespectFlip(){return this.rectForUi.rightBottom}get cropMaskPosition(){return this.transformStore.position}get cropMaskSize(){return this.transformStore.size}get state(){return this.transformStore.state}get defaultImageSize(){return this.defaults.imageSize}get maxCropMaskSize(){return this.defaults.maxCropMaskSize}get minCropMaskSize(){const t=this.getRatio();if(t==="*"||t===1){return{width:this.minCropSize,height:this.minCropSize}}if(t>1){return{width:this.minCropSize*t,height:this.minCropSize}}return{width:this.minCropSize,height:this.minCropSize*t}}get defaultCropMaskPosition(){return this.defaults.cropMaskPosition}get defaultScale(){return this.defaults.scale}get engineMediator(){return this.editor.engineMediator}getRatio(){const t=this.getTransform(this.identifier);if(t){if(Object.prototype.hasOwnProperty.call(t,"ratio")){if(this.lockResolution){return this.localOutputWidth/this.localOutputHeight}return t.ratio}const{x:e,y:o}=t.dimensions;return e/o}return"*"}};var w=Ai;s([T],w.prototype,"selectedCategory",2);s([T],w.prototype,"defaults",2);s([T],w.prototype,"localOutputSize",2);s([p],w.prototype,"changeIdentifier",1);s([p],w.prototype,"setDragMode",1);s([p],w.prototype,"setCropDefaults",1);s([p],w.prototype,"setDefaultImageSize",1);s([p],w.prototype,"setMaxCropSize",1);s([p],w.prototype,"setDefaultCropPosition",1);s([p],w.prototype,"resetCrop",1);s([p],w.prototype,"toggleCategorySelection",1);s([p],w.prototype,"pureReset",1);s([p],w.prototype,"reset",2);s([p],w.prototype,"changePosition",1);s([p],w.prototype,"changePositionX",1);s([p],w.prototype,"changePositionY",1);s([p],w.prototype,"changeCropAndOutputSize",1);s([p],w.prototype,"onLeave",1);s([p],w.prototype,"onEnter",1);s([p],w.prototype,"changeLocalOutputSize",2);s([p],w.prototype,"changeDefaultScale",2);s([p],w.prototype,"changeLocalOutputHeight",2);s([p],w.prototype,"changeLocalOutputWidth",2);s([p],w.prototype,"changeLockResolution",2);s([p],w.prototype,"setRotation",1);s([p],w.prototype,"rotateClockwise",2);s([p],w.prototype,"rotateAntiClockwise",2);s([p],w.prototype,"rotateOutputContainer",1);s([p],w.prototype,"flipHorizontally",2);s([p],w.prototype,"flipVertically",2);s([p],w.prototype,"applyDefaultCrop",2);s([p],w.prototype,"applyInitialCrop",1);s([p],w.prototype,"updateCropMask",2);s([p],w.prototype,"clickableCanvas",1);s([p],w.prototype,"onLeftTop",2);s([p],w.prototype,"onLeftBottom",2);s([p],w.prototype,"onRightTop",2);s([p],w.prototype,"onRightBottom",2);s([p],w.prototype,"proportionalSize",1);s([p],w.prototype,"onPixelWidth",2);s([p],w.prototype,"onPixelHeight",2);s([p],w.prototype,"updateInitialCropMaskPosition",1);s([p],w.prototype,"updatePreviewSizeWRTImageSize",1);s([p],w.prototype,"dispose",2);s([h],w.prototype,"cropState",1);s([h],w.prototype,"identifier",1);s([h],w.prototype,"ratio",1);s([h],w.prototype,"height",1);s([h],w.prototype,"width",1);s([h],w.prototype,"localOutputImageSize",1);s([h],w.prototype,"localOutputHeight",1);s([h],w.prototype,"localOutputWidth",1);s([h],w.prototype,"lockResolution",1);s([h],w.prototype,"forceDimensions",1);s([h],w.prototype,"rotationInDegrees",1);s([h],w.prototype,"outputRotation",1);s([h],w.prototype,"isDragMode",1);s([h],w.prototype,"rotateFlipState",1);s([h],w.prototype,"selectedCategoryIdentifier",1);s([h],w.prototype,"categories",1);s([h],w.prototype,"items",1);s([h],w.prototype,"config",1);s([h],w.prototype,"locale",1);s([h],w.prototype,"isOptionSelected",1);s([h],w.prototype,"leftTop",1);s([h],w.prototype,"leftBottom",1);s([h],w.prototype,"rightTop",1);s([h],w.prototype,"rightBottom",1);s([h],w.prototype,"isFlippedHorizontal",1);s([h],w.prototype,"isFlippedVertical",1);s([h],w.prototype,"leftTopRespectFlip",1);s([h],w.prototype,"leftBottomRespectFlip",1);s([h],w.prototype,"rightTopRespectFlip",1);s([h],w.prototype,"rightBottomRespectFlip",1);s([h],w.prototype,"cropMaskPosition",1);s([h],w.prototype,"cropMaskSize",1);s([h],w.prototype,"state",1);s([h],w.prototype,"defaultImageSize",1);s([h],w.prototype,"maxCropMaskSize",1);s([h],w.prototype,"minCropMaskSize",1);s([h],w.prototype,"defaultCropMaskPosition",1);s([h],w.prototype,"defaultScale",1);var Qp=ui(Mc());var Cy={};var cl="none";var wy={position:{x:0,y:0},rotation:0};var dr=class{constructor(t){this.state=T.map(Cy);this.selectedId=T.box(cl);this.editMode=T.box(false);this.dragMode=T.box(false);this.minLength=0;this.counter=0;this.addSticker=async(t,e=true)=>{await this.addStickerAsync(t,e)};this.addStickerAsync=async({spriteId:t,state:e,transform:o},r=true)=>{return new Promise((n,a)=>{o=this.getInitialTransform(o);const{identifier:l}=e;const c=this.editor.orderHelper.addSprite(l);this.editor.engine.addStickerFromAssets(l,this.editor.engineMediator.image.container,c).then(async d=>{if(t){d.setData({id:t})}const u=d.getID();this.container[u]=d;this.editor.orderHelper.renameSprite(l,u);const m=this.getSize(u);m.width*=d.getScale().x;m.height*=d.getScale().y;d.setPivot(.5,.5);let f;if(o.scale){f=o.scale}else if(o.size){f={x:o.size.width/m.width,y:o.size.height/m.height}}else{const x=this.editor.shortestOutputSide*.4;const C=dr.magnitude(x)/dr.sizeMagnitude(d.getSizeInWorldSpace());f={x:C,y:C}}const{flipHorizontally:b,flipVertically:v}=this.editor.outputContainer.getData();d.setFlipHorizontally(b);d.setFlipVertically(v);d.setTransform({position:o.position,scale:f,rotation:o.rotation});if(e.flipHorizontally!==void 0){d.setFlipHorizontally(e.flipHorizontally!==b)}if(e.flipVertically!==void 0){d.setFlipVertically(e.flipVertically!==v)}this.setContainerProperties(u,{...e});const y=d.getData();this.setInitialSpriteState(u,"sticker");this.stickerToolStore.setState(u,{...y,identifier:l});await this.editor.renderPromise();if(r){this.setId(u);this.addSnapshot("add",this.stickerLocale.add)}n()}).catch(d=>{console.error(d);a()})})};this.addText=async(t,e=true)=>{await this.addTextAsync(t,e)};this.addTextAsync=({spriteId:t,state:e,transform:o},r=true)=>{return new Promise((n,a)=>{o=this.getInitialTransform(o);const l=this.editor.orderHelper.addSprite(e.identifier);const c=this.editor.shortestOutputSide;const d={fontIdentifier:e.identifier,text:e.text,width:e.width||c*.6,fontSize:e.fontSize||c*.1,lineHeight:e.lineHeight,alignment:e.alignment,textColor:e.textColor,backgroundColor:e.backgroundColor};this.editor.engine.addTextWithFontLoading(d,this.editor.engineMediator.image.container,l).then(async u=>{if(t){u.setData({id:t})}const m=u.getID();this.container[m]=u;this.editor.orderHelper.renameSprite(e.identifier,m);const{flipHorizontally:f,flipVertically:b}=this.editor.outputContainer.getData();u.setFlipHorizontally(f);u.setFlipVertically(b);u.setPivot(.5,.5);u.setPosition(o.position);u.setRotation(o.rotation);this.setInitialSpriteState(m,"text");const v=u.getData();this.textToolStore.setState(m,{...v});await this.editor.renderPromise();if(r){this.setId(m);this.addSnapshot("add",this.textLocale.add)}n()}).catch(u=>{console.error(u);a()})})};this.addTextDesign=async(t,e=true,o=false)=>{await this.addTextDesignAsync(t,e,o)};this.addTextDesignAsync=({spriteId:t,state:e,transform:o},r=true,n=false)=>{return new Promise((a,l)=>{o=this.getInitialTransform(o);const c=this.editor.orderHelper.addSprite(e.identifier);const d=this.editor.shortestOutputSide;const u={width:e.width||d*.6,text:e.text,color:e.color,inverted:e.isInverted,seed:e.seed,padding:e.padding};this.editor.engine.addTextDesignAsync(e.identifier,u,this.editor.engineMediator.image.container,c).then(async m=>{if(t){if(n){this.pureRemoveSprite(t);this.textDesignToolStore.state.delete(t)}m.setData({id:t})}const f=m.getID();this.container[f]=m;this.editor.orderHelper.renameSprite(e.identifier,f);const{flipHorizontally:b,flipVertically:v}=this.editor.outputContainer.getData();m.setFlipHorizontally(b);m.setFlipVertically(v);m.setPivot(.5,.5);m.setPosition(o.position);m.setRotation(o.rotation);this.setInitialSpriteState(f,"textdesign");const y=m.getData();this.textDesignToolStore.setState(f,{...y,identifier:e.identifier});await this.editor.renderPromise();if(r){this.setId(f);this.addSnapshot("add",this.textDesignLocale.add)}a()}).catch(m=>{console.error(m);l()})})};this.spriteLocalTransform=()=>{return{position:this.editor.previewToOutput(this.position),size:this.size,rotation:this.rotation}};this.clickableCanvas=t=>{this.editor.clickableCanvas(t)};this.setContainerProperties=(t,e,o=false)=>{this.container[t].setData(e);if(o){this.updatePositionAndSize()}this.editor.render()};this.setContainerPosition=(t,e)=>{this.container[t].setPosition(e)};this.pureRemoveSprite=t=>{this.editor.engine.removeContainer(this.container[t]);const e=this.container[t].getIndexInParent();if(e===-1){delete this.container[t];this.state.delete(t);this.editor.orderHelper.removeSprite(t);return true}return false};this.deleteSprite=(t=this.id)=>{const e=this.state.get(t);if(e.tool==="sticker"){this.stickerToolStore.delete()}else if(e.tool==="text"){this.textToolStore.delete()}else if(e.tool==="textdesign"){this.textDesignToolStore.delete()}};this.removeSprite=t=>{const e=this.pureRemoveSprite(t);if(e){this.selectLast();this.spriteSnapshot("delete");this.editor.render()}};this.addSnapshot=(t,e)=>{this.editor.addSnapshot(void 0,t,e)};this.spriteSnapshot=t=>{this.addSnapshot("edit",this.historyLocale[t])};this.addNewText=async(t,e)=>{if(this.textToolStore.doesTextAssetExist(e.identifier)){await this.addTextAsync({...t,state:e},false)}else{throw new ie(e.identifier)}};this.addNewTextDesign=async(t,e)=>{if(this.textDesignToolStore.doesTextDesignAssetExist(e.identifier)){await this.addTextDesignAsync({...t,state:e},false)}else{throw new ie(e.identifier)}};this.addNewSticker=async(t,e)=>{if(this.stickerToolStore.doesStickerAssetExist(e.identifier)){await this.addStickerAsync({...t,state:e},false)}else{throw new ie(e.identifier)}};this.getSpriteHistoryState=()=>{const t=I(this.textToolStore.state);const e=I(this.textDesignToolStore.state);const o={common:I(this.state),["sticker"]:I(this.stickerToolStore.state),["text"]:t,["textdesign"]:e,spriteIdList:Object.keys(this.container)};Object.keys(o.common).forEach(r=>{o.common[r].size=this.container[r].getSizeInWorldSpace();o.common[r].position=this.container[r].getPosition();o.common[r].order=this.container[r].getIndexInParent()});return o};this.updateStateFromSerialization=async(t,e,o)=>{if(e&&e.length){try{const r=await Promise.all(e.map(async({svg:n,raster:a,name:l,identifier:c})=>{const d=(n==null?void 0:n.data)?"image/svg+xml":a.type;const u=`data:${d};base64,${(n==null?void 0:n.data)||a.data}`;const m=await _n(u,150);return{stickerURI:u,thumbnailURI:m,name:l,type:d,identifier:c}}));await this.stickerToolStore.addCustomStickerAsset(r)}catch(r){this.editor.modalStore.hideModal();this.editor.modalStore.showInfoModal("stickerLoading")}}if(t.text){await this.textToolStore.loadFonts()}if(t.textdesign){await this.textDesignToolStore.loadFonts()}await this.updateStateByHistoryState(t.spriteIdList,t,o)};this.updateStateFromHistory=async t=>{const e=Object.keys(this.container);const o=e.filter(r=>t.spriteIdList.indexOf(r)===-1);o.forEach(r=>{this.pureRemoveSprite(r)});await this.updateStateByHistoryState(t.spriteIdList,t,0)};this.serializableState=async()=>{const t=this.editor.spriteStore.getSpriteHistoryState();Object.keys(t.common).forEach(o=>{const{flipHorizontally:r,flipVertically:n}=this.editor.outputContainer.getData();const a=this.editor.outputContainer.getRotation();const l=n!==r?-t.common[o].rotation:t.common[o].rotation;t.common[o].rotation=n!==r?l+a:l-a});const e=await Promise.all(this.editor.spriteStore.stickerToolStore.customStickers.map(async({identifier:o,type:r,stickerURI:n,name:a})=>{const l={identifier:o,name:a,raster:{data:"",type:"image/jpeg"}};if(r==="image/svg+xml"){l.svg={data:n.split(",")[1]}}if(r==="image/jpeg"||r==="image/png"||r==="image/gif"){[,l.raster.data]=n.split(",");l.raster.type=r}else{const c=await _n(n);[,l.raster.data]=c.split(",");l.raster.type="image/png"}return l}));return{sprite:t,customStickers:e}};this.updateCanvasControls=()=>{Object.keys(this.container).forEach(t=>{this.updatePositionAndSize(t,true);const e=this.state.get(t);if(e){if(e.tool==="text"){const o=this.getContainerProperties(t);this.textToolStore.changeSize(t,o)}else if(e.tool==="textdesign"){const o=this.getContainerProperties(t);this.textToolStore.changeWidth(o.width)}}})};this.setEditMode=t=>{if(this.currentSprite){if(["text","textdesign"].indexOf(this.tool)!==-1){if(t){this.editor.modalStore.showTextEditModal()}else{this.editor.modalStore.hideModal()}this.editMode.set(t)}}};this.setDragMode=t=>{this.dragMode.set(t)};this.setPosition=t=>{const e=this.currentSprite;const o=this.container[this.id];if(e&&o){o.setPosition(this.editor.previewToWorld(t));const{position:r}=this.getSizePositionFromContainer();e.position.x=r.x;e.position.y=r.y;this.state.set(this.id,e);this.editor.render()}};this.setSize=t=>{const e=this.currentSprite;if(e){e.size.width=t.width;e.size.height=t.height;this.state.set(this.id,e)}};this.setRotation=t=>{const e=this.currentSprite;if(e){const{flipHorizontally:o,flipVertically:r}=this.editor.outputContainer.getData();const n=this.editor.outputContainer.getRotation();const a=Ho({rotation:t,outputRotation:n,flipHorizontally:o,flipVertically:r});this.container[this.id].setRotation(a);e.rotation=this.container[this.id].getRotation();this.state.set(this.id,e);this.editor.render()}};this.onCanvasClick=t=>{if(!this.isEditMode){this.selectHighestOrderSprite(t)}};this.select=t=>{const e=this.state.get(t);if(e){const o=this.editor.activeStore.tool;if(o!==e.tool){this.editor.activeStore.selectTool(e.tool)}this.setId(t)}};this.selectLast=()=>{const t=this.editor.orderHelper.getLastSpriteId();if(t){this.select(t)}};this.selectNext=()=>{if(this.currentSprite){const t=this.container[this.id];const e=t.getIndexInParent();if(e){const o=Object.keys(this.container).find(r=>this.container[r].getIndexInParent()===e-1);if(o){this.select(o)}}}};this.deselect=()=>{this.setId(cl)};this.bringToFront=async t=>{const e=this.editor.orderHelper.bringToFront(t);this.container[t].setIndexInParent(e);this.spriteSnapshot("order");await this.editor.render();this.counter+=1};this.flipHorizontally=t=>{const e=this.state.get(t);const o=this.container[t];o.setFlipHorizontally(!o.getFlipHorizontally());e.flipHorizontally=o.getFlipHorizontally();this.spriteSnapshot("flip");this.state.set(t,e);this.editor.render()};this.pureReset=()=>{this.deselect();Array.from(this.state.keys()).forEach(t=>{this.pureRemoveSprite(t)});this.stickerToolStore.pureReset();this.textToolStore.pureReset();this.textDesignToolStore.pureReset()};this.selectHighestOrderSprite=t=>{const e=this.editor.brushToolStore.containerId();t=t.filter(n=>n!==e);if(t.length<1){this.deselect();return}let o="";let r=0;t.forEach(n=>{const a=this.container[n];const l=a&&a.getIndexInParent()||0;if(l>=r){r=l;o=n}});this.select(o)};this.onCornerDrag=({x:t,y:e})=>{if(this.currentSprite){const o=new g(this.currentSprite.position);const r=new g(t,e);const n=r.subtract(o).magnitude;const a=this.getSize();const l=n*2/dr.sizeMagnitude(a);if(n>this.minLength){if(this.isSpriteSticker){if(this.stickerToolStore.resizeMode!=="unrestricted"){this.setStickerSize({width:a.width*l,height:a.height*l})}else{const c=this.rotationWRTOutputRotation;const d=r.subtract(o);const u=Math.cos(c);const m=Math.sin(c);const f=Math.max(Math.abs(d.x*u*2+d.y*m*2),this.minLength);const b=Math.max(Math.abs(d.x*-m*2+d.y*u*2),this.minLength);this.setStickerSize({width:f,height:b})}}else if(this.isSpriteText){this.setTextSize(a.width*l)}else if(this.isSpriteTextDesign){this.setTextDesignScale(l)}}this.editor.render()}};this.onWidthDrag=({x:t,y:e})=>{const o=new g(this.currentSprite.position);const r=new g(t,e);const n=r.subtract(o).magnitude;const a=this.editor.previewToWorld(2*n);if(a>this.minLength){this.setContainerProperties(this.id,{width:a},true);if(this.isSpriteText){const l=this.getContainerProperties(this.id);this.textToolStore.changeWidth(l.width)}}};this.onPaddingDrag=({x:t,y:e})=>{if(this.isSpriteTextDesign){let o=this.getContainerProperties(this.id);const r=new g(this.currentSprite.position);const n=new g(t,e);const a=n.subtract(r).magnitude;const l=Math.max(this.editor.previewToWorld(a)-o.width/2,0);this.setContainerProperties(this.id,{padding:l},true);if(this.isSpriteTextDesign){o=this.getContainerProperties(this.id);this.textDesignToolStore.changePadding(o.padding)}}};this.correctTextFlip=()=>{const{flipHorizontally:t,flipVertically:e}=this.editor.outputContainer.getData();Object.values(this.container).forEach(o=>{if(o.type==="text"||o.type==="text-design"){o.setFlipHorizontally(t);o.setFlipVertically(e)}})};this.reverseTextHorizontally=t=>{Object.values(this.container).forEach(e=>{if(e.type==="text"||e.type==="text-design"){e.setFlipHorizontally(t)}})};this.reverseTextVertically=t=>{Object.values(this.container).forEach(e=>{if(e.type==="text"||e.type==="text-design"){e.setFlipVertically(t)}})};this.dispose=()=>{this.state=null;if(this.stickerToolStore){this.stickerToolStore.dispose();this.stickerToolStore=null}if(this.textToolStore){this.textToolStore.dispose();this.textToolStore=null}if(this.textDesignToolStore){this.textDesignToolStore.dispose();this.textDesignToolStore=null}this.selectedId=null;this.editMode=null;this.dragMode=null;this.editor=null;this.rect=null};this.getOutputProperties=()=>{return this.editor.outputContainer.getData()};this.getContainerProperties=t=>{return this.container[t].getData()};this.getContainerTransform=t=>{return this.container[t].getTransform()};this.getDuplicateContainerTransform=t=>{const e=this.container[t].getTransform();const o=this.editor.shortestOutputSide*.1;const r=new g(e.position).add(new g(o,o));return{...e,position:r}};this.getDuplicateContainerFlip=t=>{const e=this.container[t].getFlipHorizontally();const o=this.container[t].getFlipVertically();return{flipHorizontally:e,flipVertically:o}};this.updatePositionAndSize=(t=this.id,e=false)=>{const{position:o,size:r}=this.getSizePositionFromContainer(t);const n=this.state.get(t);if(n){n.position.x=o.x;n.position.y=o.y;n.size.width=r.width;n.size.height=r.height;if(e){const a=this.container[t].getRotation();this.container[t].setRotation(a);n.rotation=this.container[t].getRotation()}this.state.set(t,n)}};this.getInitialTransform=t=>{const e=this.editor.outputToWorld(wy.position);if(!t){const o=this.editor.outputContainer.getRotation();return{rotation:o,position:e}}return{position:e,...t}};this.setInitialSpriteState=(t,e)=>{const o=this.container[t];const{position:r,size:n}=this.getSizePositionFromContainer(t);const a=o.getRotation();const l=e!=="sticker"?false:o.getFlipHorizontally();const c=e!=="sticker"?false:o.getFlipVertically();this.state.set(t,{tool:e,position:r,rotation:a,size:n,flipHorizontally:l,flipVertically:c})};this.setStickerSize=t=>{const e=this.container[this.id];e.setSizeInWorldSpace(this.editor.previewSizeToWorld(t));const o=this.currentSprite;if(o){o.size=this.editor.worldSizeToPreview(e.getSizeInWorldSpace());this.state.set(this.id,o)}};this.setTextSize=t=>{let e=this.getContainerProperties(this.id);const o={width:this.editor.previewToWorld(t)};const r=o.width/e.width;const n={fontSize:Math.round(e.fontSize*r)};const a=this.isSpriteText?{...o,...n}:o;if(o.width>this.minLength&&n.fontSize){this.setContainerProperties(this.id,a,true);e=this.getContainerProperties(this.id);this.textToolStore.changeFontSize(e.fontSize,true);this.textToolStore.changeWidth(e.width)}};this.setTextDesignScale=t=>{let e=this.getContainerProperties(this.id);const o=e.width*t;if(o>this.minLength){this.setContainerProperties(this.id,{width:o},true);const{width:r}=this.getContainerProperties(this.id);this.textDesignToolStore.changeWidth(r);e=this.getContainerProperties(this.id);this.textDesignToolStore.changePadding(e.padding)}};this.getSizePositionFromContainer=(t=this.id)=>{const e=this.container[t];if(e){const o=this.editor.worldToPreview(e.getPosition());const r=this.editor.worldSizeToPreview(e.getSizeInWorldSpace());return{position:o,size:r}}return{position:{x:0,y:0},size:{height:1,width:1}}};this.getSize=(t=this.id)=>{const e=this.container[t];if(e){return this.editor.worldSizeToPreview(e.getSizeInWorldSpace())}return{width:0,height:0}};this.editor=t;this.container={};this.stickerToolStore=new W(t);this.textToolStore=new B(t);this.textDesignToolStore=new N(t);this.rect=new tt(this.editor,this);this.minLength=this.editor.configStore.measurements.canvasControls.sprite.minSize/Math.sqrt(2)}static magnitude(t,e){return new g(t,e||t).magnitude}static sizeMagnitude(t){return Math.sqrt(t.width*t.width+t.height*t.height)}async updateStateByHistoryState(t,e,o){await(0,Qp.default)(t,async r=>{const n=e.common[r];if(!n)return;if(this.state.get(r)){this.updateExistingItem(r,e)}else{await this.addNewItem(r,e)}});t.forEach(r=>{const n=e.common[r];const a=this.container[r];if(!n||!a)return;a.setIndexInParent(n.order+o)});this.counter+=1}async addNewItem(t,e){const o=e.common[t];const r=o.size?{width:this.editor.worldToPreview(o.size.width),height:this.editor.worldToPreview(o.size.height)}:void 0;const{flipHorizontally:n,flipVertically:a}=this.editor.outputContainer.getData();const l=this.editor.outputContainer.getRotation();const c=a!==n?o.rotation-l:o.rotation+l;const d=a!==n?-c:c;const u={spriteId:t,transform:{size:r,position:new g(o.position),rotation:d}};if(e.text[t]){const m=e.text[t];const f=this.textToolStore.validFontWithConfig(m.identifier);m.identifier=f==null?void 0:f.identifier;await this.addNewText(u,m)}if(e.textdesign[t]){await this.addNewTextDesign(u,e.textdesign[t])}if(e.sticker[t]){await this.addNewSticker(u,{...e.sticker[t],flipHorizontally:o.flipHorizontally,flipVertically:o.flipVertically})}}updateExistingItem(t,e){const o=e.common[t];const r=this.state.get(t);this.state.set(t,r);const n=this.container[t];n.setPosition(new g(o.position));n.setRotation(o.rotation);r.rotation=n.getRotation();if(o.flipHorizontally!==void 0){n.setFlipHorizontally(o.flipHorizontally)}if(o.flipVertically!==void 0){n.setFlipVertically(o.flipVertically)}if(e.text[t]){const a=e.text[t];this.textToolStore.updateStateFromHistory(t,{...a,fontIdentifier:a.identifier})}if(e.textdesign[t]){const a=e.textdesign[t];this.textDesignToolStore.updateStateFromHistory(t,{...a,inverted:a.isInverted})}if(e.sticker[t]){n.setSizeInWorldSpace(o.size);this.stickerToolStore.updateStateFromHistory(t,e.sticker[t])}this.updatePositionAndSize(t)}get currentSprite(){if(this.isSpriteSelected){return this.state.get(this.id)}return void 0}get padding(){return this.textDesignToolStore.padding}get isEditMode(){return this.editMode.get()}get isDragMode(){return this.dragMode.get()}get id(){return this.selectedId.get()}get isSpriteSelected(){return this.id!==cl}get position(){if(this.currentSprite){return this.currentSprite.position}return void 0}get tool(){if(this.currentSprite){return this.currentSprite.tool}return void 0}get size(){if(this.currentSprite){return this.currentSprite.size}return void 0}get rotation(){if(this.currentSprite){return this.currentSprite.rotation}return void 0}get rotationWRTOutputRotation(){if(this.currentSprite){const{flipHorizontally:t,flipVertically:e}=this.editor.outputContainer.getData();const o=this.editor.outputContainer.getRotation();return Ho({rotation:this.currentSprite.rotation-o,flipHorizontally:t,flipVertically:e})}return void 0}get flipHorizontal(){if(this.currentSprite){return this.currentSprite.flipHorizontally}return void 0}get isSpriteSticker(){return this.tool==="sticker"}get isSpriteText(){return this.tool==="text"}get isSpriteTextDesign(){return this.tool==="textdesign"}get isOnTop(){const t=this.counter;return this.editor.engine.isSpriteTop(this.id)}get spritePosition(){if(this.currentSprite){const{x:t,y:e}=this.currentSprite.position;const{height:o,width:r}=this.currentSprite.size;return{x:Math.round(t-r/2),y:Math.round(e-o/2)}}return void 0}get currentRect(){if(this.currentSprite){return this.rect}return void 0}get leftTopPosition(){if(this.currentSprite){return this.rect.leftTop}return void 0}get leftBottomPosition(){if(this.currentSprite){return this.rect.leftBottom}return void 0}get leftMidPosition(){if(this.currentSprite){return this.rect.leftMid}return void 0}get leftMidPadPosition(){if(this.currentSprite){const{leftMid:t}=this.rect;return{x:t.x-this.editor.worldToPreview(this.padding),y:t.y}}return void 0}get rightTopPosition(){if(this.currentSprite){return this.rect.rightTop}return void 0}get rightBottomPosition(){if(this.currentSprite){return this.rect.rightBottom}return void 0}get rightMidPosition(){if(this.currentSprite){return this.rect.rightMid}return void 0}get rightMidPadPosition(){if(this.currentSprite){const{rightMid:t}=this.rect;return{x:t.x+this.editor.worldToPreview(this.padding),y:t.y}}return void 0}get leftBottomHandlePosition(){if(this.currentSprite){return this.rect.leftBottomHandle}return void 0}get rightBottomHandlePosition(){if(this.currentSprite){return this.rect.rightBottomHandle}return void 0}get historyLocale(){if(this.isSpriteSticker){return this.stickerLocale}if(this.isSpriteText){return this.textDesignLocale}return this.textLocale}get stickerLocale(){return this.editor.configStore.locale["sticker"].history}get textLocale(){return this.editor.configStore.locale["text"].history}get textDesignLocale(){return this.editor.configStore.locale["textdesign"].history}setId(t){this.selectedId.set(t)}};var k=dr;s([T],k.prototype,"counter",2);s([p],k.prototype,"addSticker",2);s([p],k.prototype,"addStickerAsync",2);s([p],k.prototype,"addText",2);s([p],k.prototype,"addTextAsync",2);s([p],k.prototype,"addTextDesign",2);s([p],k.prototype,"addTextDesignAsync",2);s([p],k.prototype,"clickableCanvas",2);s([p],k.prototype,"setContainerProperties",2);s([p],k.prototype,"setContainerPosition",2);s([p],k.prototype,"pureRemoveSprite",2);s([p],k.prototype,"deleteSprite",2);s([p],k.prototype,"removeSprite",2);s([p],k.prototype,"addSnapshot",2);s([p],k.prototype,"addNewText",2);s([p],k.prototype,"addNewTextDesign",2);s([p],k.prototype,"addNewSticker",2);s([p],k.prototype,"updateStateFromSerialization",2);s([p],k.prototype,"updateStateFromHistory",2);s([p],k.prototype,"updateCanvasControls",2);s([p],k.prototype,"setEditMode",2);s([p],k.prototype,"setDragMode",2);s([p],k.prototype,"setPosition",2);s([p],k.prototype,"setSize",2);s([p],k.prototype,"setRotation",2);s([p],k.prototype,"onCanvasClick",2);s([p],k.prototype,"select",2);s([p],k.prototype,"selectLast",2);s([p],k.prototype,"selectNext",2);s([p],k.prototype,"deselect",2);s([p],k.prototype,"bringToFront",2);s([p],k.prototype,"flipHorizontally",2);s([p],k.prototype,"pureReset",2);s([p],k.prototype,"onCornerDrag",2);s([p],k.prototype,"onWidthDrag",2);s([p],k.prototype,"onPaddingDrag",2);s([p],k.prototype,"correctTextFlip",2);s([p],k.prototype,"reverseTextHorizontally",2);s([p],k.prototype,"reverseTextVertically",2);s([p],k.prototype,"dispose",2);s([h],k.prototype,"currentSprite",1);s([h],k.prototype,"padding",1);s([h],k.prototype,"isEditMode",1);s([h],k.prototype,"isDragMode",1);s([h],k.prototype,"id",1);s([h],k.prototype,"isSpriteSelected",1);s([h],k.prototype,"position",1);s([h],k.prototype,"tool",1);s([h],k.prototype,"size",1);s([h],k.prototype,"rotation",1);s([h],k.prototype,"rotationWRTOutputRotation",1);s([h],k.prototype,"flipHorizontal",1);s([h],k.prototype,"isSpriteSticker",1);s([h],k.prototype,"isSpriteText",1);s([h],k.prototype,"isSpriteTextDesign",1);s([h],k.prototype,"isOnTop",1);s([h],k.prototype,"spritePosition",1);s([h],k.prototype,"currentRect",1);s([h],k.prototype,"leftTopPosition",1);s([h],k.prototype,"leftBottomPosition",1);s([h],k.prototype,"leftMidPosition",1);s([h],k.prototype,"leftMidPadPosition",1);s([h],k.prototype,"rightTopPosition",1);s([h],k.prototype,"rightBottomPosition",1);s([h],k.prototype,"rightMidPosition",1);s([h],k.prototype,"rightMidPadPosition",1);s([h],k.prototype,"leftBottomHandlePosition",1);s([h],k.prototype,"rightBottomHandlePosition",1);s([h],k.prototype,"historyLocale",1);s([h],k.prototype,"stickerLocale",1);s([h],k.prototype,"textLocale",1);s([h],k.prototype,"textDesignLocale",1);var ky={categories:[],query:""};var It=class{constructor(t){this.initProvider=t=>{if(t){this.libraryProvider=new t}};this.fetchImages=async(t="")=>{if(this.libraryProvider){let e=null;try{const o=await this.libraryProvider.getCategories();const r=await this.libraryProvider.searchImages(t);e=o.map((n,a)=>{const l=r.filter(c=>c.category===n.name);return{identifier:n.name,name:n.name,thumbnailURI:n.coverImageUrl,items:l.map(c=>({name:c.title||`image${a}`,identifier:`${n.name}-${c.title}-${a}`,thumbnailURI:c.thumbUrl,rawUrl:c.rawUrl,authorName:c.authorName,authorAvatar:c.authorAvatar}))}}).filter(n=>n.items.length)}catch(o){console.log(o)}rt(()=>{this.state.query=t;this.state.categories=e})}};this.toggleCategorySelection=t=>{this.selectedCategory=this.selectedCategory!==t?t:""};this.dispose=()=>{this.state=null;this.configStore=null;this.libraryProvider=null;this.selectedCategory=null};this.getRawUrl=t=>{const e=this.items.findIndex(o=>o.identifier===t);if(e!==-1){return this.items[e].rawUrl}return t};this.configStore=t.configStore;this.state=T(ky);this.selectedCategory=""}get selectedCategoryIdentifier(){return this.selectedCategory}get categories(){return this.state.categories}get items(){return this.state.categories.map(t=>t.items).reduce((t,e)=>[...t,...e],[])}get query(){return this.state.query}get config(){return this.configStore.config["library"]}get locale(){return this.configStore.locale["library"]}};s([T],It.prototype,"selectedCategory",2);s([p],It.prototype,"initProvider",2);s([p],It.prototype,"fetchImages",2);s([p],It.prototype,"toggleCategorySelection",2);s([p],It.prototype,"dispose",2);s([h],It.prototype,"selectedCategoryIdentifier",1);s([h],It.prototype,"categories",1);s([h],It.prototype,"items",1);s([h],It.prototype,"query",1);s([h],It.prototype,"config",1);s([h],It.prototype,"locale",1);var th=/^data:image\/(.+?);base64,/;var Ty=i=>th.test(i);var Iy=i=>i.match(/^data:([^;]+)/)[1];var My=i=>i.replace(th,"");var pr=class{constructor(t){this.applySerialization=async(t,e,o,r)=>{this.editor.resetToolStates();const n=this.editor.activeStore.tool==="transform";if(!n){this.editor.transformToolStore.onEnter()}this.editor.transformToolStore.reset();if(!n){this.editor.transformToolStore.onLeave()}const a="Unexpected error occured";const l=e.deserializeImage(t);if(l.image&&l.image.data){const u=l.image.data;await this.editor.setImage(u);this.editor.scale.defaultScale=1;this.editor.scale.resetOffset();this.editor.transformToolStore.reset();this.editor.activeStore.setImage(u);await this.editor.engineMediator.image.addImageToContainer();this.editor.engineMediator.output.applyNewImageTransform();this.editor.engineMediator.preview.updateTransform();this.editor.scale.setInitialTransform();this.editor.transformToolStore.setCropDefaults();this.editor.historyStore.addInitialSnapshot();this.editor.transformToolStore.saveTransforms()}const c=e.deserializeTransformation(t);if(!c){r(a);return}await this.applyStateOnUI(c);const d=e.deserialize(t);if(!d){r(a);return}await this.applyStateOnUI(d);this.editor.historyStore.addInitialSnapshot();if(n){this.editor.transformToolStore.onEnter()}await this.editor.render();if(this.editor.modalStore.identifier==="loading"){this.editor.modalStore.hideModal()}o()};this.editor=t}serialize({image:t}={image:false}){const e=this.editor.activeStore.tool==="transform";const{displaySerializationModal:o}=this.editor.configStore.config;if(o){this.editor.modalStore.showInfoModal("saving")}return new Promise((r,n)=>{import("./serialization-3IKAWCOO.js").then(async({Serializer:a})=>{try{if(e){this.editor.transformToolStore.onLeave()}await this.editor.wait();this.editor.transformToolStore.applyDefaultCrop(false);const{originalImage:l}=this.editor.imageContainer.getData();const c=this.editor.engineMediator.output.container.getResolution();const d={width:l.width,height:l.height};const u=new a(this.editor.transformToolStore.defaultCropMaskPosition,this.editor.transformToolStore.maxCropMaskSize,c,d,this.editor.engine.getRootContainers()[0],this.editor.engine.getOutputContainer());const m={["adjustment"]:I(this.editor.adjustmentsToolStore.state),["filter"]:I(this.editor.filterToolStore.state),["focus"]:I(this.editor.focusToolStore.serializableState),["overlay"]:I(this.editor.overlayToolStore.state),["frame"]:I(this.editor.frameToolStore.state),["brush"]:this.editor.brushToolStore.strokes||{strokes:[]}};const{sprite:f,customStickers:b}=await this.editor.spriteStore.serializableState();f.spriteIdList=f.spriteIdList.sort((x,C)=>{const D=f.common[x].order;const z=f.common[C].order;return D-z});m.sprite=f;m.customStickers=b;m.transform=this.editor.transformToolStore.serializableState;let v;let y;if(t){const x=pr.getDataURL(l);y=Iy(x);v=My(x)}if(o){this.editor.modalStore.hideModal()}r(u.serialise(m,v,y));if(e){this.editor.transformToolStore.onEnter()}}catch(l){if(o){this.editor.modalStore.hideModal()}n(l)}})})}deserialize(t){this.editor.modalStore.showInfoModal("loading");return new Promise((e,o)=>{try{import("./serialization-3IKAWCOO.js").then(({Deserializers:r})=>{const n=t.version.match(/[0-3].[0-8].[0-9]/i);let a=null;if(n&&r["3.9.0"]){a=new r["3.9.0"](this.editor)}else if(r[t.version]){a=new r[t.version](this.editor)}else{a=new r["3.12.0"](this.editor)}if(n){this.editor.modalStore.hideModal();this.editor.modalStore.showActionModal({type:"warning",identifier:"unsupportedSerializationVersion",handleConfirm:()=>this.applySerialization(t,a,e,o)})}else{this.applySerialization(t,a,e,o)}})}catch(r){if(this.editor.modalStore.identifier==="loading"){this.editor.modalStore.hideModal()}o(r)}})}static getDataURL(t){if(t instanceof HTMLImageElement){const{src:n}=t;if(Ty(n)){return n}}if(t instanceof HTMLCanvasElement){return t.toDataURL("image/png")}const e=document.createElement("canvas");e.width=t.width;e.height=t.height;const o=e.getContext("2d");o.drawImage(t,0,0);const r=e.toDataURL("image/png");Qi(e);return r}async applyStateOnUI(t){const e=this.editor.activeStore.tool==="transform";try{if(t.transform){if(!e){this.editor.transformToolStore.onEnter()}this.editor.transformToolStore.updateStateFromSerialization(t.transform);await this.editor.wait();this.editor.transformToolStore.onLeave();if(!e){this.editor.transformToolStore.onEnter();await this.editor.wait();this.editor.transformToolStore.onLeave()}}if(t.filter){await this.editor.filterToolStore.updateStateFromSerialization(t.filter)}if(t.adjustment){this.editor.adjustmentsToolStore.updateStateFromSerialization(t.adjustment)}if(t.focus){await this.editor.focusToolStore.updateStateFromSerialization(t.focus)}if(t.overlay){await this.editor.overlayToolStore.updateStateFromSerialization(t.overlay)}if(t.sprite){let o=Object.keys(t).length-1;if(t.customStickers){o-=1}t.sprite.spriteIdList=t.sprite.spriteIdList.sort((r,n)=>{const a=t.sprite.common[r].order;const l=t.sprite.common[n].order;return a-l});await this.editor.spriteStore.updateStateFromSerialization(t.sprite,t.customStickers,Math.max(0,o))}if(t.brush){this.editor.brushToolStore.updateStateFromHistory(t.brush)}if(t.frame){await this.editor.frameToolStore.updateStateFromSerialization(t.frame)}this.editor.outputContainer.updateChildrenContainers()}catch(o){if(o.name==="AssetNotFoundError"){console.error(o)}else{console.error(o);this.editor.modalStore.showActionModal({type:"error",identifier:"unexpectedError",error:o.message,handleConfirm:()=>{this.applyStateOnUI(t)}})}}}};var Dy=i=>{const t=atob(i.split(",")[1]);const e=i.split(",")[0].split(":")[1].split(";")[0];const o=new ArrayBuffer(t.length);const r=new Uint8Array(o);for(let n=0;n<t.length;n+=1){r[n]=t.charCodeAt(n)}return new Blob([o],{type:e})};var dl=Dy;var eh=i=>i.split(",")[0].split(":")[1].split(";")[0];var ih=i=>{if(typeof i==="string"){return eh(i)}if(i.src.includes(".svg")){return"image/svg+xml"}if(i.src){return eh(i.src)}return"image/jpeg"};var Vn=ui(Mc());var hr=class{static isImageElement(t){return t instanceof HTMLImageElement}constructor({license:t,assetProvider:e,crossOrigin:o}){this.crossOrigin=o;this.engine=new Br({license:t,crossOrigin:o,assetProvider:e,downscaleOptions:{maxDimensions:{width:100,height:100}}})}getAllFilterPreviewThumbnails(t){return new Promise((e,o)=>{const r=[];const n=[];t.forEach(a=>{if(a.isDuotone)r.push(a.identifier);else n.push(a.identifier)});this.getAllDuotonePreview(r).then(a=>{this.getAllLutPreview(n).then(l=>{e(Object.assign(a,l))}).catch(l=>{o(l)})}).catch(a=>{o(a)})})}async getAllDuotonePreview(t){const e={};if(!t.length)return e;const o=await this.engine.addDuoToneFilterFromAssets(t[0],this.container);await(0,Vn.default)(t,async r=>{const n=this.engine.assetProvider.getDuotoneFilterAsset(r);const a=o.filterOperation.getFilter();a.set({intensity:.5,lightColor:Ps.Color.fromHex(n.lightColor),darkColor:Ps.Color.fromHex(n.darkColor)});const l=await this.engine.export("data-url","image/png");e[r]=l},{concurrency:1});this.engine.removeEffect(o);return e}async loadLutAssets(t){const e={};await(0,Vn.default)(t,async o=>{e[o]=await this.getImageElement(this.engine.assetProvider.getAssetSource("filter",o))});return e}async getAllLutPreview(t){const e={};if(!t.length)return e;const o=await this.loadLutAssets(t);const r=await this.engine.addLUTFilterFromAssets(t[0],this.container);await(0,Vn.default)(t,async n=>{const a=this.engine.assetProvider.getLUTFilterAsset(n);const l=r.filterOperation.getFilter();const c={horizontalTileCount:a.horizontalTileCount||5,verticalTileCount:a.verticalTileCount||5,image:o[n]};l.set({...c,intensity:a.defaultIntensity||1});r.setProperties({intensity:1});l._lutPrimitive.set(c);const d=await this.engine.export("data-url","image/png");e[n]=d},{concurrency:1});this.engine.removeEffect(r);return e}addImageToContainer(t){return new Promise((e,o)=>{let r;if(hr.isImageElement(t)){r=t;this.setBackgroundImage(r);e()}else{this.getImageElement(t).then(n=>{r=n;this.setBackgroundImage(r);e()}).catch(n=>{o({identifier:"imageLoading",message:n.message})})}})}getImageElement(t){return new Promise((e,o)=>{const r=new Image;r.addEventListener("load",()=>{e(r)});r.addEventListener("error",n=>{o(n)});r.crossOrigin=this.crossOrigin;r.src=t})}setBackgroundImage(t){if(!this.container){this.container=this.engine.addImage({image:t,blendMode:"normal",opacity:1})}else{this.container.setData({image:t})}const{size:e}=this.container.getBounds();const o=this.engine.getOutputContainer();o.setResolution(e)}};var Ey={horizontalGuides:[],verticalGuides:[],rotationGuides:[]};var Jt=class{constructor(t){this.previewTopLeftPosition={x:0,y:0};this.init=()=>{this.state.horizontalGuides=this.getHorizontalGuidesFromConfig();this.state.verticalGuides=this.getVerticalGuidesFromConfig();this.state.rotationGuides=this.getRotationGuidesFromConfig()};this.getGuideValue=(t,e)=>{const{height:o,width:r}=this.editor.getPreviewSize();const{snapToLeft:n,snapToRight:a,snapToTop:l,snapToBottom:c}=this.configStore.config.snapping.position;const d=Math.min(o,r);let u=0;if(e==="bottom"){u=Math.round(o-d*c)}else if(e==="top"){u=Math.round(d*l)}else if(e==="right"){u=Math.round(r-d*a)}else if(e==="left"){u=Math.round(d*n)}else if(t==="vertical"&&e==="center"){u=Math.round(r/2)}else if(t==="horizontal"&&e==="center"){u=Math.round(o/2)}return u};this.getVerticalGuidesFromConfig=()=>{const{snapToVerticalCenter:t,snapToLeft:e,snapToRight:o}=this.configStore.config.snapping.position;const r=[];if(t){r.push({value:this.getGuideValue("vertical","center"),edge:"center",isVisible:false,direction:"vertical"})}if(e){r.push({value:this.getGuideValue("vertical","left"),edge:"leading",isVisible:false,direction:"vertical"})}if(o){r.push({value:this.getGuideValue("vertical","right"),edge:"trailing",isVisible:false,direction:"vertical"})}return r};this.getHorizontalGuidesFromConfig=()=>{const{snapToHorizontalCenter:t,snapToTop:e,snapToBottom:o}=this.configStore.config.snapping.position;const r=[];if(t){r.push({value:this.getGuideValue("horizontal","center"),edge:"center",isVisible:false,direction:"horizontal"})}if(e){r.push({value:this.getGuideValue("horizontal","top"),edge:"leading",isVisible:false,direction:"horizontal"})}if(o){r.push({value:this.getGuideValue("horizontal","bottom"),edge:"trailing",isVisible:false,direction:"horizontal"})}return r};this.getRotationGuidesFromConfig=()=>{const{angles:t}=this.configStore.config.snapping.rotation;const e=[];t.forEach(r=>{e.push(r);e.push(r+360);e.push(r-360)});const o=e.filter((r,n)=>e.indexOf(r)===n);return o.map(r=>({value:r*Math.PI/180,edge:"center",isVisible:false,position:{x:0,y:0}}))};this.getSpriteDimensions=({leftTop:t,leftBottom:e,rightTop:o,rightBottom:r})=>{const n=Math.min(t.y,o.y,e.y,r.y);const a=Math.max(t.y,o.y,e.y,r.y);const l=Math.min(t.x,o.x,e.x,r.x);const c=Math.max(t.x,o.x,e.x,r.x);return{height:Math.round(a-n),width:Math.round(c-l)}};this.mapRange=({value:t,fromMin:e,fromLength:o,toMin:r,toLength:n})=>{return(t-e)*n/o+r};this.updateGuides=()=>{this.state.horizontalGuides=this.getHorizontalGuidesFromConfig();this.state.verticalGuides=this.getVerticalGuidesFromConfig()};this.mapToSnapSystem=(t,e,o,r)=>{if(e.length===0){return t}if(e[0]>t){return t-o}for(let n=0;n<e.length-1;n+=1){const a=e[n];const l=e[n+1];let c=a+o;let d=l-o;let u=0;if(r){u=n*o*2;c+=u;d+=u+o*2}const m=1e-5;if(a<=t&&t<=l){if(t<=a+m){return a+u}if(t>=l-m){return l+u+(r?o*2:0)}return this.mapRange({value:t,fromMin:a,fromLength:l-a,toMin:c,toLength:d-c})}}if(r){return t+(e.length-1)*o*2+o}return t};this.mapFromSnapSystem=(t,e,o,r)=>{if(e.length===0){return t}if(e[0]>t){if(t>=e[0]-o){return e[0]}return t+o}let n=t;for(let l=0;l<e.length-1;l+=1){const c=e[l];const d=e[l+1];const u=c+o;let m=d-o;let f=d;if(r){m+=o*2;f+=o*2;n=t-l*o*2}if(c<=n&&n<=f){if(u<=n&&n<=m){return this.mapRange({value:n,fromMin:u,fromLength:m-u,toMin:c,toLength:d-c})}if(n<u){return c}return d}}n-=o*3;const a=e[e.length-1];if(n<=a){return a}return n};this.centerSnapValue=(t,e)=>{const o=e*.5;const{value:r,edge:n}=t;let a=r;if(n==="leading"){a+=o}else if(n==="trailing"){a-=o}return a};this.mapSnappingGuidesToCenter=(t,e)=>{const o=[];t.forEach(r=>{o.push(this.centerSnapValue(r,e))});return o};this.calcSnapThresholdInRadians=(t,e)=>{if(t===0){return 0}return e/t};this.calculatePreviewTopLeftPosition=()=>{const t=this.editor.engineMediator.preview.container.getPosition();const e=this.editor.getPreviewSize();const o=Gt();this.previewTopLeftPosition={x:t.x/o-e.width/2,y:t.y/o-e.height/2}};this.snapToRotation=(t,e,o)=>{const{rotationGuides:r}=this.state;const{enabled:n,threshold:a}=this.configStore.config.snapping.rotation;const{x:l,y:c}=this.previewTopLeftPosition;const{width:d}=this.editor.getPreviewSize();let u=(t+Math.PI*2)%(Math.PI*2);if(n){const m=new g(e).magnitude;const f=r.map(y=>y.value).sort((y,x)=>y-x);const b=this.calcSnapThresholdInRadians(m,a);if(!this.rotationOffset){const y=this.mapToSnapSystem(t,f,b,false);this.rotationOffset=y-u}u=this.mapFromSnapSystem(u+this.rotationOffset,f,b,false);const v={x:o.position.x-l-d,y:o.position.y-c};r.forEach(y=>{y.isVisible=y.value===u;y.position=v});return u}return t};this.snapToPosition=(t,e)=>{const{horizontalGuides:o,verticalGuides:r}=this.state;const{enabled:n,threshold:a}=this.configStore.config.snapping.position;const l=new g(this.previewTopLeftPosition);const{height:c,width:d}=this.getSpriteDimensions(e);const{x:u,y:m}=new g(t).subtract(l);if(n){const f=this.mapSnappingGuidesToCenter(o,c).sort((x,C)=>x-C);const b=this.mapSnappingGuidesToCenter(r,d).sort((x,C)=>x-C);if(!this.positionOffset){const x=this.mapToSnapSystem(u,b,a,true);const C=this.mapToSnapSystem(m,f,a,true);this.positionOffset=new g(x,C).subtract(new g(u,m))}let v=this.mapFromSnapSystem(u+this.positionOffset.x,b,a,true);let y=this.mapFromSnapSystem(m+this.positionOffset.y,f,a,true);v=Math.round(v);y=Math.round(y);o.forEach(x=>{const C=Math.round(this.centerSnapValue(x,c));x.isVisible=C===y});r.forEach(x=>{const C=Math.round(this.centerSnapValue(x,d));x.isVisible=C===v});return new g(v,y).add(l)}return{x:u,y:m}};this.dispose=()=>{this.state=null;this.editor=null;this.configStore=null};this.editor=t;this.configStore=t.configStore;this.state=T(Ey);this.rotationOffset=null;this.positionOffset=null}hidePositionGuides(){this.positionOffset=null;this.state.verticalGuides=this.state.verticalGuides.map(t=>({...t,isVisible:false}));this.state.horizontalGuides=this.state.horizontalGuides.map(t=>({...t,isVisible:false}))}hideRotationGuides(){this.rotationOffset=null;this.state.rotationGuides=this.state.rotationGuides.map(t=>({...t,isVisible:false}))}get positionGuides(){const{verticalGuides:t,horizontalGuides:e}=this.state;return[...t,...e]}get rotationGuides(){return this.state.rotationGuides}};s([T],Jt.prototype,"state",2);s([p],Jt.prototype,"snapToRotation",2);s([p],Jt.prototype,"snapToPosition",2);s([p],Jt.prototype,"hidePositionGuides",1);s([p],Jt.prototype,"hideRotationGuides",1);s([p],Jt.prototype,"dispose",2);s([h],Jt.prototype,"positionGuides",1);s([h],Jt.prototype,"rotationGuides",1);var Un=class{constructor(t,e){this.initWithImage=async t=>{try{this.modalStore.showInfoModal("loading");this.engineMediator.init();this.snappingStore.init();await this.activeStore.setImage(t);if(this.configStore.config.displayResizeWarning){this.checkImageResize()}if(this.configStore.config.filter.enablePreviewThumbnails&&this.configStore.config.engine.preferredRenderer==="webgl"){const e=this.configStore.config.engine;this.previewThumbnails=new hr({...e,license:this.configStore.config.license,assetProvider:this.configStore.assetProvider})}if(this.engine){this.engine.pesdk.on("context-lost",()=>{this.configStore.events.onErrorWebGLContextLost()})}}catch(e){this.configStore.events.onErrorImageLoading(e);this.modalStore.hideModal();this.modalStore.showActionModal({type:"error",identifier:e.identifier?e.identifier:"rendering",error:e,handleConfirm:()=>{this.initWithImage(t)},handleDismiss:()=>{this.activeStore.setImage(void 0)}})}};this.checkImageResize=()=>{this.engine.on("beganImageDownscaling",()=>{this.modalStore.showInfoModal("resizing")});this.engine.on("imageDownscaled",({width:t,height:e})=>{const{maxMegaPixels:o}=this.configStore.config.engine.downscaleOptions;const r=wc.isMobile()?o.mobile:o.desktop;this.modalStore.hideModal();this.modalStore.showActionModal({type:"warning",identifier:"imageResized",handleConfirm:()=>{this.modalStore.hideModal()},error:{megapixels:`${r}`,width:`${t}`,height:`${e}`}})})};this.init=t=>{if(!this.activeStore.image){this.initWithImage(t)}else{const e=this.historyStore.isDirty();if(e){this.modalStore.showActionModal({type:"warning",identifier:"discardChanges",handleConfirm:()=>{this.setImage(t);this.resetToolStates()},handleDismiss:()=>{this.setImage(t,true)}})}else{this.historyStore.reset();this.setImage(t,true).then(()=>{if(this.modalStore.identifier!=="imageResized"){this.modalStore.hideModal()}const{engine:o,displayCanvasRendererWarning:r}=this.configStore.config;if(o.preferredRenderer==="canvas"&&r){this.modalStore.showActionModal({type:"warning",identifier:"unsupportedWebGLRenderer",handleConfirm:()=>{this.modalStore.hideModal()}})}}).catch(()=>{return null})}}};this.setImage=async(t,e=false)=>{try{if(!this.activeStore.image){this.initWithImage(t)}else{this.activeStore.setImageLoadedToEngine(false);this.modalStore.showInfoModal(this.configStore.config.displayResizeWarning?"resizing":"loading");this.scale.defaultScale=1;this.scale.resetOffset();await this.activeStore.setImage(t);await this.engineMediator.image.addImageToContainer();this.canvasStore.resizeCanvas();this.engineMediator.output.applyNewImageTransform();this.engineMediator.preview.updateTransform();this.scale.setInitialTransform();this.transformToolStore.setCropDefaults();const{flipHorizontally:o,flipVertically:r,outputRotation:n}=this.transformToolStore.rotateFlipState;this.outputContainer.setData({flipVertically:r,flipHorizontally:o});await this.transformToolStore.rotateOutputContainer(Ec(n),false);if(e){this.focusToolStore.updateCanvasControls();this.spriteStore.updateCanvasControls();this.transformToolStore.resetCrop();this.transformToolStore.applyDefaultCrop();this.transformToolStore.saveTransforms();this.transformToolStore.onEnter();this.transformToolStore.setRotation(this.transformToolStore.rotationInDegrees);this.transformToolStore.onLeave();this.transformToolStore.onEnter();this.transformToolStore.onLeave()}else{this.transformToolStore.saveTransforms()}this.snappingStore.calculatePreviewTopLeftPosition();this.historyStore.addInitialSnapshot();await this.renderPromise();if(this.configStore.config.filter.enablePreviewThumbnails&&this.configStore.config.engine.preferredRenderer==="webgl"){this.filterToolStore.setImageAndGetPreviews()}const a=this.activeStore.tool;if(!a){this.onReady()}else{this.configStore.events.onImageLoaded()}if(!(this.modalStore.identifier==="imageResized")){this.modalStore.hideModal()}this.activeStore.setImageLoadedToEngine(true);this.resize()}}catch(o){this.configStore.events.onErrorImageLoading(o);this.modalStore.hideModal();this.modalStore.showActionModal({type:"error",identifier:o.identifier?o.identifier:"rendering",error:o,handleConfirm:()=>{this.setImage(t,e)},handleDismiss:()=>{this.activeStore.setImage(void 0)}});throw new Error(o)}};this.onToolChange=(t,e=null,o=true)=>{var r,n;if(t===e){return}if((n=(r=this.engineMediator)==null?void 0:r.preview)==null?void 0:n.container){if([t,e].indexOf("transform")!==-1){if(t==="transform"){this.transformToolStore.onLeave();this.transformToolStore.addSnapshot();this.snappingStore.calculatePreviewTopLeftPosition()}else if(e==="transform"){this.transformToolStore.onEnter()}this.resize(e)}else{this.scale.resetOffset();this.scale.resetPosition();this.scale.setScaleToDefault();this.scale.scaleRender(true)}if(o){this.render()}}};this.resize=(t=null)=>{if(!this.engineMediator)return;try{const e=this.activeStore.tool;const o=t==="transform"||!t&&e==="transform";this.canvasStore.resizeCanvas(t);this.transformToolStore.applyDefaultCrop();const r=I(this.transformToolStore.maxCropMaskSize);if(!o){this.transformToolStore.onEnter()}const n=this.engineMediator.preview.container.getRotation();const a=this.engineMediator.preview.updateTransform(n);if(a){this.scale.setInitialTransform();this.transformToolStore.setCropDefaults();this.transformToolStore.updateCanvasControls(r);this.focusToolStore.updateCanvasControls();this.spriteStore.updateCanvasControls();const l=this.transformToolStore.getScaleWithFlip(n);this.engineMediator.preview.container.setScale(l);if(!o){this.transformToolStore.onLeave();this.transformToolStore.onEnter();this.transformToolStore.onLeave()}this.snappingStore.calculatePreviewTopLeftPosition();this.render()}}catch(e){this.configStore.events.onErrorImageLoading(e);this.modalStore.showActionModal({type:"error",identifier:"rendering",handleConfirm:()=>{this.resize(t)},handleDismiss:()=>{this.activeStore.setImage(void 0)}})}};this.export=async({preventExportEvent:t,...e}={})=>{const o=this.activeStore.tool==="transform";try{this.modalStore.showInfoModal("exporting");if(o){this.transformToolStore.onLeave()}const{config:r}=this.configStore;const n={...r.export.image,...e};const{exportType:a,format:l,quality:c,enableDownload:d,transparent:u}=n;const m=await this.engineMediator.engine.export(a,l,c,u);if(o&&this.transformToolStore){this.transformToolStore.onEnter();await this.render()}if(this.historyStore){this.historyStore.isDirtySinceSave=false}if(this.modalStore){this.modalStore.hideModal()}if(d){this.triggerFileDownload(r.export.filename,l,a,m)}if(!t){this.configStore.events.onExport(m)}return m}catch(r){if(this.modalStore){this.modalStore.hideModal()}if(o&&this.transformToolStore){this.transformToolStore.onEnter();await this.render()}throw new Error(r)}};this.serialize=({image:t}={image:true})=>{if(this.serializationMediator){return this.serializationMediator.serialize({image:t})}return Promise.resolve({})};this.deserialize=t=>{if(this.serializationMediator){return this.serializationMediator.deserialize(t)}return Promise.resolve()};this.close=()=>{var t,e,o,r;if(((t=this.historyStore)==null?void 0:t.isDirtySinceSave)&&((o=(e=this.configStore)==null?void 0:e.config)==null?void 0:o.displayCloseWarning)&&this.modalStore){this.modalStore.showActionModal({type:"warning",identifier:"unsavedChanges",handleConfirm:()=>{var n;if((n=this.configStore)==null?void 0:n.events){this.configStore.events.onClose()}}})}else if((r=this.configStore)==null?void 0:r.events){this.configStore.events.onClose()}};this.hasChanges=()=>{if(this.historyStore){return this.historyStore.isDirtySinceSave}return false};this.getImageDimensions=()=>{if(this.engine){const{width:t,height:e}=this.engine.getOutputDimensions();return{width:t,height:e}}return{width:0,height:0}};this.wait=(t=0)=>new Promise(e=>setTimeout(e,t));this.clickableCanvas=async t=>{if(t){await new Promise(e=>setTimeout(e,0));this.canvasStore.enableCanvasClick()}else{this.canvasStore.disableCanvasClick()}};this.onReady=async()=>{const{forceCrop:t}=this.configStore.config;this.activeStore.selectTool(this.configStore.defaultTool);if(t){const e=this.transformToolStore.localOutputImageSize;const o=e.width/e.height;const r=this.transformToolStore.entityManager.items.map(n=>{if(n.ratio){return n.ratio}return n.dimensions.x/n.dimensions.y});if(r.indexOf("*")!==-1){console.error('ForceCrop will not work if "*" is one of the ratios')}else if(r.indexOf(parseFloat(o.toFixed(2)))===-1){this.activeStore.selectTool("transform")}}this.configStore.events.onEditorReady()};this.addSnapshot=(t,e,o)=>{this.historyStore.addSnapshot(t,e,o)};this.resetToolStates=()=>{this.transformToolStore.pureReset();this.filterToolStore.pureReset();this.focusToolStore.pureReset();this.adjustmentsToolStore.pureReset();this.overlayToolStore.pureReset();this.frameToolStore.pureReset();this.brushToolStore.pureReset();this.spriteStore.pureReset();this.historyStore.reset();this.render()};this.getAssetPath=t=>this.assetProvider.getPathForCategory(t);this.render=async()=>{await this.renderPromise()};this.applyFlipToPreview=t=>{if(!this.engineMediator)return{x:0,y:0};return this.engineMediator.previewSpaceToFlippedPreviewSpace(t)};this.getPreviewSize=()=>{if(!this.engine)return{width:0,height:0};const{width:t,height:e}=this.engine.getOutputDimensions();if(t&&e){return{width:Math.round(this.worldToPreview(this.outputToWorld(t))),height:Math.round(this.worldToPreview(this.outputToWorld(e)))}}return{height:e,width:t}};this.getImageMimeType=()=>{return ih(this.activeStore.image)};this.cleanUpCanvasMemory=()=>{var t,e,o;(o=(e=(t=this.engineMediator)==null?void 0:t.image)==null?void 0:e.container)==null?void 0:o.dispose()};this.dispose=()=>{if(this.engineMediator){this.engineMediator.dispose();this.engineMediator=null}this.serializationMediator=null;if(this.spriteStore){this.spriteStore.dispose();this.spriteStore=null}this.scale=null;this.filterToolStore=null;this.adjustmentsToolStore=null;this.focusToolStore=null;this.overlayToolStore=null;this.frameToolStore=null;this.brushToolStore=null;if(this.transformToolStore){this.transformToolStore.dispose();this.transformToolStore=null}if(this.libraryStore){this.libraryStore.dispose();this.libraryStore=null}if(this.modalStore){this.modalStore.dispose();this.modalStore=null}if(this.snappingStore){this.snappingStore.dispose();this.snappingStore=null}if(this.activeStore){this.activeStore.dispose();this.activeStore=null}if(this.canvasStore){this.canvasStore.dispose();this.canvasStore=null}this.historyStore=null;if(this.configStore){this.configStore.dispose();this.configStore=null}};this.triggerFileDownload=(t,e,o,r)=>{const n=e==="image/jpeg"&&o!=="ms-blob"?".jpeg":".png";const a=t+n;const l=this.blobFromExportData(r);this.triggerBlobDownload(a,l)};this.triggerBlobDownload=(t,e)=>{if(navigator.msSaveBlob){navigator.msSaveBlob(e,t)}else{const o=document.createElement("a");const r=URL.createObjectURL(e);o.href=r;o.download=t;document.body.appendChild(o);o.click();document.body.removeChild(o);if(!rc()){URL.revokeObjectURL(r)}}};this.blobFromExportData=t=>{if(typeof t==="string"){return dl(t)}if(t instanceof HTMLImageElement){return dl(t.src)}return t};this.configStore=new St;if(e){Object.entries(e).forEach(([r,n])=>{this.configStore.events.on(r,n)})}const o=this.configStore.saveConfig(t);this.engineMediator=new ol(this);this.serializationMediator=new pr(this);this.spriteStore=new k(this);this.scale=new lt(this);this.filterToolStore=new it(this);this.adjustmentsToolStore=new G(this);this.focusToolStore=new $(this);this.overlayToolStore=new st(this);this.frameToolStore=new Z(this);this.brushToolStore=new J(this);this.transformToolStore=new w(this);this.libraryStore=new It(this);this.modalStore=new Bt(this);this.snappingStore=new Jt(this);this.activeStore=new Tt(this);this.canvasStore=new yt(this);this.historyStore=new zi(this);this.libraryStore.initProvider(o);this.libraryStore.fetchImages();if(this.configStore.config.image){this.initWithImage(this.configStore.config.image)}else{this.configStore.events.onEditorReady();if(this.configStore.defaultTool==="library"||this.configStore.defaultTool==="customTool"){this.activeStore.selectTool(this.configStore.defaultTool)}}}get shortestOutputSide(){const t=this.outputContainer.getBounds();return Math.min(t.width,t.height)}get assetProvider(){return this.configStore.assetProvider}get engine(){if(!this.engineMediator)return null;return this.engineMediator.engine}get imageContainer(){if(!this.engineMediator)return null;return this.engineMediator.image.container}get orderHelper(){if(!this.engineMediator)return null;return this.engineMediator.orderHelper}renderPromise(){if(!this.engineMediator)return null;return this.engineMediator.render(this.engineMediator.preview.container)}previewToWorld(t,e){if(!this.engineMediator)return{x:0,y:0};if(oe(t)){return this.engineMediator.previewSpaceToWorldSpace(t,e)}return this.engineMediator.previewSpaceToWorldSpace(t,e)}worldToPreview(t){if(!this.engineMediator)return{x:0,y:0};if(oe(t)){return this.engineMediator.worldSpaceToPreviewSpace(t)}return this.engineMediator.worldSpaceToPreviewSpace(t)}worldSizeToPreview(t){if(!this.engineMediator)return{width:0,height:0};return{width:this.engineMediator.worldSpaceToPreviewSpace(t.width),height:this.engineMediator.worldSpaceToPreviewSpace(t.height)}}previewSizeToWorld(t,e){if(!this.engineMediator)return{width:0,height:0};return{width:this.engineMediator.previewSpaceToWorldSpace(t.width,e),height:this.engineMediator.previewSpaceToWorldSpace(t.height,e)}}outputToWorld(t){if(!this.engineMediator)return{x:0,y:0};if(oe(t)){return this.engineMediator.outputSpaceToWorldSpace(t)}return this.engineMediator.outputSpaceToWorldSpace(t)}previewToOutput(t){if(!this.engineMediator)return{x:0,y:0};if(oe(t)){return this.engineMediator.previewSpaceToOutputSpace(t)}return this.engineMediator.previewSpaceToOutputSpace(t)}get outputContainer(){return this.engineMediator.output.container}};s([p],Un.prototype,"resize",2);s([p],Un.prototype,"export",2);s([p],Un.prototype,"clickableCanvas",2);import oh from"react";var rh=({children:i})=>oh.createElement(oh.Fragment,null,i);import Ay from"react";import Py from"styled-components";var nh=Py(Ti)`
  margin: 2px;
  min-width: ${i=>i.theme.measurements.basicCard.large.width}px;
  height: ${i=>i.theme.measurements.basicCard.large.height}px;
  color: ${i=>i.theme.card.foreground};
`;import zy from"styled-components";var sh=zy(Ti)`
  margin: 2px;
  min-width: ${i=>i.theme.measurements.basicCard.medium.width}px;
  height: ${i=>i.theme.measurements.basicCard.medium.height}px;
  color: ${i=>i.theme.card.foreground};
`;var ah=({type:i="medium",...t})=>{const e=i==="large";let o=sh;if(e){o=nh}return Ay.createElement(o,{type:i,...t})};import Ly from"styled-components";var lh=Ly(ki).attrs(()=>({"data-test":S.CardContainer}))`
  transition-property: width;
  transition-duration: 0.4s;
  transition-timing-function: ease-in;
  height: ${i=>i.theme.measurements.basicUIToolControlBar.itemsBarHeight}px;
`;import By from"styled-components";var ch=By($s)`
  &&& {
    min-height: 32px;
    font-size: ${i=>i.theme.measurements.fontSystem.basicUICardLabel.size}px;
    letter-spacing: ${i=>i.theme.measurements.fontSystem.basicUICardLabel.letterSpacing}px;
    text-transform: ${i=>i.theme.measurements.fontSystem.basicUICardLabel.case};
  }
`;import Oy from"styled-components";var dh=Oy.div`
  display: flex;
  /* This fixes an IE11 issue where the items are behind the category */
  flex: 1 0 auto;
`;import Fy,{css as ph}from"styled-components";var hh=Fy.div.attrs(()=>({"data-test":S.BasicToolControlBar}))`
  position: relative;
  display: flex;
  flex-shrink: 0;
  height: auto;
  transition: max-height 0.4s ease-in-out;
  ${i=>i.show?ph`
          max-height: 80px;
        `:ph`
          max-height: 0px;
        `}
`;var uh=hh;hh.defaultProps={show:true};import Ry from"styled-components";var Hy=Ry.div`
  text-align: -moz-center;
  text-align: center;
  text-align: -webkit-center;
  margin: 0 10vw;
  height: auto;
  box-shadow: ${i=>i.theme.toolControlBar.shadow};
  @media all and (min-width: 0) and (max-width: 599px) {
    margin: 0 5vw;
  }
`;var mh=Hy;import _y from"styled-components";var $y=_y.div`
  width: 100px;
  @media all and (min-width: 0) and (max-width: 599px) {
    width: 42px;
  }
`;var fh=$y;import Wy,{css as Ny}from"styled-components";var gh=Wy.div.attrs(()=>({"data-test":S.ToolControlBarExpandableControls}))`
  position: absolute;
  left: 0%;
  transform: translateY(0%) scaleY(0);
  justify-content: center;
  padding: 0 5vw;
  width: 90%;
  height: ${i=>i.theme.measurements.basicUIToolControlBar.controlsBarHeight}px;
  display: flex;
  align-items: center;
  transition: transform 0.4s ease-in-out;
  z-index: ${i=>i.theme.measurements.zIndex.controlsBar};
  background: ${i=>i.theme.toolControlBar.background};
  color: ${i=>i.theme.toolControlBar.inputLabelForeground};

  ${({show:i})=>i&&Ny`
      transform: translateY(-100%) scaleY(1);
    `}
`;import Er from"react";import HC from"styled-components";import Vy from"react";import Uy from"styled-components";var Gy=Uy.div`
  display: flex;
  justify-content: center;
  align-items: center;
`;var jy=({label:i,className:t,children:e})=>Vy.createElement(Gy,{"aria-label":i,className:t},e);var pl=jy;import Et from"react";import df from"styled-components";import Wt from"react";import Mx from"styled-components";import{useContext as Xy}from"react";function K(){return Xy(Yo)}import _e from"react";var Yy=()=>_e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},_e.createElement("defs",null,_e.createElement("path",{id:"photoeditorsdk-blacks-icon",d:"M24 12c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12m0 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10m4 12c0 2.788-2.326 3.879-7 3V18.5c4.148-.459 6.516.226 6.516 2.623 0 1.207-.492 1.998-1.512 2.474C27.504 23.999 28 24.619 28 26zm-5-6v3c2.244.068 2.775-.719 2.775-1.536 0-1.22-.531-1.812-2.775-1.464zm0 7.5c2.19.193 3.038-.04 3.038-1.484 0-1.37-1.096-1.695-3.038-1.516v3z"})),_e.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},_e.createElement("path",{d:"M0 0H48V48H0z"}),_e.createElement("mask",{fill:"currentColor"},_e.createElement("use",{xlinkHref:"#photoeditorsdk-blacks-icon"})),_e.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-blacks-icon"})));var bh=Yy;import Li from"react";var Ky=()=>Li.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Li.createElement("defs",null,Li.createElement("path",{id:"photoeditorsdk-brightness-icon",d:"M22.185 33.836c.594.109 1.2.164 1.815.164v2c-.735 0-1.462-.066-2.175-.197zm5.58-.568l.753 1.852c-.675.275-1.375.487-2.093.635l-.402-1.96c.597-.122 1.18-.299 1.741-.527zm-9.446-1.037c.5.346 1.03.646 1.586.895l-.82 1.824c-.666-.3-1.303-.66-1.903-1.074zm12.884-1.295l1.44 1.388a12.06 12.06 0 01-1.65 1.429l-1.167-1.625a10.06 10.06 0 001.377-1.192zm-15.758-1.754c.316.52.679 1.01 1.083 1.464l-1.493 1.33a12.038 12.038 0 01-1.3-1.756zm17.97-1.802l1.882.676a11.948 11.948 0 01-.925 1.982l-1.727-1.008a9.948 9.948 0 00.77-1.65zM24 18c.091 0 .182.002.273.006L24 18a6.071 6.071 0 01.668.037l.192.024a5.974 5.974 0 011.847.585l.01.005a5.992 5.992 0 011.154.768A5.99 5.99 0 0130 24c0 3.309-2.691 6-6 6a5.985 5.985 0 01-4.404-1.929l.163.17a6.052 6.052 0 01-1.353-2.07A5.951 5.951 0 0118 24c0-3.309 2.691-6 6-6zm2.827 3.173l-5.654 5.654A3.988 3.988 0 0024 28c2.206 0 4-1.794 4-4a3.988 3.988 0 00-1.173-2.827zM14.08 25.268c.076.606.208 1.2.392 1.777l-1.905.608a11.936 11.936 0 01-.472-2.134zm21.885-2.192a12.16 12.16 0 01-.032 2.198l-1.989-.21a10.193 10.193 0 00.027-1.836zM12.522 20.49l1.912.584a9.943 9.943 0 00-.37 1.783l-1.987-.226c.083-.73.232-1.445.445-2.14zm22.059-2.155c.345.643.63 1.316.853 2.013l-1.905.608a9.934 9.934 0 00-.71-1.676zm-19.587-2.266l1.5 1.323c-.402.456-.762.948-1.075 1.47l-1.715-1.03c.376-.625.808-1.215 1.29-1.763zm16.272-1.62c.58.442 1.12.936 1.61 1.476l-1.479 1.346c-.41-.45-.859-.862-1.343-1.23zm-12.241-1.372l.83 1.82a9.986 9.986 0 00-1.58.903l-1.147-1.638a11.986 11.986 0 011.897-1.085zm7.7-.766c.714.166 1.408.396 2.076.688L28 14.832a9.916 9.916 0 00-1.727-.573zm-2.857-.31l.021 2c-.613.006-1.22.068-1.812.184l-.383-1.964a12.046 12.046 0 012.174-.22z"})),Li.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Li.createElement("mask",null,Li.createElement("use",{xlinkHref:"#photoeditorsdk-brightness-icon"})),Li.createElement("use",{fillOpacity:"0.9",transform:"rotate(-45 24.039 24)",xlinkHref:"#photoeditorsdk-brightness-icon"})));var yh=Ky;import $e from"react";var qy=()=>$e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},$e.createElement("defs",null,$e.createElement("path",{id:"photoeditorsdk-clarity-icon",d:"M24 12L13 24.001 24 36l11-11.999L24 12zm-8.29 12.001H21l3-9.041 8.29 9.041-8.28 9.029L28 24.001h-7l2.99 9.029-8.28-9.029z"})),$e.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},$e.createElement("path",{d:"M0 0H48V48H0z"}),$e.createElement("mask",{fill:"currentColor"},$e.createElement("use",{xlinkHref:"#photoeditorsdk-clarity-icon"})),$e.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-clarity-icon"})));var vh=qy;import We from"react";var Jy=()=>We.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},We.createElement("defs",null,We.createElement("path",{id:"photoeditorsdk-contrast-icon",d:"M24 34V14c5.51 0 10 4.49 10 10s-4.49 10-10 10m0-22c-6.62 0-12 5.38-12 12s5.38 12 12 12 12-5.38 12-12-5.38-12-12-12"})),We.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},We.createElement("path",{d:"M0 0H48V48H0z"}),We.createElement("mask",{fill:"currentColor"},We.createElement("use",{xlinkHref:"#photoeditorsdk-contrast-icon"})),We.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-contrast-icon"})));var xh=Jy;import Ne from"react";var Zy=()=>Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Ne.createElement("defs",null,Ne.createElement("path",{id:"photoeditorsdk-exposure-icon",d:"M24 34V14c5.51 0 10 4.49 10 10s-4.49 10-10 10m0-22c6.62 0 12 5.38 12 12s-5.38 12-12 12-12-5.38-12-12 5.38-12 12-12zm-3.536 8.464l-2.121 2.122-2.121-2.122-1.414 1.415L16.929 24l-2.121 2.121 1.414 1.415 2.121-2.122 2.121 2.122 1.415-1.415L19.757 24l2.122-2.121-1.415-1.415zm5.304 4.597l4.242-4.243 1.415 1.414-4.243 4.243-1.414-1.414z"})),Ne.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ne.createElement("path",{d:"M0 0H48V48H0z"}),Ne.createElement("mask",{fill:"currentColor"},Ne.createElement("use",{xlinkHref:"#photoeditorsdk-exposure-icon"})),Ne.createElement("use",{fill:"currentColor",fillOpacity:"0.9",transform:"rotate(45 24 24)",xlinkHref:"#photoeditorsdk-exposure-icon"})));var Sh=Zy;import Ve from"react";var Qy=()=>Ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Ve.createElement("defs",null,Ve.createElement("path",{id:"photoeditorsdk-gamma-icon",d:"M22.185 33.836c.594.109 1.2.164 1.815.164v2c-.735 0-1.462-.066-2.175-.197zm5.58-.568l.753 1.852c-.675.275-1.375.487-2.093.635l-.402-1.96c.597-.122 1.18-.299 1.741-.527zm-9.446-1.037c.5.346 1.03.646 1.586.895l-.82 1.824c-.666-.3-1.303-.66-1.903-1.074zm12.884-1.295l1.44 1.388a12.06 12.06 0 01-1.65 1.429l-1.167-1.625a10.06 10.06 0 001.377-1.192zm-15.758-1.754c.316.52.679 1.01 1.083 1.464l-1.493 1.33a12.038 12.038 0 01-1.3-1.756zm17.97-1.802l1.882.676a11.948 11.948 0 01-.925 1.982l-1.727-1.008a9.948 9.948 0 00.77-1.65zM24 18c.091 0 .182.002.273.006L24 18a6.071 6.071 0 01.668.037l.192.024a5.974 5.974 0 011.847.585l.01.005a5.992 5.992 0 011.154.768A5.99 5.99 0 0130 24c0 3.309-2.691 6-6 6a5.985 5.985 0 01-4.404-1.929l.163.17a6.052 6.052 0 01-1.353-2.07A5.951 5.951 0 0118 24c0-3.309 2.691-6 6-6zm2.827 3.173l-5.654 5.654A3.988 3.988 0 0024 28c2.206 0 4-1.794 4-4a3.988 3.988 0 00-1.173-2.827zM14.08 25.268c.076.606.208 1.2.392 1.777l-1.905.608a11.936 11.936 0 01-.472-2.134zm21.885-2.192a12.16 12.16 0 01-.032 2.198l-1.989-.21a10.193 10.193 0 00.027-1.836zM12.522 20.49l1.912.584a9.943 9.943 0 00-.37 1.783l-1.987-.226c.083-.73.232-1.445.445-2.14zm22.059-2.155c.345.643.63 1.316.853 2.013l-1.905.608a9.934 9.934 0 00-.71-1.676zm-19.587-2.266l1.5 1.323c-.402.456-.762.948-1.075 1.47l-1.715-1.03c.376-.625.808-1.215 1.29-1.763zm16.272-1.62c.58.442 1.12.936 1.61 1.476l-1.479 1.346c-.41-.45-.859-.862-1.343-1.23zm-12.241-1.372l.83 1.82a9.986 9.986 0 00-1.58.903l-1.147-1.638a11.986 11.986 0 011.897-1.085zm7.7-.766c.714.166 1.408.396 2.076.688L28 14.832a9.916 9.916 0 00-1.727-.573zm-2.857-.31l.021 2c-.613.006-1.22.068-1.812.184l-.383-1.964a12.046 12.046 0 012.174-.22z"})),Ve.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ve.createElement("path",{d:"M0 0H48V48H0z"}),Ve.createElement("mask",{fill:"#fff"},Ve.createElement("use",{xlinkHref:"#photoeditorsdk-gamma-icon"})),Ve.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-gamma-icon"})));var Ch=Qy;import Ue from"react";var tv=()=>Ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Ue.createElement("defs",null,Ue.createElement("path",{id:"photoeditorsdk-highlights-icon",d:"M31.07 31.07A9.932 9.932 0 0124 34c-2.67 0-5.18-1.04-7.07-2.93l14.14-14.14c3.9 3.9 3.9 10.24 0 14.14m1.42-15.56A11.995 11.995 0 0024 12c-3.07 0-6.14 1.17-8.49 3.51-4.68 4.69-4.68 12.29 0 16.98C17.86 34.83 20.93 36 24 36c3.07 0 6.14-1.17 8.49-3.51 4.68-4.69 4.68-12.29 0-16.98"})),Ue.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ue.createElement("path",{d:"M0 0H48V48H0z"}),Ue.createElement("mask",{fill:"currentColor"},Ue.createElement("use",{xlinkHref:"#photoeditorsdk-highlights-icon"})),Ue.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-highlights-icon"})));var wh=tv;import Ge from"react";var ev=()=>Ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Ge.createElement("defs",null,Ge.createElement("path",{id:"photoeditorsdk-saturation-icon",d:"M17 31c1.334 1.099 2 2.177 2 3.234 0 .797-.454 1.39-1.211 1.655-.165.057-.428.094-.789.111l-.172-.01a2.54 2.54 0 01-.617-.101C15.454 35.624 15 35.03 15 34.234c0-1.057.666-2.135 2-3.234zm8.7-6l-4.24 4H17v-3.81l.2-.19h8.5zm-.7-7.59l4.24 4.25L26.76 24h-8.54L25 17.41zm7.778-3.532a3 3 0 01.135 4.1l-.135.143-1.414 1.414 1.414 1.415-1.414 1.414-7.07-7.071 1.413-1.414 1.414 1.413 1.414-1.414a3.001 3.001 0 014.243 0z"})),Ge.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ge.createElement("path",{d:"M0 0H48V48H0z"}),Ge.createElement("mask",{fill:"currentColor"},Ge.createElement("use",{xlinkHref:"#photoeditorsdk-saturation-icon"})),Ge.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-saturation-icon"})));var kh=ev;import je from"react";var iv=()=>je.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},je.createElement("defs",null,je.createElement("path",{id:"photoeditorsdk-shadows-icon",d:"M30.365 17.637l3.076 3.076c.382 1.09.566 2.234.56 3.387l-5.05-5.049-1.414 1.414 6.123 6.124a9.674 9.674 0 01-.792 2.036l-6.746-6.745-1.414 1.414 7.036 7.036c-.212.254-.43.502-.672.742-.24.24-.488.46-.742.672l-7.036-7.036-1.414 1.414 6.745 6.746a9.674 9.674 0 01-2.036.792l-6.124-6.123-1.414 1.414L24.101 34a10.012 10.012 0 01-3.388-.558l-3.076-3.076-.707.707c-3.896-3.896-3.896-10.246 0-14.142 3.896-3.896 10.246-3.896 14.142 0l-.707.707zm-14.849-2.12c-4.688 4.687-4.688 12.281 0 16.97a12.036 12.036 0 004.108 2.693c.064.022.127.057.191.078 4.264 1.577 9.242.658 12.671-2.772 3.43-3.429 4.35-8.407 2.772-12.67-.02-.065-.056-.128-.078-.192a12.036 12.036 0 00-2.694-4.108c-4.688-4.688-12.282-4.688-16.97 0z"})),je.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},je.createElement("path",{d:"M0 0H48V48H0z"}),je.createElement("mask",{fill:"currentColor"},je.createElement("use",{xlinkHref:"#photoeditorsdk-shadows-icon"})),je.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-shadows-icon"})));var Th=iv;import Xe from"react";var ov=()=>Xe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Xe.createElement("defs",null,Xe.createElement("path",{id:"photoeditorsdk-sharpness-icon",d:"M24 12l11 24H13l11-24zm0 4.8V34h7.883L24 16.8z"})),Xe.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Xe.createElement("path",{d:"M0 0H48V48H0z"}),Xe.createElement("mask",{fill:"currentColor"},Xe.createElement("use",{xlinkHref:"#photoeditorsdk-sharpness-icon"})),Xe.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-sharpness-icon"})));var Ih=ov;import Ye from"react";var rv=()=>Ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Ye.createElement("defs",null,Ye.createElement("path",{id:"photoeditorsdk-temperature-icon",d:"M24 12a4 4 0 014 4v7.255a7 7 0 11-8 0V16a4 4 0 014-4zm0 2a2 2 0 00-2 2v8.298l-.856.597a5 5 0 105.712 0L26 24.298V16a2 2 0 00-2-2zm1 6v5.126A4.002 4.002 0 0124 33a4 4 0 01-1-7.874V20h2z"})),Ye.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ye.createElement("path",{d:"M0 0H48V48H0z"}),Ye.createElement("mask",{fill:"currentColor"},Ye.createElement("use",{xlinkHref:"#photoeditorsdk-temperature-icon"})),Ye.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-temperature-icon"})));var Mh=rv;import Ke from"react";var nv=()=>Ke.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Ke.createElement("defs",null,Ke.createElement("path",{id:"photoeditorsdk-whites-icon",d:"M24 12c6.627 0 12 5.373 12 12s-5.373 12-12 12-12-5.373-12-12 5.373-12 12-12zm-2 6.46h-2c.221 4.539.762 9.051 1 11.04h1.5l1.5-5.52 1.5 5.52H27c.238-1.989.779-6.501 1-11.04h-2c-.051 1.071-.432 7.446-.5 7.973-.459-1.717-.541-3.111-1-4.811h-1c-.442 1.7-.541 2.975-1 4.811-.051-.527-.466-6.902-.5-7.973z"})),Ke.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ke.createElement("path",{d:"M0 0H48V48H0z"}),Ke.createElement("mask",{fill:"currentColor"},Ke.createElement("use",{xlinkHref:"#photoeditorsdk-whites-icon"})),Ke.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-whites-icon"})));var Dh=nv;import Bi from"react";var sv=()=>Bi.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Bi.createElement("defs",null,Bi.createElement("path",{id:"photoeditorsdk-close-icon",d:"M21.583 0L24 2.416 14.416 12 24 21.584 21.583 24 12 14.416 2.417 24 0 21.584 9.584 12 0 2.416 2.417 0 12 9.584 21.583 0z"})),Bi.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Bi.createElement("mask",{fill:"currentColor"},Bi.createElement("use",{xlinkHref:"#photoeditorsdk-close-icon"})),Bi.createElement("use",{fill:"currentColor",fillRule:"nonzero",xlinkHref:"#photoeditorsdk-close-icon"})));var Eh=sv;import Oi from"react";function av(){return Oi.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Oi.createElement("defs",null,Oi.createElement("path",{id:"photoeditorsdk-export-icon",d:"M22 1.5a1.5 1.5 0 011.493 1.356L23.5 3H22h1.5v17a1.5 1.5 0 01-1.5 1.5H12a1.5 1.5 0 01-1.493-1.356L10.5 20v-6h2v5.499h9v-16h-9V9h-2V3A1.5 1.5 0 0112 1.5h10zM6.15 5.817L7.634 7.3l-3.171 3.171h13.978v2H4.47l3.171 3.17-1.483 1.483L.5 11.467l5.65-5.65z"})),Oi.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Oi.createElement("mask",{fill:"#fff"},Oi.createElement("use",{xlinkHref:"#photoeditorsdk-export-icon"})),Oi.createElement("use",{fill:"currentcolor",fillOpacity:"0.9",transform:"rotate(90 12 11.5)",xlinkHref:"#photoeditorsdk-export-icon"})))}var Ph=av;import Fi from"react";var lv=()=>Fi.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"25",height:"25",viewBox:"0 0 25 25"},Fi.createElement("defs",null,Fi.createElement("path",{id:"photoeditorsdk-redo-icon",d:"M4 10.065C4 4.506 8.365 0 13.75 0s9.75 4.506 9.75 10.065v9.29h-3v-9.29c0-3.849-3.022-6.968-6.75-6.968S7 6.217 7 10.065v7.741h3L5.5 24 1 17.806h3v-7.741z"})),Fi.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Fi.createElement("mask",{fill:"currentColor"},Fi.createElement("use",{xlinkHref:"#photoeditorsdk-redo-icon"})),Fi.createElement("use",{fill:"currentColor",transform:"matrix(0 1 1 0 .25 -.25)",xlinkHref:"#photoeditorsdk-redo-icon"})));var zh=lv;import Ri from"react";var cv=()=>Ri.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"25",height:"25",viewBox:"0 0 25 25"},Ri.createElement("defs",null,Ri.createElement("path",{id:"photoeditorsdk-undo-icon",d:"M4 10.065C4 4.506 8.365 0 13.75 0s9.75 4.506 9.75 10.065v9.29h-3v-9.29c0-3.849-3.022-6.968-6.75-6.968S7 6.217 7 10.065v7.741h3L5.5 24 1 17.806h3v-7.741z"})),Ri.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ri.createElement("mask",{fill:"currentColor"},Ri.createElement("use",{xlinkHref:"#photoeditorsdk-undo-icon"})),Ri.createElement("use",{fill:"currentColor",transform:"rotate(90 12.25 12)",xlinkHref:"#photoeditorsdk-undo-icon"})));var Ah=cv;import Hi from"react";function dv(){return Hi.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Center Align",width:"26",height:"26"},Hi.createElement("defs",null,Hi.createElement("path",{id:"photoeditorsdk-align-center-icon",d:"M31.5 30v3h-15v-3h15zm4.5-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),Hi.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Hi.createElement("mask",{fill:"#fff"},Hi.createElement("use",{xlinkHref:"#photoeditorsdk-align-center-icon"})),Hi.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-align-center-icon"})))}var Lh=dv;import _i from"react";var pv=()=>{return _i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Left Align",width:"26",height:"26"},_i.createElement("defs",null,_i.createElement("path",{id:"photoeditorsdk-align-left-icon",d:"M27 30v3H12v-3h15zm9-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),_i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},_i.createElement("mask",{fill:"#fff"},_i.createElement("use",{xlinkHref:"#photoeditorsdk-align-left-icon"})),_i.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-align-left-icon"})))};var Bh=pv;import qe from"react";function hv(){return qe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",width:"26",height:"26",focusable:"false","aria-hidden":"true","aria-label":"Right Align"},qe.createElement("defs",null,qe.createElement("path",{id:"photoeditorsdk-align-right-icon",d:"M27 30v3H12v-3h15zm9-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),qe.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},qe.createElement("path",{d:"M0 0H48V48H0z"}),qe.createElement("mask",{fill:"#fff"},qe.createElement("use",{xlinkHref:"#photoeditorsdk-align-right-icon"})),qe.createElement("use",{fill:"currentColor",transform:"matrix(-1 0 0 1 48 0)",xlinkHref:"#photoeditorsdk-align-right-icon"})))}var Oh=hv;import vt from"react";var uv=()=>vt.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Adjustments",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},vt.createElement("g",{fill:"none",fillRule:"evenodd"},vt.createElement("g",null,vt.createElement("g",{fill:"#D8D8D8",opacity:"0"},vt.createElement("rect",{width:"48",height:"48"})),vt.createElement("g",{transform:"translate(12 12)"},vt.createElement("rect",{fill:"#D8D8D8",opacity:"0",width:"24",height:"24"}),vt.createElement("g",{transform:"translate(2 13)",fill:"currentColor"},vt.createElement("path",{d:"M3.02746439,4 C3.00931666,4.16416693 3,4.33099545 3,4.5 C3,4.66900455 3.00931666,4.83583307 3.02746439,5 L0,5 L0,4 L3.02746439,4 Z M13,4 L20,4 L20,5 L13,5 L13,4 Z",fillOpacity:"0.2"}),vt.createElement("path",{d:"M5.09842503,6.29819429 C5.0340931,6.05140089 5,5.7851211 5,5.5 C5,3.56700338 6.56700338,2 8.5,2 C8.7851211,2 9.05140089,2.0340931 9.29819429,2.09842503 C10.0278893,2.64566496 10.5,3.5176988 10.5,4.5 C10.5,6.15685425 9.15685425,7.5 7.5,7.5 C6.5176988,7.5 5.64566496,7.02788926 5.09842503,6.29819429 Z M11.1637159,7.11349161 C10.874061,7.51881791 10.5188179,7.87406095 10.1134916,8.16371592 C10.5772175,7.93004328 10.9300433,7.5772175 11.1637159,7.11349161 Z",fillOpacity:"0.2"}),vt.createElement("path",{d:"M7.5,7.5 C9.15685425,7.5 10.5,6.15685425 10.5,4.5 C10.5,2.84314575 9.15685425,1.5 7.5,1.5 C5.84314575,1.5 4.5,2.84314575 4.5,4.5 C4.5,6.15685425 5.84314575,7.5 7.5,7.5 Z M7.5,9 C5.01471863,9 3,6.98528137 3,4.5 C3,2.01471863 5.01471863,0 7.5,0 C9.98528137,0 12,2.01471863 12,4.5 C12,6.98528137 9.98528137,9 7.5,9 Z",fillOpacity:"0.87"})),vt.createElement("g",{transform:"rotate(-180 11 5.5)",fill:"currentColor"},vt.createElement("path",{d:"M11.9725356,4 L20,4 L20,5 L11.9725356,5 C11.9906833,4.83583307 12,4.66900455 12,4.5 C12,4.33099545 11.9906833,4.16416693 11.9725356,4 Z M0,4 L2,4 L2,5 L0,5 L0,4 Z",fillOpacity:"0.2"}),vt.createElement("g",{transform:"rotate(-180 5 3.5)",fillOpacity:"0.2"},vt.createElement("path",{d:"M0.0984250251,4.29819429 C0.0340930963,4.05140089 0,3.7851211 0,3.5 C0,1.56700338 1.56700338,0 3.5,0 C3.7851211,0 4.05140089,0.0340930963 4.29819429,0.0984250251 C5.02788926,0.645664963 5.5,1.5176988 5.5,2.5 C5.5,4.15685425 4.15685425,5.5 2.5,5.5 C1.5176988,5.5 0.645664963,5.02788926 0.0984250251,4.29819429 Z M6.16371592,5.11349161 C5.87406095,5.51881791 5.51881791,5.87406095 5.11349161,6.16371592 C5.5772175,5.93004328 5.93004328,5.5772175 6.16371592,5.11349161 Z"})),vt.createElement("path",{d:"M7.5,7.5 C9.15685425,7.5 10.5,6.15685425 10.5,4.5 C10.5,2.84314575 9.15685425,1.5 7.5,1.5 C5.84314575,1.5 4.5,2.84314575 4.5,4.5 C4.5,6.15685425 5.84314575,7.5 7.5,7.5 Z M7.5,9 C5.01471863,9 3,6.98528137 3,4.5 C3,2.01471863 5.01471863,-3.6739404e-16 7.5,-3.6739404e-16 C9.98528137,-3.6739404e-16 12,2.01471863 12,4.5 C12,6.98528137 9.98528137,9 7.5,9 Z",fillOpacity:"0.87"}))))));var Fh=uv;import $i from"react";function mv(){return $i.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Brush",width:"48",height:"48",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},$i.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},$i.createElement("path",{fillOpacity:"0.87",d:"M14.73 18.86C13.293 19.503 11.624 20 10 20 2 20 0 13 0 10c.486.972 2.37 5.848 7.537 4.165C7.873 17.125 10.427 19 13 19c.6 0 1.177-.05 1.73-.14zM8.422 8.63a7.352 7.352 0 00-1.127 1.616L2.401 3.705c-.215-.287-.178-.807.072-1.056l.088-.088L8.5 8.5l-.078.13z",opacity:"0.5",transform:"translate(12 12) translate(2 2)"}),$i.createElement("path",{fillOpacity:"0.87",d:"M7.295 10.246c-.27.526-.48 1.09-.615 1.68L1.2 4.603c-.663-.885-.564-2.24.212-3.015l.176-.176c.78-.78 2.121-.881 3.015-.212l7.245 5.421a6.088 6.088 0 00-1.67.624L3.706 2.401c-.294-.22-.801-.184-1.056.072l-.176.176c-.25.25-.287.769-.072 1.056l4.894 6.54z",transform:"translate(12 12) translate(2 2)"}),$i.createElement("path",{fillOpacity:"0.87",d:"M9.702 6.554c-.185-.869-.151-.71-.207-.955C8.88 2.902 8.145 2 6 2 3.98 2 2 4.08 2 6.5c0 2.294 1.835 4 4 4 1.545 0 2.915-.342 4.544-1.088-.332-.7-.578-1.619-.842-2.858z",opacity:"0.5",transform:"translate(12 12) translate(2 2) translate(7 7)"}),$i.createElement("path",{fillOpacity:"0.25",d:"M10.379 9.027c.053.135.108.263.165.385C8.914 10.158 7.545 10.5 6 10.5c-2.165 0-4-1.706-4-4 0-1.528.79-2.921 1.88-3.74-.882 2.084-1.025 6.482 6.499 6.267z",transform:"translate(12 12) translate(2 2) translate(7 7)"}),$i.createElement("path",{fillOpacity:"0.87",d:"M9.702 6.554c-.185-.869-.151-.71-.207-.955C8.88 2.902 8.145 2 6 2 3.98 2 2 4.08 2 6.5c0 2.294 1.835 4 4 4 1.545 0 2.915-.342 4.544-1.088-.332-.7-.578-1.619-.842-2.858zM6 12C3.239 12 .5 9.842.5 6.5S3.239.5 6 .5c6.5 0 4 8 7 9.342C11 10.947 8.761 12 6 12z",transform:"translate(12 12) translate(2 2) translate(7 7)"})))}var Rh=mv;import he from"react";var fv=()=>he.createElement("svg",{"aria-hidden":"true",focusable:"false","aria-label":"Filter",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},he.createElement("g",{fill:"none",fillRule:"evenodd"},he.createElement("g",null,he.createElement("g",{fill:"#D8D8D8",opacity:"0"},he.createElement("rect",{width:"48",height:"48"})),he.createElement("g",{transform:"translate(16 14)",fill:"currentColor"},he.createElement("g",null,he.createElement("path",{d:"M1.53468397,11.3244256 C2.30584171,10.1516526 4.0927284,8.69757613 8,10 C11.5643313,11.1881104 13.1877038,10.2588113 13.9183327,9.30853287 C14.2918933,10.1286474 14.5,11.0400207 14.5,12 C14.5,15.5898509 11.5898509,18.5 8,18.5 C4.41014913,18.5 1.5,15.5898509 1.5,12 C1.5,11.7718729 1.51175212,11.5464906 1.53468397,11.3244256 Z",fillOpacity:"0.2"}),he.createElement("path",{d:"M1.53471819,12.6759057 C2.39408133,13.5811739 4.12541941,14.1109247 5.5,13.5 C9.81068889,11.5841383 9.99203585,9.66827654 14.3948028,10.8290113 C14.4639074,11.2088572 14.5,11.6002137 14.5,12 C14.5,15.5898509 11.5898509,18.5 8,18.5 C4.63838968,18.5 1.87279864,15.9481381 1.53471819,12.6759057 Z",fillOpacity:"0.25"}),he.createElement("path",{d:"M11,1.44328993e-15 L11,4.58151705 C13.9318303,5.7682918 16,8.64262245 16,12 C16,16.418278 12.418278,20 8,20 C3.581722,20 0,16.418278 0,12 C0,8.64262245 2.06816966,5.7682918 5,4.58151705 L5,1.60982339e-15 L6.5,1.44328993e-15 L6.5,5.67393184 C3.6333,6.35109564 1.5,8.92641836 1.5,12 C1.5,15.5898509 4.41014913,18.5 8,18.5 C11.5898509,18.5 14.5,15.5898509 14.5,12 C14.5,8.92641836 12.3667,6.35109564 9.5,5.67393184 L9.5,1.77635684e-15 L11,1.44328993e-15 Z",fillOpacity:"0.87"}))))));var Hh=fv;import Zt from"react";var gv=()=>Zt.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Focus",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},Zt.createElement("g",{fill:"none",fillRule:"evenodd"},Zt.createElement("g",null,Zt.createElement("g",{fill:"#D8D8D8",opacity:"0"},Zt.createElement("rect",{width:"48",height:"48"})),Zt.createElement("g",{transform:"translate(12 12)"},Zt.createElement("rect",{fill:"#D8D8D8",opacity:"0",width:"24",height:"24"}),Zt.createElement("g",{transform:"translate(4 2)",fill:"currentColor"},Zt.createElement("path",{d:"M8.51312274,19.9836057 C8.77273397,19.9669655 9.02898229,19.9377873 9.2812837,19.8966625 C9.14309542,19.9643562 9.04607398,20 9,20 C8.83633495,20 8.67398178,19.9944755 8.51312274,19.9836057 Z M2.27242753,15.0235117 C2.09503729,14.4174909 2,13.7771617 2,13.115 C2,8.89625769 7.39855682,4.1952443 9.03524007,2.8669743 C9.66704719,3.45933018 10.2896864,4.09178959 10.8802638,4.75434357 C12.9939648,7.12565193 14.310818,9.45010207 14.481291,11.4644804 C14.4937541,11.6117488 14.5,11.7569175 14.5,11.9 C14.5,15.5490785 11.5855665,18.5 8,18.5 C5.525182,18.5 3.37015673,17.0943182 2.27242753,15.0235117 Z M15.999821,11.9547651 C15.9999402,11.9698392 16,11.9849176 16,12 C16,12.0581275 15.9984809,12.1163475 15.9954873,12.1746435 C15.9978914,12.1015915 15.9993401,12.0282946 15.999821,11.9547651 Z",fillOpacity:"0.2"}),Zt.createElement("path",{d:"M3.47269084,16.6357644 C3.47244857,13.6389249 9.59189484,15.3529683 12,11.5 C13.2066771,9.56931667 12.316614,7.05620551 11.0727604,4.97270186 C13.0737756,7.26814668 14.316054,9.51197209 14.481291,11.4644804 C14.4937541,11.6117488 14.5,11.7569175 14.5,11.9 C14.5,15.5490785 11.5855665,18.5 8,18.5 C6.2411126,18.5 4.64375705,17.7899702 3.47269084,16.6357644 Z",fillOpacity:"0.25"}),Zt.createElement("path",{d:"M7.73975027,2.16383649 C6.84545319,2.94914111 5.95084629,3.82194197 5.11973623,4.75434357 C3.00603518,7.12565193 1.68918197,9.45010207 1.51870896,11.4644804 C1.50624591,11.6117488 1.5,11.7569175 1.5,11.9 C1.5,15.5492218 4.41434886,18.5 8,18.5 C11.5855665,18.5 14.5,15.5490785 14.5,11.9 C14.5,11.7569175 14.4937541,11.6117488 14.481291,11.4644804 C14.310818,9.45010207 12.9939648,7.12565193 10.8802638,4.75434357 C10.0491537,3.82194197 9.15454681,2.94914111 8.26024973,2.16383649 C8.17157048,2.08596503 8.08476013,2.01060875 8,1.93784184 C7.91523987,2.01060875 7.82842952,2.08596503 7.73975027,2.16383649 Z M8,20 C3.581722,20 0,16.3735065 0,11.9 C0,6.05 8,0 8,0 C8,0 16,6.05 16,11.9 C16,16.3732777 12.418278,20 8,20 Z",fillOpacity:"0.87"}))))));var _h=gv;import Co from"react";var bv=()=>Co.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",focusable:"false","aria-hidden":"true","aria-label":"Frames",width:"48",height:"48",viewBox:"0 0 48 48"},Co.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(12 12)"},Co.createElement("path",{fillOpacity:"0.2",d:"M8 8L17 7 17 17 7 17z"}),Co.createElement("path",{fillOpacity:"0.87",d:"M4.5 19.5h15v-15h-15v15zM3 3h18v18H3V3z"}),Co.createElement("path",{fillOpacity:"0.87",d:"M7 17h10V7H7v10zM6 6h12v12H6V6z"}),Co.createElement("path",{fillOpacity:"0.25",d:"M9 15L11 12 13 14 14 13.5 15 15z"})));var $h=bv;import _t from"react";var yv=()=>_t.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Library",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},_t.createElement("g",{fill:"none",fillRule:"evenodd"},_t.createElement("g",{transform:"translate(15 15)",fill:"currentColor"},_t.createElement("g",null,_t.createElement("polygon",{fillOpacity:"0.2",points:"3 3 12.5 1.5 12.5 15.5 1.5 15.5"}),_t.createElement("path",{d:"M1.5,1.5 L1.5,15.5 L12.5,15.5 L12.5,1.5 L1.5,1.5 Z M0,0 L14,0 L14,17 L0,17 L0,0 Z",fillOpacity:"0.87"}),_t.createElement("polygon",{fillOpacity:"0.25",points:"3 11 6 7 8 9 9 8.5 11 11"}),_t.createElement("circle",{fillOpacity:"0.25",cx:"9",cy:"5",r:"1"}),_t.createElement("rect",{fillOpacity:"0.25",x:"3",y:"13",width:"8",height:"1"}),_t.createElement("g",{transform:"rotate(14 -2.352 56.952)",fillOpacity:"0.2"},_t.createElement("path",{d:"M1.32904158,1.07500967e-13 L5,1.07500967e-13 L5,14.7234101 L4,10.7126291 L4,1 L1.57836958,1 L1.32904158,1.07500967e-13 Z M5,14.9745817 L5,16 L0.887271787,16 L5,14.9745817 Z"}),_t.createElement("path",{d:"M1.82769758,2 L3,2 L3,6.70184819 L1.82769758,2 Z"}))))));var Wh=yv;import ur from"react";var vv=()=>ur.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Overlays",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},ur.createElement("g",{fill:"none",fillRule:"evenodd"},ur.createElement("g",{transform:"translate(15 15)",fill:"currentColor"},ur.createElement("path",{d:"M13.5,4 L13.5,13.5 L4,13.5 L4,5 C4,4.44771525 4.44771525,4 5,4 L13.5,4 Z M15,4 L17,4 C17.5522847,4 18,4.44771525 18,5 L18,17 C18,17.5522847 17.5522847,18 17,18 L5,18 C4.44771525,18 4,17.5522847 4,17 L4,15 L14,15 C14.5522847,15 15,14.5522847 15,14 L15,4 Z",fillOpacity:"0.2"}),ur.createElement("path",{d:"M1.5,1.5 L1.5,13.5 L13.5,13.5 L13.5,1.5 L1.5,1.5 Z M1,0 L14,0 C14.5522847,-1.01453063e-16 15,0.44771525 15,1 L15,14 C15,14.5522847 14.5522847,15 14,15 L1,15 C0.44771525,15 6.76353751e-17,14.5522847 0,14 L0,1 C-6.76353751e-17,0.44771525 0.44771525,1.01453063e-16 1,0 Z",fillOpacity:"0.87"}))));var Nh=vv;import Ie from"react";var xv=()=>Ie.createElement("svg",{focusable:"false","aria-hidden":"true",width:"48px",height:"48px",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-label":"Stickers",viewBox:"0 0 48 48"},Ie.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},Ie.createElement("g",null,Ie.createElement("g",{transform:"translate(14.000000, 14.000000)",fill:"currentColor"},Ie.createElement("g",{transform:"translate(2.000000, 2.000000)",fillOpacity:"0.2"},Ie.createElement("path",{d:"M11.5840291,0.290311095 C14.1040281,1.4637822 15.9529364,3.83641178 16.3972985,6.6747443 C11.4538042,7.5567274 7.55733385,11.4556991 6.68374109,16.3973312 C3.83946575,15.9530468 1.46423317,14.1041207 0.290132399,11.5832649 C0.0988489957,10.7650202 3.01980663e-14,9.89786431 3.01980663e-14,9 C3.01980663e-14,6.64646143 0.903391324,4.50392121 2.38232909,2.90022422 C4.02683831,1.11698861 6.38297582,-3.55271368e-15 9,-3.55271368e-15 C9.89814387,-3.55271368e-15 10.7655602,0.0989105588 11.5840291,0.290311095 Z"}),Ie.createElement("path",{d:"M17.9877222,8 L8,17.9877222 C8.2591955,12.5923102 12.5906864,8.26470667 17.9877222,8 Z"})),Ie.createElement("path",{d:"M9.87290303,14.9211604 C9.09408801,14.4293124 5,11.7146562 5,9 C5,7.34 6.34,6 8,6 C8.77,6 9.47,6.52 10,7 C10.53,6.52 11.23,6 12,6 C13.66,6 15,7.34 15,9 C15,9.30171667 14.9494261,9.60343334 14.8584511,9.90209822 C12.7354304,11.0373368 10.9933363,12.7905402 9.87290303,14.9211604 Z",fillOpacity:"0.25"}),Ie.createElement("path",{d:"M10,1.5 C5.30557963,1.5 1.5,5.30557963 1.5,10 C1.5,14.2449983 4.61102233,17.7611603 8.68374109,18.3973312 C9.55733385,13.4556991 13.4538042,9.5567274 18.3972985,8.6747443 C17.7608961,4.60976745 14.2436106,1.5 10,1.5 Z M0,10 C0,4.4771525 4.4771525,0 10,0 C15.5228475,0 20,4.4771525 20,10 C14.5988732,10.2649073 10.2649073,14.5988732 10.0116954,19.9999933 C4.4771525,20 0,15.5228475 0,10 Z",fillOpacity:"0.87"})))));var Vh=xv;import mr from"react";var Sv=()=>{return mr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Texts",width:"48",height:"48"},mr.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},mr.createElement("path",{fillOpacity:"0.2",d:"M17.883 19.5H16.07L11.702 6.833l1.235-1.411L17.883 19.5z",transform:"translate(12 12)"}),mr.createElement("path",{fillOpacity:"0.87",d:"M10.8 8.818L8.483 14.5h4.275l-1.96-5.682zM10 6.5l3.5-4 5.973 17H21V21h-8v-1.5h1.483L13.276 16H7.873l-1.426 3.5H8V21H3v-1.5h1.704L10 6.5zm1.702.333L16.069 19.5h1.814L12.937 5.422l-1.235 1.411z",transform:"translate(12 12)"}),mr.createElement("path",{fillOpacity:"0.2",d:"M19.55 15l-.35-1H21v1h-1.45zm1.05 3l-.35-1H21v1h-.4zM7.639 8L7.25 9H3V8h4.639zm1.167-3l-.39 1H7V5h1.806zm-2.334 6l-.389 1H6v-1h.472zm-1.166 3l-.39 1H3v-1h2.306zm-1.167 3l-.389 1H3v-1h1.139zM15.35 3L15 2h1v1h-.65zm3.15 9l-.35-1H21v1h-2.5zm-1.05-3l-.35-1H21v1h-3.55zM16.4 6l-.35-1H18v1h-1.6zm-5.9-3H9V2h2.5l-1 1zM3 5h3v1H3V5zm16 0h2v1h-2V5zM3 11h2v1H3v-1zm18-8h-4V2h4v1zM8 3H3V2h5v1z",transform:"translate(12 12)"})))};var Uh=Sv;import fr from"react";var Cv=()=>{return fr.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Text Design",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},fr.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},fr.createElement("path",{fillOpacity:"0.87",d:"M1 0h14a1 1 0 011 1v19l-8-6-8 6V1a1 1 0 011-1zm.5 1.5V17L8 12.125 14.5 17V1.5h-13z",transform:"translate(14 14) translate(2)"}),fr.createElement("path",{fillOpacity:"0.2",d:"M1.5 1.5h13V17L8 12.125 1.5 17V1.5z",transform:"translate(14 14) translate(2)"}),fr.createElement("path",{fillOpacity:"0.25",d:"M9 4l2.52 7H10.2l-.7-1.85H6.45L5.77 11H4.49L6.9 4H9zm-1.04.78h-.05L6.73 8.14H9.2L7.96 4.78z",transform:"translate(14 14) translate(2)"})))};var Gh=Cv;import Wi from"react";function wv(){return Wi.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Transform",width:"48",height:"48",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},Wi.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(12 12)"},Wi.createElement("path",{fillOpacity:"0.2",d:"M10 10L15 9 15 15 9 15z"}),Wi.createElement("path",{fillOpacity:"0.87",d:"M9 15h6V9H9v6zm-1.5 0V7.5H15V3h1.5v13.5H3V15h4.5zm0 2.5H9V21H7.5v-3.5zM21 7.5V9h-3.5V7.5H21z"}),Wi.createElement("g",{fillOpacity:"0.2"},Wi.createElement("path",{d:"M0 10h1a9.003 9.003 0 015.5-8.294L7 3 10.942.044C10.632.014 10.318 0 10 0 4.477 0 0 4.477 0 10z",transform:"translate(2 2)"}),Wi.createElement("path",{d:"M9 20h1a9.003 9.003 0 015.5-8.294L16 13l3.942-2.956c-.31-.03-.624-.044-.942-.044-5.523 0-10 4.477-10 10z",transform:"translate(2 2) rotate(-180 14.47 15)"}))))}var jh=wv;import Ni from"react";var kv=()=>Ni.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Ni.createElement("defs",null,Ni.createElement("path",{id:"photoeditorsdk-icon-add-text",d:"M12 0c6.627 0 12 5.373 12 12s-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0zm1 6h-2v5H6v2h5v5h2v-5h5v-2h-5V6z"})),Ni.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ni.createElement("mask",{fill:"currentColor"},Ni.createElement("use",{xlinkHref:"#photoeditorsdk-icon-add-text"})),Ni.createElement("use",{fill:"currentColor",fillRule:"nonzero",xlinkHref:"#photoeditorsdk-icon-add-text"})));var Xh=kv;import Yh from"react";var Tv=()=>Yh.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Yh.createElement("path",{fill:"currentColor",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M12 1c5.523 0 10 4.477 10 10a9.98 9.98 0 01-3.678 7.749c1.877.92 3.445 2.251 4.502 3.88l.176.283-1.743 1.02c-1.04-1.735-2.824-3.102-4.995-3.884A9.94 9.94 0 0112 21a9.962 9.962 0 01-4.255-.948c-2.076.748-3.797 2.033-4.852 3.661l-.147.237L1 22.935c1.053-1.766 2.694-3.204 4.684-4.183A9.975 9.975 0 012 11C2 5.477 6.477 1 12 1zm0 2a8 8 0 100 16 8 8 0 000-16zm0 5a5 5 0 110 10 5 5 0 010-10zm0 2a3 3 0 100 6 3 3 0 000-6zm1-4v1h-2V6h2z"}));var Kh=Tv;import qh from"react";var Iv=()=>qh.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},qh.createElement("path",{fill:"currentColor",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M16.23 10.885a2.292 2.292 0 00-2.285-2.286 2.292 2.292 0 00-2.286 2.286 2.292 2.292 0 002.286 2.286 2.292 2.292 0 002.286-2.286zM13.946.599C8.265.6 3.66 5.205 3.66 10.885H.231l4.571 4.571 4.572-4.571H5.945c0-4.423 3.577-8 8-8s8 3.577 8 8a7.994 7.994 0 01-12.64 6.514l-1.623 1.646a10.3 10.3 0 006.263 2.126c5.68 0 10.286-4.606 10.286-10.286S19.625.599 13.945.599z",transform:"rotate(56 11.298 10.261)"}));var Jh=Iv;import Vi from"react";function Mv(){return Vi.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Vi.createElement("defs",null,Vi.createElement("path",{id:"photoeditorsdk-shuffle-icon",d:"M24 10v8a3 3 0 01-3 3H6v3l-6-4 6-4v3h15a1 1 0 001-1v-8h2zM18 0l6 4-6 4V5H3a1 1 0 00-1 1v8H0V6a3 3 0 013-3h15V0z"})),Vi.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Vi.createElement("mask",{fill:"currentColor"},Vi.createElement("use",{xlinkHref:"#photoeditorsdk-shuffle-icon"})),Vi.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-shuffle-icon"})))}var Zh=Mv;import Ui from"react";var Dv=()=>Ui.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Ui.createElement("defs",null,Ui.createElement("path",{id:"photoeditorsdk-upload-icon",d:"M4.143 17.286l-.001 3.142h15.715v-3.142H23v6.285H1v-6.285h3.143zM12 0l9.429 9.429-2.2 2.2L13.57 5.97v9.743H10.43V5.971L4.77 11.63l-2.2-2.2L12 0z"})),Ui.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ui.createElement("mask",{fill:"currentColor"},Ui.createElement("use",{xlinkHref:"#photoeditorsdk-upload-icon"})),Ui.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-upload-icon"})));var Qh=Dv;import Je from"react";var Ev=()=>Je.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Je.createElement("defs",null,Je.createElement("path",{id:"photoeditorsdk-bring-to-front-icon",d:"M21 16a2 2 0 012 2v4a2 2 0 01-2 2H3a2 2 0 01-2-2v-4a2 2 0 012-2h18zM12.006 1l5.996 5.996-1.414 1.414-3.578-3.577V12h-2.008V4.833L7.418 8.417 6.004 7.003 12.006 1z"})),Je.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Je.createElement("path",{d:"M0 0H24V24H0z"}),Je.createElement("mask",{fill:"currentColor"},Je.createElement("use",{xlinkHref:"#photoeditorsdk-bring-to-front-icon"})),Je.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-bring-to-front-icon"})));var tu=Ev;import dt from"react";var Pv=({highlight:i="currentColor",width:t=48,height:e=48})=>dt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,viewBox:"0 0 48 48"},dt.createElement("g",{fill:"none",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},dt.createElement("g",{fill:i,transform:"translate(13 13)"},dt.createElement("path",{d:"M22 3.701h-1.642V1.644l-2.06-.001V0h2.538c.421 0 .682.174.827.32.322.322.337.748.337.83v2.551z"}),dt.createElement("path",{d:"M1.643 3.701H0V1.165C0 .743.174.482.32.336.64.016 1.06 0 1.147 0H3.701v1.643H1.644l-.001 2.058z"}),dt.createElement("path",{d:"M13.7232174 1.5486087L17.4249565 1.5486087 17.4249565 0 13.7232174 0z"}),dt.createElement("path",{d:"M9.15008696 1.5486087L12.8508696 1.5486087 12.8508696 0 9.15008696 0z"}),dt.createElement("path",{d:"M4.57504348 1.5486087L8.27678261 1.5486087 8.27678261 0 4.57504348 0z"}),dt.createElement("path",{d:"M0 8.27582609L1.5486087 8.27582609 1.5486087 4.57504348 0 4.57504348z"}),dt.createElement("path",{d:"M20.4513913 8.27582609L22 8.27582609 22 4.57504348 20.4513913 4.57504348z"}),dt.createElement("path",{d:"M0 12.8508696L1.5486087 12.8508696 1.5486087 9.14913043 0 9.14913043z"}),dt.createElement("path",{d:"M0 17.4249565L1.5486087 17.4249565 1.5486087 13.7232174 0 13.7232174z"}),dt.createElement("path",{d:"M20.4513913 12.8508696L22 12.8508696 22 9.14913043 20.4513913 9.14913043z"}),dt.createElement("path",{d:"M20.4513913 17.4249565L22 17.4249565 22 13.7232174 20.4513913 13.7232174z"}),dt.createElement("path",{d:"M3.702 22H1.165c-.421 0-.682-.174-.828-.32-.322-.322-.337-.748-.337-.83v-2.552h1.643v2.059h2.059V22z"}),dt.createElement("path",{d:"M20.853 22h-2.554v-1.642h2.057l.001-2.06H22v2.538c0 .42-.174.682-.319.827-.32.32-.742.337-.828.337"}),dt.createElement("path",{d:"M4.57504348 22L8.27678261 22 8.27678261 20.4513913 4.57504348 20.4513913z"}),dt.createElement("path",{d:"M9.15008696 22L12.8508696 22 12.8508696 20.4513913 9.15008696 20.4513913z"}),dt.createElement("path",{d:"M13.7232174 22L17.4249565 22 17.4249565 20.4513913 13.7232174 20.4513913z"}))));var eu=Pv;import hl from"react";var zv=({highlight:i="currentColor",width:t=48,height:e=48})=>hl.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,viewBox:"0 0 48 48"},hl.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},hl.createElement("path",{fill:i,d:"M29.967 13.005L26.984 13c-3.35 0-5.516 2.222-5.516 5.66v2.61h-2.999c-.26 0-.469.21-.469.47v3.78c0 .26.21.47.469.47h2.999v9.541c0 .26.21.469.469.469h3.912c.26 0 .47-.21.47-.469V25.99h3.506c.259 0 .469-.21.469-.47l.001-3.78a.47.47 0 00-.469-.47h-3.508v-2.212c0-1.064.254-1.603 1.639-1.603l2.01-.001c.258 0 .468-.21.468-.47v-3.51a.47.47 0 00-.468-.47z"})));var iu=zv;import wo from"react";var Av=({highlight:i="currentColor",width:t=48,height:e=48})=>wo.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,viewBox:"0 0 48 48"},wo.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},wo.createElement("g",{fill:i,transform:"translate(13 13)"},wo.createElement("path",{d:"M15.125 0h-8.25A6.876 6.876 0 000 6.875v8.25A6.876 6.876 0 006.875 22h8.25A6.876 6.876 0 0022 15.125v-8.25A6.876 6.876 0 0015.125 0zm4.813 15.125a4.818 4.818 0 01-4.813 4.813h-8.25a4.818 4.818 0 01-4.813-4.813v-8.25a4.818 4.818 0 014.813-4.813h8.25a4.818 4.818 0 014.813 4.813v8.25z"}),wo.createElement("path",{d:"M11 5.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zm0 8.938A3.442 3.442 0 017.562 11 3.441 3.441 0 0111 7.562 3.441 3.441 0 0114.438 11 3.442 3.442 0 0111 14.438z"}),wo.createElement("circle",{cx:"16.913",cy:"5.088",r:"1"}))));var ou=Av;import ul from"react";var Lv=({highlight:i="currentColor",width:t=48,height:e=48})=>ul.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,viewBox:"0 0 48 48"},ul.createElement("g",{fill:"none",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ul.createElement("path",{fill:i,d:"M36 17.305c-.892.402-1.843.668-2.835.797a4.997 4.997 0 002.165-2.79 9.685 9.685 0 01-3.12 1.222 4.874 4.874 0 00-3.595-1.596c-2.723 0-4.916 2.267-4.916 5.047 0 .4.032.785.113 1.151-4.09-.205-7.71-2.215-10.141-5.278a5.18 5.18 0 00-.673 2.55c0 1.748.877 3.297 2.185 4.194a4.766 4.766 0 01-2.223-.621v.055c0 2.452 1.705 4.49 3.942 4.958-.4.113-.837.167-1.29.167-.315 0-.633-.019-.931-.087.637 1.999 2.446 3.468 4.597 3.516a9.73 9.73 0 01-6.1 2.152c-.404 0-.791-.018-1.178-.07a13.601 13.601 0 007.548 2.266c9.054 0 14.004-7.693 14.004-14.36 0-.224-.008-.439-.018-.653A9.958 9.958 0 0036 17.305z"})));var ru=Lv;import Bv from"styled-components";var Ov=Bv.svg.attrs({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"})``;var Ot=Ov;import q from"react";var Fv=({highlight:i="#565656",width:t=32,height:e=32})=>q.createElement(Ot,{width:t,height:e,viewBox:"0 0 32 32"},q.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},q.createElement("g",{fill:i,transform:"translate(-8 -8)"},q.createElement("g",{transform:"translate(8 8)"},q.createElement("g",null,q.createElement("path",{d:"M.941 31.992h2.824v-.94L.941 31.05v-2.822h-.94v2.846s-.004.918.94.918"}),q.createElement("path",{d:"M31.974 31.051v-2.823h-.942v2.823h-2.823v.941h2.846s.919.003.919-.94"}),q.createElement("path",{d:"M4.62305882 31.9926588L8.38776471 31.9926588 8.38776471 31.0514824 4.62305882 31.0514824z"}),q.createElement("path",{d:"M9.32894118 31.9926588L13.0936471 31.9926588 13.0936471 31.0514824 9.32894118 31.0514824z"}),q.createElement("path",{d:"M14.0348235 31.9926588L17.7995294 31.9926588 17.7995294 31.0514824 14.0348235 31.0514824z"}),q.createElement("path",{d:"M18.7407059 31.9926588L22.5054118 31.9926588 22.5054118 31.0514824 18.7407059 31.0514824z"}),q.createElement("path",{d:"M23.4465882 31.9926588L27.2112941 31.9926588 27.2112941 31.0514824 23.4465882 31.0514824z"}),q.createElement("path",{d:"M0 .94v2.824h.941L.942.941h2.823V0H.919S0-.002 0 .94"}),q.createElement("path",{d:"M31.032 0H28.21v.94l2.823.002v2.822h.942V.92s.002-.92-.942-.92"}),q.createElement("path",{d:"M4.62305882 0.940423529L8.38776471 0.940423529 8.38776471 -0.000752941176 4.62305882 -0.000752941176z"}),q.createElement("path",{d:"M9.32894118 0.940423529L13.0936471 0.940423529 13.0936471 -0.000752941176 9.32894118 -0.000752941176z"}),q.createElement("path",{d:"M14.0348235 0.940423529L17.7995294 0.940423529 17.7995294 -0.000752941176 14.0348235 -0.000752941176z"}),q.createElement("path",{d:"M18.7407059 0.940423529L22.5054118 0.940423529 22.5054118 -0.000752941176 18.7407059 -0.000752941176z"}),q.createElement("path",{d:"M23.4465882 0.940423529L27.2112941 0.940423529 27.2112941 -0.000752941176 23.4465882 -0.000752941176z"}),q.createElement("path",{d:"M0 8.46324706L0.941176471 8.46324706 0.941176471 4.69854118 0 4.69854118z"}),q.createElement("path",{d:"M0 13.1691294L0.941176471 13.1691294 0.941176471 9.40442353 0 9.40442353z"}),q.createElement("path",{d:"M0 17.8750118L0.941176471 17.8750118 0.941176471 14.1103059 0 14.1103059z"}),q.createElement("path",{d:"M0 22.5808941L0.941176471 22.5808941 0.941176471 18.8161882 0 18.8161882z"}),q.createElement("path",{d:"M0 27.2867765L0.941176471 27.2867765 0.941176471 23.5220706 0 23.5220706z"}),q.createElement("path",{d:"M30.976 8.46324706L31.9171765 8.46324706 31.9171765 4.69854118 30.976 4.69854118z"}),q.createElement("path",{d:"M30.976 13.1691294L31.9171765 13.1691294 31.9171765 9.40442353 30.976 9.40442353z"}),q.createElement("path",{d:"M30.976 17.8750118L31.9171765 17.8750118 31.9171765 14.1103059 30.976 14.1103059z"}),q.createElement("path",{d:"M30.976 22.5808941L31.9171765 22.5808941 31.9171765 18.8161882 30.976 18.8161882z"}),q.createElement("path",{d:"M30.976 27.2867765L31.9171765 27.2867765 31.9171765 23.5220706 30.976 23.5220706z"}))))));var nu=Fv;import Gn from"react";var Rv=({highlight:i="#565656",width:t=32,height:e=48})=>Gn.createElement(Ot,{width:t,height:e,viewBox:"0 0 42 32"},Gn.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Gn.createElement("g",{fill:i,transform:"translate(-3 -8)"},Gn.createElement("rect",{width:"42",height:"32",x:"3",y:"8",rx:"0.5"}))));var su=Rv;import jn from"react";var Hv=({highlight:i="#565656",width:t=26,height:e=46})=>jn.createElement(Ot,{width:t,height:e,viewBox:"0 0 26 46"},jn.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},jn.createElement("g",{fill:i,transform:"translate(-11 -1)"},jn.createElement("path",{d:"M1 11.496A.5.5 0 011.5 11h45a.5.5 0 01.5.496v25.008a.5.5 0 01-.5.496h-45a.5.5 0 01-.5-.496V11.496z",transform:"rotate(90 24 24)"}))));var au=Hv;import Xn from"react";var _v=({highlight:i="#565656",width:t=26,height:e=46})=>Xn.createElement(Ot,{width:t,height:e,viewBox:"0 0 26 46"},Xn.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Xn.createElement("g",{fill:i,transform:"translate(-11 -1)"},Xn.createElement("path",{d:"M1 11.496A.5.5 0 011.5 11h45a.5.5 0 01.5.496v25.008a.5.5 0 01-.5.496h-45a.5.5 0 01-.5-.496V11.496z"}))));var lu=_v;import Me from"react";var $v=({highlight:i="#565656",mask:t="#fff",width:e=32,height:o=32})=>Me.createElement(Ot,{width:e,height:o,viewBox:"0 0 32 32"},Me.createElement("defs",null,Me.createElement("rect",{id:"photoeditorsdk-square-icon",width:"32",height:"32",x:"0.92",y:"0.707",rx:"1"})),Me.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Me.createElement("g",{transform:"translate(-8 -8)"},Me.createElement("g",{transform:"translate(7.08 7.293)"},Me.createElement("mask",{fill:t},Me.createElement("use",{xlinkHref:"#photoeditorsdk-square-icon"})),Me.createElement("use",{fill:i,xlinkHref:"#photoeditorsdk-square-icon"})))));var cu=$v;import Yn from"react";var Wv=({highlight:i="#565656",width:t=32,height:e=42})=>Yn.createElement(Ot,{width:t,height:e,viewBox:"0 0 32 42"},Yn.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Yn.createElement("g",{fill:i,transform:"translate(-8 -3)"},Yn.createElement("rect",{width:"42",height:"32",x:"3",y:"8",rx:"0.5",transform:"rotate(90 24 24)"}))));var du=Wv;import De from"react";var Nv=({main:i="#424242",highlight:t="#565656",width:e="48px",height:o="48px"})=>De.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:o,viewBox:"0 0 48 48"},De.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},De.createElement("rect",{width:"28",height:"3",x:"12",y:"41",fill:i,rx:"0.5",transform:"matrix(-1 0 0 1 52 0)"}),De.createElement("rect",{width:"34",height:"28",x:"7",y:"8",fill:t,rx:"0.5",transform:"matrix(1 0 0 -1 0 44)"}),De.createElement("rect",{width:"3",height:"3",x:"8",y:"41",fill:i,rx:"0.5",transform:"matrix(-1 0 0 1 19 0)"}),De.createElement("rect",{width:"28",height:"3",x:"12",y:"37",fill:i,rx:"0.5",transform:"matrix(-1 0 0 1 52 0)"}),De.createElement("rect",{width:"28",height:"3",x:"12",y:"4",fill:i,rx:"0.5",transform:"matrix(1 0 0 -1 0 11)"}),De.createElement("rect",{width:"3",height:"3",x:"8",y:"37",fill:i,rx:"0.5",transform:"matrix(-1 0 0 1 19 0)"}),De.createElement("rect",{width:"3",height:"3",x:"8",y:"4",fill:i,rx:"0.5",transform:"matrix(1 0 0 -1 0 11)"})));var pu=Nv;import Ee from"react";var Vv=({main:i="#424242",highlight:t="#565656",width:e="48px",height:o="48px"})=>Ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:o,viewBox:"0 0 48 48"},Ee.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ee.createElement("g",null,Ee.createElement("path",{fill:i,d:"M42 5a1 1 0 011 1v13a1 1 0 01-1 1H6a1 1 0 01-1-1V6a1 1 0 011-1h36zM21.505 18h-2.01a.494.494 0 00-.495.5c0 .268.222.5.495.5h2.01c.28 0 .495-.224.495-.5l-.008-.088a.503.503 0 00-.487-.412zm8.004 0h-5.018a.5.5 0 000 1h5.018a.5.5 0 00.491-.5l-.008-.088A.5.5 0 0029.51 18z"}),Ee.createElement("rect",{width:"22",height:"11",x:"20",y:"29",fill:i,rx:"1"}),Ee.createElement("rect",{width:"13",height:"10",x:"6",y:"23",fill:i,rx:"1"}),Ee.createElement("rect",{width:"22",height:"5",x:"20",y:"23",fill:i,rx:"1"}),Ee.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:t,rx:"1"}),Ee.createElement("rect",{width:"13",height:"9",x:"6",y:"34",fill:i,rx:"1"}))));var hu=Vv;import Pe from"react";var Uv=({main:i="#424242",highlight:t="#565656",width:e="48px",height:o="48px"})=>Pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:o,viewBox:"0 0 48 48"},Pe.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Pe.createElement("g",{transform:"translate(5 5)"},Pe.createElement("path",{fill:t,d:"M37 0a1 1 0 011 1v13a1 1 0 01-1 1H1a1 1 0 01-1-1V1a1 1 0 011-1h36zM16.505 13h-2.01a.494.494 0 00-.495.5c0 .268.222.5.495.5h2.01c.28 0 .495-.224.495-.5l-.008-.088a.503.503 0 00-.487-.412zm8.004 0h-5.018a.5.5 0 000 1h5.018a.5.5 0 00.491-.5l-.008-.088A.5.5 0 0024.51 13z"}),Pe.createElement("rect",{width:"22",height:"11",x:"15",y:"24",fill:i,rx:"1"}),Pe.createElement("rect",{width:"13",height:"10",x:"1",y:"18",fill:i,rx:"1"}),Pe.createElement("rect",{width:"22",height:"5",x:"15",y:"18",fill:i,rx:"1"}),Pe.createElement("rect",{width:"7",height:"7",x:"4",y:"9",fill:i,rx:"1"}),Pe.createElement("rect",{width:"13",height:"9",x:"1",y:"29",fill:i,rx:"1"}))));var uu=Uv;import Ze from"react";var Gv=({main:i="#424242",highlight:t="#565656",width:e="48px",height:o="48px"})=>Ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:o,viewBox:"0 0 48 48"},Ze.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ze.createElement("rect",{width:"26",height:"7",x:"7",y:"18",fill:i,rx:"1"}),Ze.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:i,rx:"1"}),Ze.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:i,rx:"1"}),Ze.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:i,rx:"1"}),Ze.createElement("rect",{width:"26",height:"21",x:"7",y:"27",fill:i,rx:"1"}),Ze.createElement("rect",{width:"26",height:"16",x:"7",y:"5",fill:t,rx:"1"})));var mu=Gv;import Qe from"react";var jv=({main:i="#424242",highlight:t="#565656",width:e="48px",height:o="48px"})=>Qe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:o,viewBox:"0 0 48 48"},Qe.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Qe.createElement("rect",{width:"26",height:"7",x:"7",y:"34",fill:i,rx:"1"}),Qe.createElement("rect",{width:"26",height:"32",x:"7",y:"5",fill:t,rx:"1"}),Qe.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:i,rx:"1"}),Qe.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:i,rx:"1"}),Qe.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:i,rx:"1"}),Qe.createElement("rect",{width:"26",height:"5",x:"7",y:"43",fill:i,rx:"1"})));var fu=jv;import ti from"react";var Xv=({main:i="#424242",highlight:t="#565656",width:e="48px",height:o="48px"})=>ti.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:o,viewBox:"0 0 48 48"},ti.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ti.createElement("rect",{width:"26",height:"7",x:"7",y:"28",fill:i,rx:"1"}),ti.createElement("rect",{width:"26",height:"26",x:"7",y:"5",fill:t,rx:"1"}),ti.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:i,rx:"1"}),ti.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:i,rx:"1"}),ti.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:i,rx:"1"}),ti.createElement("rect",{width:"26",height:"11",x:"7",y:"37",fill:i,rx:"1"})));var gu=Xv;import Kn from"react";var Yv=({main:i="#424242",highlight:t="#565656",width:e="48px",height:o="48px"})=>Kn.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:o,viewBox:"0 0 48 48"},Kn.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Kn.createElement("rect",{width:"20",height:"34",x:"14",y:"10",fill:t,rx:"1.5"}),Kn.createElement("rect",{width:"3",height:"3",x:"14",y:"5",fill:i,rx:"1"})));var bu=Yv;import Mt from"react";var Kv=({main:i="#424242",highlight:t="#565656",shadow:e="#333333",width:o="48px",height:r="48px"})=>Mt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:o,height:r,viewBox:"0 0 48 48"},Mt.createElement("defs",null,Mt.createElement("filter",{id:"photoeditorsdk-twitter-post-icon",width:"166.7%",height:"166.7%",x:"-33.3%",y:"-33.3%",filterUnits:"objectBoundingBox"},Mt.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"1"}))),Mt.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Mt.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:i,rx:"0.5"}),Mt.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:i,rx:"0.5"}),Mt.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:i,rx:"0.5"}),Mt.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:i,rx:"0.5"}),Mt.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:t,rx:"0.5"}),Mt.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:i,rx:"0.5"}),Mt.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:i,rx:"0.5"}),Mt.createElement("rect",{width:"9",height:"9",x:"8",y:"13",fill:e,filter:"url(#photoeditorsdk-twitter-post-icon)",rx:"1"}),Mt.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:i,rx:"1"})));var yu=Kv;import ue from"react";var qv=({main:i="#424242",highlight:t="#565656",width:e="48px",height:o="48px"})=>ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:o,viewBox:"0 0 48 48"},ue.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ue.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:i,rx:"0.5"}),ue.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:i,rx:"0.5"}),ue.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:i,rx:"0.5"}),ue.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:i,rx:"0.5"}),ue.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:i,rx:"0.5"}),ue.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:i,rx:"0.5"}),ue.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:i,rx:"0.5"}),ue.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:t,rx:"1"})));var vu=qv;import me from"react";var Jv=({main:i="#424242",highlight:t="#565656",width:e="48px",height:o="48px"})=>me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:o,viewBox:"0 0 48 48"},me.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},me.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:t,rx:"0.5"}),me.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:i,rx:"0.5"}),me.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:i,rx:"0.5"}),me.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:i,rx:"0.5"}),me.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:i,rx:"0.5"}),me.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:i,rx:"0.5"}),me.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:i,rx:"0.5"}),me.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:i,rx:"1"})));var xu=Jv;import Gi from"react";var Zv=()=>Gi.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Gi.createElement("defs",null,Gi.createElement("path",{id:"photoeditorsdk-delete-icon",d:"M20 6l-2.312 15.718A1.5 1.5 0 0116.204 23H5.796a1.5 1.5 0 01-1.484-1.282L2 6h18zM7 1a1 1 0 011-1h6a1 1 0 011 1v1h7v2H0V2h7V1z"})),Gi.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Gi.createElement("mask",{fill:"currentColor"},Gi.createElement("use",{xlinkHref:"#photoeditorsdk-delete-icon"})),Gi.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-delete-icon"})));var Su=Zv;import $t from"react";var Qv=({height:i=3,width:t=102,x:e=-102,className:o,style:r})=>$t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:i,viewBox:"0 0 102 3",className:o,style:r},$t.createElement("pattern",{id:"photoeditorsdk-slider-dots",fill:"currentColor",patternUnits:"userSpaceOnUse",width:"102",height:"3"},$t.createElement("rect",{width:"3",height:"3",x:"99",y:"0",opacity:"0.5",rx:"1.5"}),$t.createElement("rect",{width:"3",height:"3",x:"88",y:"0",opacity:"0.5",rx:"1.5"}),$t.createElement("rect",{width:"3",height:"3",x:"77",y:"0",opacity:"0.5",rx:"1.5"}),$t.createElement("rect",{width:"3",height:"3",x:"66",y:"0",rx:"1.5"}),$t.createElement("rect",{width:"3",height:"3",x:"55",y:"0",opacity:"0.5",rx:"1.5"}),$t.createElement("rect",{width:"3",height:"3",x:"44",y:"0",opacity:"0.5",rx:"1.5"}),$t.createElement("rect",{width:"3",height:"3",x:"33",y:"0",opacity:"0.5",rx:"1.5"}),$t.createElement("rect",{width:"3",height:"3",x:"22",y:"0",opacity:"0.5",rx:"1.5"}),$t.createElement("rect",{width:"3",height:"3",x:"11",y:"0",rx:"1.5"})),$t.createElement("rect",{fill:"url(#photoeditorsdk-slider-dots)",x:-t*1.5,y:"0",width:t*4,height:"3",transform:`translate(${e}, 0)`}));var Cu=Qv;import ji from"react";var tx=()=>ji.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},ji.createElement("defs",null,ji.createElement("path",{id:"photoeditorsdk-duplicate-icon",d:"M3.429 8.571v12h12v-12h-12zM1.714 5.143h15.429c.947 0 1.714.767 1.714 1.714v15.429c0 .946-.767 1.714-1.714 1.714H1.714A1.714 1.714 0 010 22.286V6.857c0-.947.768-1.714 1.714-1.714zM22.286 0C23.232 0 24 .768 24 1.714v15.429c0 .947-.768 1.714-1.714 1.714H20.57V3.429L5.142 3.428V1.714C5.143.768 5.91 0 6.858 0h15.429z"})),ji.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ji.createElement("mask",{fill:"currentColor"},ji.createElement("use",{xlinkHref:"#photoeditorsdk-duplicate-icon"})),ji.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-duplicate-icon"})));var wu=tx;import ku from"react";var ex=()=>ku.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},ku.createElement("path",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M2.087 7.115h7.66v15.32h5.027l.223-15.32h7.438V2.087H2.087v5.028zM14.075 24h-4.15a2.42 2.42 0 01-1.718-.711 2.423 2.423 0 01-.711-1.717V9.01H2.429c-.67 0-1.278-.273-1.718-.713A2.426 2.426 0 010 6.579V2.43C0 1.76.272 1.153.711.713A2.424 2.424 0 012.43 0h19.142c.671 0 1.278.272 1.718.713.439.44.711 1.047.711 1.718v4.148c0 .671-.272 1.278-.711 1.718-.44.44-1.047.713-1.718.713h-5.067v12.562c0 .67-.272 1.278-.711 1.717a2.42 2.42 0 01-1.718.711z"}));var Tu=ex;import ei from"react";var ix=({className:i})=>ei.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 15 14",transform:"scale(-1, 1)",className:i},ei.createElement("title",null,"Flip Horizontal"),ei.createElement("defs",null,ei.createElement("path",{id:"photoeditorsdk-flip-horizontal-icon",d:"M42 1v14h-1.167v-1.167H37a2 2 0 01-2-2V4.167a2 2 0 012-2l3.833-.001V1H42zm5.833 11.958a.875.875 0 01-.875.875h-3.791v-1.166l3.499-.001V3.333h-3.5V2.167h3.792c.446 0 .815.333.869.765l.006.11v9.916z"})),ei.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-34 -1)"},ei.createElement("mask",{fill:"none"},ei.createElement("use",{xlinkHref:"#photoeditorsdk-flip-horizontal-icon"})),ei.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-flip-horizontal-icon"})));var Iu=ix;import ii from"react";var ox=({className:i})=>ii.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 15 14",className:i},ii.createElement("title",null,"Flip Vertical"),ii.createElement("defs",null,ii.createElement("path",{id:"photoeditorsdk-flip-vertical-icon",d:"M42 1v14h-1.167v-1.167H37a2 2 0 01-2-2V4.167a2 2 0 012-2l3.833-.001V1H42zm5.833 11.958a.875.875 0 01-.875.875h-3.791v-1.166l3.499-.001V3.333h-3.5V2.167h3.792c.446 0 .815.333.869.765l.006.11v9.916z"})),ii.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-34 -1)"},ii.createElement("mask",{fill:"none"},ii.createElement("use",{xlinkHref:"#photoeditorsdk-flip-vertical-icon"})),ii.createElement("use",{fill:"currentColor",fillOpacity:"0.9",transform:"rotate(-90 41.417 8)",xlinkHref:"#photoeditorsdk-flip-vertical-icon"})));var Mu=ox;import oi from"react";var rx=({alt:i="Rotate",className:t})=>oi.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 16 16",className:t},oi.createElement("title",null,i),oi.createElement("defs",null,oi.createElement("path",{id:"photoeditorsdk-rotate-icon",d:"M132 0l1.25 1.57a8.01 8.01 0 0110.41.77 8.015 8.015 0 010 11.32c-.33.33-.67.62-1.04.859-1.38.991-3 1.481-4.62 1.481v-2c1.22 0 2.44-.37 3.47-1.111a6 6 0 00.77-9.129 5.992 5.992 0 00-7.73-.63L136 5h-5l1-5zm2.43 12.82c.5.38 1.06.67 1.66.87l-.64 1.89a7.56 7.56 0 01-1.48-.67l-.03-.01v-.01h-.02v-.01h-.01c0-.01-.01-.01-.01-.01h-.01v-.01h-.02v-.01h-.01l-.01-.01s-.01 0-.01-.01h-.01c-.2-.12-.4-.26-.6-.4zm-2.15-3.02c.18.6.47 1.17.83 1.68l-1.63 1.16v-.01s-.01 0-.01-.01c0 0 0-.01-.01-.01v-.01h-.01v-.01c-.01 0-.01-.01-.01-.01v-.01h-.01v-.01h-.01v-.01c0-.01-.01-.01-.01-.01v-.01c-.01 0-.01 0-.01-.01-.27-.39-.49-.79-.68-1.21-.01 0-.01-.01-.01-.01v-.01h-.01v-.02l-.01-.01c0-.02-.01-.02-.01-.02v-.02h-.01v-.02h-.01v-.03h-.01v-.02h-.01v-.02c-.01 0-.01 0-.01-.01v-.01c-.1-.23-.19-.47-.26-.7z"})),oi.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-130)"},oi.createElement("mask",{fill:"none"},oi.createElement("use",{xlinkHref:"#photoeditorsdk-rotate-icon"})),oi.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-rotate-icon"})));var Du=rx;var wF={["adjustment"]:Fh,["filter"]:Hh,["library"]:Wh,["overlay"]:Nh,["focus"]:_h,["sticker"]:Vh,["text"]:Uh,["textdesign"]:Gh,["frame"]:$h,["transform"]:jh,["brush"]:Rh};var kF={left:Bh,right:Oh,center:Lh};var TF={addText:Xh,openWebcam:Kh,reset:Jh,shuffle:Zh,uploadImage:Qh};var gr={undo:Ah,redo:zh,close:Eh,export:Ph};var Q={categories:{["imgly_transforms_common"]:eu,["imgly_transforms_facebook"]:iu,["imgly_transforms_twitter"]:ru,["imgly_transforms_instagram"]:ou},crops:{["imgly_transform_common_custom"]:nu,["imgly_transform_common_square"]:cu,["imgly_transform_common_3"]:du,["imgly_transform_common_4"]:su,["imgly_transform_common_9"]:au,["imgly_transform_common_16"]:lu,["imgly_transform_facebook_post"]:pu,["imgly_transform_facebook_profile"]:hu,["imgly_transform_facebook_title"]:uu,["imgly_transform_instagram_landscape"]:mu,["imgly_transform_instagram_portrait"]:fu,["imgly_transform_instagram_square"]:gu,["imgly_transform_instagram_story"]:bu,["imgly_transform_twitter_post"]:yu,["imgly_transform_twitter_profile"]:vu,["imgly_transform_twitter_title"]:xu},dots:Cu,duplicate:wu,edit:Tu,bringToFront:tu,delete:Su,flipHorizontal:Iu,flipVertical:Mu,rotate:Du};var IF={["brightness"]:yh,["contrast"]:xh,["saturation"]:kh,["clarity"]:vh,["shadows"]:Th,["highlights"]:wh,["exposure"]:Sh,["gamma"]:Ch,["blacks"]:bh,["whites"]:Dh,["temperature"]:Mh,["sharpness"]:Ih};import nx from"react";import sx from"styled-components";var ax=sx.div`
  display: flex;
  position: relative;
  flex-direction: column;
  width: 100%;
  height: 100%;
  max-width: calc(100% - ${i=>i.maxWidth}px);
`;var ml=({children:i})=>{const{config:t}=K();let e=0;if(t.isLayoutAdvanced){e=t.measurements.advancedUIToolbar.width+t.measurements.advancedUIToolControlBar.width}return nx.createElement(ax,{maxWidth:e},i)};import lx,{css as Eu}from"styled-components";var Pu=lx.div.attrs(()=>({"data-test":S.MainCanvasActionBar}))`
  &&& {
    display: ${i=>i.hide?"none":"flex"};
    flex-direction: row;
    align-items: center;
    height: ${i=>i.theme.measurements.mainCanvasActionBar.height}px;
    color: ${i=>i.theme.mainCanvasActionBar.foreground};
    border-bottom: 1px solid
      ${i=>i.theme.mainCanvasActionBar.borderColor};
    padding: 8px 24px;
    box-sizing: border-box;
    position: absolute;
    width: 100%;
    z-index: ${i=>i.theme.measurements.zIndex.canvas.bar};
    background: ${i=>i.transparentBackgound?"transparent":i.theme.mainCanvasActionBar.background};
    ${i=>i.bottom?Eu`
            justify-content: space-around;
            bottom: 0;
            transform: rotate(180deg);
          `:Eu`
            justify-content: space-between;
          `}
  }
`;import cx from"styled-components";var zu=cx.canvas`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`;import dx from"styled-components";var Au=dx.div.attrs({role:"main"})`
  background-color: ${i=>i.theme.canvas.background};
  flex-grow: 1;
  flex-shrink: 1;
  flex-basis: auto;
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  /* added this for safari, else the webcam overlay did not know the height */
  top: 0;
  left: 0;
  height: 100%;
  width: 100%;
  margin-top: ${i=>i.theme.measurements.canvas.marginTop}px;
`;import px from"styled-components";var Lu=px.div.attrs(({height:i,width:t})=>({style:{height:`${i}px`,width:`${t}px`}}))`
  border-style: solid;
  border-width: 2px 0 2px 0;
  border-color: ${i=>i.theme.canvas.controlsOutline};
  box-shadow: 0 -6px 6px -6px rgba(0, 0, 0, 0.2),
    inset 0 6px 6px -6px rgba(0, 0, 0, 0.2);
  cursor: move;
  position: absolute;
`;import hx from"styled-components";var Bu=hx.div.attrs(({radius:i})=>({style:{height:`${i*2}px`,width:`${i*2}px`}}))`
  border-radius: 50%;
  border: 2px solid ${i=>i.theme.canvas.controlsOutline};
  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.2),
    inset 0 2px 6px 0 rgba(0, 0, 0, 0.2);
  cursor: move;
`;import ux from"styled-components";var Ou=ux.div`
  position: relative;
  height: inherit;
  width: inherit;
`;import Fu,{css as ot}from"styled-components";var mx=Fu.div(i=>{const{desktop:t,mobile:e}=i.theme.measurements.canvasControls.corner.touchable;const o=t/4;const r=e/2;return ot`
    position: absolute;
    width: ${t}px;
    height: ${t}px;
    ${n=>n.vertical==="top"?ot`
            top: 0px;
          `:ot`
            bottom: 0px;
          `}
    ${n=>n.horizontal==="left"?ot`
            left: 0px;
          `:ot`
            right: 0px;
          `}
  ${n=>n.vertical==="top"?ot`
            margin-top: -${o}px;
          `:ot`
            margin-bottom: -${o}px;
          `}
  ${n=>n.horizontal==="left"?ot`
            margin-left: -${o}px;
          `:ot`
            margin-right: -${o}px;
          `}
  @media all and (min-width: 0) and (max-width: 599px) {
      width: ${e}px;
      height: ${e}px;
      ${n=>n.vertical==="top"?ot`
              margin-top: -${r}px;
            `:ot`
              margin-bottom: -${r}px;
            `}
      ${n=>n.horizontal==="left"?ot`
              margin-left: -${r}px;
            `:ot`
              margin-right: -${r}px;
            `}
    }
  `});var qn=Fu(mx)(i=>{const t=i.horizontal==="right"?i.borderWidth:0;const e=i.vertical==="bottom"?i.borderWidth:0;const o=i.horizontal==="left"?i.borderWidth:0;const r=i.vertical==="top"?i.borderWidth:0;const n=`${r}px ${t}px ${e}px ${o}px`;const a=i.horizontal==="left"&&i.vertical==="bottom"||i.horizontal==="right"&&i.vertical==="top"?"nesw-resize":"nwse-resize";const l=i.theme.measurements.canvasControls.corner.touchable.desktop/4-i.borderWidth;const c=i.theme.measurements.canvasControls.corner.touchable.mobile/4+i.borderWidth;return ot`
    &:before {
      display: block;
      position: absolute;
      content: '';
      width: ${d=>d.theme.measurements.canvasControls.corner.size}px;
      height: ${d=>d.theme.measurements.canvasControls.corner.size}px;
      z-index: ${d=>d.theme.measurements.zIndex.canvas.controls};
      border-color: ${d=>d.theme.canvas.controlsColor};
      border-style: solid;
      border-width: ${n};
      pointer-events: auto;
      ${i.vertical==="top"?ot`
            top: ${l}px;
          `:ot`
            bottom: ${l}px;
          `}
      ${i.horizontal==="left"?ot`
            left: ${l}px;
          `:ot`
            right: ${l}px;
          `}
      @media all and (min-width: 0) and (max-width: 599px) {
        ${i.vertical==="top"?ot`
              margin-top: ${c}px;
            `:ot`
              margin-bottom: ${c}px;
            `}
        ${i.horizontal==="left"?ot`
              margin-left: ${c}px;
            `:ot`
              margin-right: ${c}px;
            `}
      }
    }
    cursor: ${a};
    pointer-events: none;
  `});import fx from"styled-components";var Ru=fx.div.attrs(()=>({"data-test":S.Knob}))`
  position: absolute;
  height: ${i=>i.theme.measurements.canvasControls.knob.touchable.desktop}px;
  width: ${i=>i.theme.measurements.canvasControls.knob.touchable.desktop}px;
  margin-left: -10px;
  margin-top: -10px;
  z-index: ${i=>i.theme.measurements.zIndex.canvas.knob};
  will-change: transform;
  cursor: ew-resize;
  &:before {
    display: block;
    position: absolute;
    content: '';
    background: ${i=>i.theme.canvas.controlsColor};
    border-radius: 50%;
    width: ${i=>i.theme.measurements.canvasControls.knob.size}px;
    height: ${i=>i.theme.measurements.canvasControls.knob.size}px;
    top: ${i=>i.theme.measurements.canvasControls.knob.size/4}px;
    left: ${i=>i.theme.measurements.canvasControls.knob.size/4}px;
    box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.24);
  }
`;import gx from"styled-components";var Hu=gx.div`
  position: absolute;
  color: ${i=>i.theme.canvas.controlsOutline};
`;import bx from"styled-components";var _u=bx.div.attrs(i=>({style:{left:`${i.x}px`}}))`
  position: absolute;
  bottom: -${i=>i.theme.measurements.canvasControls.sprite.rotateHandle.height}px;
  height: ${i=>i.theme.measurements.canvasControls.sprite.rotateHandle.height}px;
  width: 2px;
  background-color: ${i=>i.theme.canvas.controlsOutline};
`;import yx from"styled-components";var $u=yx.div.attrs(({height:i,width:t,theme:e})=>({style:{height:`${i+e.measurements.canvasControls.sprite.controlPadding}px`,width:`${t+e.measurements.canvasControls.sprite.controlPadding}px`}}))`
  left: -${i=>i.theme.measurements.canvasControls.sprite.controlPadding/2}px;
  top: -${i=>i.theme.measurements.canvasControls.sprite.controlPadding/2}px;
  transform-origin: center center;
  border-style: solid;
  border-width: 2px;
  border-color: ${i=>i.theme.canvas.controlsColor};
  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.2),
    inset 0 2px 6px 0 rgba(0, 0, 0, 0.2);
  cursor: move;
  will-change: transform;
  position: absolute;
`;import vx from"styled-components";var Wu=vx.div.attrs(()=>({"data-test":S.TextWidth}))`
  position: absolute;
  height: ${i=>i.theme.measurements.canvasControls.width.size}px;
  width: 4px;
  z-index: ${i=>i.theme.measurements.zIndex.canvas.controls};
  background: ${i=>i.theme.canvas.controlsColor};
  cursor: pointer;
`;import xx from"styled-components";var Nu=xx.div.attrs({tabIndex:0})`
  position: absolute;
  height: ${i=>i.height}px;
  width: ${i=>i.width}px;
  top: 0;
  left: 0;
  &:focus {
    outline: 0;
  }
`;import Jn,{css as Vu}from"styled-components";var Zn=oc()?Vu`
      transition: unset;
    `:Vu`
      transition: all 0.4s ease-in-out;
    `;var Uu=Jn.div`
  position: absolute;
  background: ${i=>i.theme.canvas.cropBackdrop};
  z-index: ${i=>i.theme.measurements.zIndex.canvas.crop.backdrop};
  ${Zn}
`;var Gu=Jn.div.attrs({"data-test":S.CropMask})`
  position: absolute;
  box-shadow: inset 0 0 0 2px ${i=>i.theme.canvas.controlsOutline};
  cursor: move;
  ${Zn}
`;var ju=Jn.div`
  position: absolute;
  background: ${i=>i.theme.canvas.controlsOutline};
  z-index: ${i=>i.theme.measurements.zIndex.canvas.crop.grid};
  ${Zn}
`;var Xi=Jn(qn)`
  z-index: ${i=>i.theme.measurements.zIndex.canvas.controls};
  ${Zn};
`;import Sx from"styled-components";var Xu=Sx.canvas`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`;import Cx from"styled-components";var Yu=Cx.video`
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
`;import wx from"styled-components";var Ku=wx.div`
  position: relative;
  transition: all 0.4s cubic-bezier(0.17, 0.04, 0.03, 0.94);
  height: 100%;
  width: 100%;
  z-index: ${i=>i.theme.measurements.zIndex.canvas.webcam.backdrop};
  background-color: ${i=>i.theme.webcam.background};
`;var M={Index:zu,Area:ml,Bar:{Index:Pu,ButtonGroup:Op},Button:{TextSecondary:Lp,Float:Hp},Container:Au,Element:Xu,Wrapper:Ku,Webcam:Yu,Controls:{Knob:Ru,Circle:Bu,Corner:qn,Line:Hu,Area:Lu,Sprite:$u,RotateHandle:_u,Container:Ou,Wrapper:Nu,SpriteActionsWrapper:rr,SpriteActionButton:Fe,Width:Wu},Crop:{Mask:Gu,GridLine:ju,Backdrop:Uu,Control:Xi}};import Qn from"react";import Ju,{css as kx}from"styled-components";var qu=M.Button.TextSecondary;var Zu=Ju.span`
  font-size: 14px;
  padding: 3px 1px 2px;
  color: ${i=>i.theme.canvasActionBar.foreground};
  letter-spacing: ${i=>i.theme.measurements.fontSystem.button2.letterSpacing}px;
  display: flex;
  align-self: center;
`;var Tx=Ju.div`
  display: inline-flex;
  ${i=>i.isDisabled&&kx`
      opacity: 0.5;
      cursor: default;
      pointer-events: none;
    `}
`;var Ix=({isDisabled:i,scale:t,active:e})=>{const{canZoomIn:o}=t;const{canZoomOut:r}=t;const{zoomLevel:n}=t;const a=["transform","brush","focus","sticker","text","textdesign"].indexOf(e.tool)!==-1;return!a?Qn.createElement(Tx,{isDisabled:i},Qn.createElement(qu,{"data-test":S.MainBarButtonZoom,ariaLabel:"Zoom out",isDisabled:!r,onClick:t.out},"-"),Qn.createElement(Zu,{"data-test":S.ZoomLevel},n," %"),Qn.createElement(qu,{ariaLabel:"Zoom in",isDisabled:!o,onClick:t.in},"+")):null};var Qu=O("scale","active")(E(Ix));Zu.defaultProps={theme:Lt};var tm=Mx(M.Bar.ButtonGroup)`
  > :last-child {
    margin-left: 10px;
  }
  > :first-child {
    margin-left: 0;
  }
`;var Dx=E(function i(){const{config:t,editor:e,history:o,custom:r,active:n}=K();const a=t.locale.mainCanvasActions;const{canUndo:l}=o;const{canRedo:c}=o;const d=t.config.mainCanvasActions;const u=()=>{e.export()};const m=()=>{if(e.activeStore.tool==="transform"){return null}const x=r.getButton("mainCanvasActionUndo");return Wt.createElement(x,{key:"mainCanvasActionUndo","data-test":S.MainBarButtonUndo,onClick:o.undo,isDisabled:!l||!n.image,label:a.buttonUndo,ariaLabel:a.buttonUndo,icon:Wt.createElement(gr.undo,null)})};const f=()=>{if(e.activeStore.tool==="transform"){return null}const x=r.getButton("mainCanvasActionRedo");return Wt.createElement(x,{key:"mainCanvasActionRedo","data-test":S.MainBarButtonRedo,onClick:o.redo,isDisabled:!c||!n.image,label:a.buttonRedo,ariaLabel:a.buttonRedo,icon:Wt.createElement(gr.redo,null)})};const b=()=>{const x=r.getButton("mainCanvasActionExport");return Wt.createElement(x,{key:"mainCanvasActionExport","data-test":S.MainBarButtonExport,onClick:u,isDisabled:!n.image,label:a.buttonExport,ariaLabel:a.buttonExport,icon:Wt.createElement(gr.export,null)})};const v=()=>{if(!t.displayCloseButton){return null}const x=r.getButton("mainCanvasActionClose");return Wt.createElement(x,{key:"mainCanvasActionClose","data-test":S.MainBarButtonClose,onClick:e.close,isDisabled:!n.image,label:a.buttonClose,ariaLabel:a.buttonClose,icon:Wt.createElement(gr.close,null)})};const y=d.map(x=>{switch(x){case"undo":return m;case"redo":return f;case"export":return b;case"close":return v;default:return null}});return Wt.createElement(M.Bar.Index,null,Wt.createElement(tm,null,y[0]&&y[0]()||null,y[1]&&y[1]()||null),t.config.enableZoom?Wt.createElement(Qu,{isDisabled:!n.image}):null,Wt.createElement(tm,null,y[2]&&y[2]()||null,y[3]&&y[3]()||null))});import vm from"react";import vr from"react";import yS from"styled-components";function Ex(i){return typeof i==="string"&&i.includes("%")}function Px(i){return typeof i==="string"&&i.includes(".")&&parseFloat(i)===1}function pt(i,t){if(Px(i)){i="100%"}const e=Ex(i);i=t===360?i:Math.min(t,Math.max(0,parseFloat(i)));if(e){i=parseInt(String(i*t),10)/100}if(Math.abs(i-t)<1e-6){return 1}if(t===360){i=(i<0?i%t+t:i%t)/parseFloat(String(t))}else{i=i%t/parseFloat(String(t))}return i}function ts(i){i=parseFloat(i);if(Number.isNaN(i)||i<0||i>1){i=1}return i}function br(i){if(i<=1){return`${Number(i)*100}%`}return i}function ri(i){return i.length===1?`0${i}`:String(i)}function fl(i,t,e){return{r:pt(i,255)*255,g:pt(t,255)*255,b:pt(e,255)*255}}function gl(i,t,e){i=pt(i,255);t=pt(t,255);e=pt(e,255);const o=Math.max(i,t,e);const r=Math.min(i,t,e);let n=0;let a=0;const l=(o+r)/2;if(o===r){a=0;n=0}else{const c=o-r;a=l>.5?c/(2-o-r):c/(o+r);switch(o){case i:n=(t-e)/c+(t<e?6:0);break;case t:n=(e-i)/c+2;break;case e:n=(i-t)/c+4;break;default:break}n/=6}return{h:n,s:a,l}}function em(i,t,e){let o;let r;let n;i=pt(i,360);t=pt(t,100);e=pt(e,100);function a(l,c,d){if(d<0){d+=1}if(d>1){d-=1}if(d<1/6){return l+(c-l)*(6*d)}if(d<1/2){return c}if(d<2/3){return l+(c-l)*(2/3-d)*6}return l}if(t===0){r=e;n=e;o=e}else{const l=e<.5?e*(1+t):e+t-e*t;const c=2*e-l;o=a(c,l,i+1/3);r=a(c,l,i);n=a(c,l,i-1/3)}return{r:o*255,g:r*255,b:n*255}}function bl(i,t,e){i=pt(i,255);t=pt(t,255);e=pt(e,255);const o=Math.max(i,t,e);const r=Math.min(i,t,e);let n=0;const a=o;const l=o-r;const c=o===0?0:l/o;if(o===r){n=0}else{switch(o){case i:n=(t-e)/l+(t<e?6:0);break;case t:n=(e-i)/l+2;break;case e:n=(i-t)/l+4;break;default:break}n/=6}return{h:n,s:c,v:a}}function im(i,t,e){i=pt(i,360)*6;t=pt(t,100);e=pt(e,100);const o=Math.floor(i);const r=i-o;const n=e*(1-t);const a=e*(1-r*t);const l=e*(1-(1-r)*t);const c=o%6;const d=[e,a,n,n,l,e][c];const u=[l,e,e,a,n,n][c];const m=[n,n,l,e,e,a][c];return{r:d*255,g:u*255,b:m*255}}function yl(i,t,e,o){const r=[ri(Math.round(i).toString(16)),ri(Math.round(t).toString(16)),ri(Math.round(e).toString(16))];if(o&&r[0].charAt(0)===r[0].charAt(1)&&r[1].charAt(0)===r[1].charAt(1)&&r[2].charAt(0)===r[2].charAt(1)){return r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)}return r.join("")}function zx(i){return Math.round(parseFloat(i)*255).toString(16)}function Dt(i){return parseInt(i,16)}function vl(i){return Dt(i)/255}function om(i,t,e,o,r){const n=[ri(Math.round(i).toString(16)),ri(Math.round(t).toString(16)),ri(Math.round(e).toString(16)),ri(zx(o))];if(r&&n[0].charAt(0)===n[0].charAt(1)&&n[1].charAt(0)===n[1].charAt(1)&&n[2].charAt(0)===n[2].charAt(1)&&n[3].charAt(0)===n[3].charAt(1)){return n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0)+n[3].charAt(0)}return n.join("")}var ko={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};var Ax="[-\\+]?\\d+%?";var Lx="[-\\+]?\\d*\\.\\d+%?";var ni=`(?:${Lx})|(?:${Ax})`;var xl=`[\\s|\\(]+(${ni})[,|\\s]+(${ni})[,|\\s]+(${ni})\\s*\\)?`;var Sl=`[\\s|\\(]+(${ni})[,|\\s]+(${ni})[,|\\s]+(${ni})[,|\\s]+(${ni})\\s*\\)?`;var Qt={CSS_UNIT:new RegExp(ni),rgb:new RegExp(`rgb${xl}`),rgba:new RegExp(`rgba${Sl}`),hsl:new RegExp(`hsl${xl}`),hsla:new RegExp(`hsla${Sl}`),hsv:new RegExp(`hsv${xl}`),hsva:new RegExp(`hsva${Sl}`),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function Nt(i){return Boolean(Qt.CSS_UNIT.exec(String(i)))}function Bx(i){i=i.trim().toLowerCase();if(i.length===0){return false}let t=false;if(ko[i]){i=ko[i];t=true}else if(i==="transparent"){return{r:0,g:0,b:0,a:0,format:"name"}}let e=Qt.rgb.exec(i);if(e){return{r:e[1],g:e[2],b:e[3]}}e=Qt.rgba.exec(i);if(e){return{r:e[1],g:e[2],b:e[3],a:e[4]}}e=Qt.hsl.exec(i);if(e){return{h:e[1],s:e[2],l:e[3]}}e=Qt.hsla.exec(i);if(e){return{h:e[1],s:e[2],l:e[3],a:e[4]}}e=Qt.hsv.exec(i);if(e){return{h:e[1],s:e[2],v:e[3]}}e=Qt.hsva.exec(i);if(e){return{h:e[1],s:e[2],v:e[3],a:e[4]}}e=Qt.hex8.exec(i);if(e){return{r:Dt(e[1]),g:Dt(e[2]),b:Dt(e[3]),a:vl(e[4]),format:t?"name":"hex8"}}e=Qt.hex6.exec(i);if(e){return{r:Dt(e[1]),g:Dt(e[2]),b:Dt(e[3]),format:t?"name":"hex"}}e=Qt.hex4.exec(i);if(e){return{r:Dt(e[1]+e[1]),g:Dt(e[2]+e[2]),b:Dt(e[3]+e[3]),a:vl(e[4]+e[4]),format:t?"name":"hex8"}}e=Qt.hex3.exec(i);if(e){return{r:Dt(e[1]+e[1]),g:Dt(e[2]+e[2]),b:Dt(e[3]+e[3]),format:t?"name":"hex"}}return false}function rm(i){let t={r:0,g:0,b:0};let e=1;let o=null;let r=null;let n=null;let a=false;let l=false;if(typeof i==="string"){i=Bx(i)}if(Array.isArray(i)){const[c,d,u]=i;if(Nt(c)&&Nt(d)&&Nt(u)){t=fl(c*255,d*255,u*255);a=true;l="rgb"}if(i.length===4){e=i[3]}}if(typeof i==="object"){if(Nt(i.r)&&Nt(i.g)&&Nt(i.b)){t=fl(i.r,i.g,i.b);a=true;l=String(i.r).substr(-1)==="%"?"prgb":"rgb"}else if(Nt(i.h)&&Nt(i.s)&&Nt(i.v)){o=br(i.s);r=br(i.v);t=im(i.h,o,r);a=true;l="hsv"}else if(Nt(i.h)&&Nt(i.s)&&Nt(i.l)){o=br(i.s);n=br(i.l);t=em(i.h,o,n);a=true;l="hsl"}if(Object.prototype.hasOwnProperty.call(i,"a")){e=i.a}}e=ts(e);return{ok:a,format:i.format||l,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:e}}var Ft=class{constructor(t="",e={}){if(t instanceof Ft){return t}this.originalInput=t;const o=rm(t);this.originalInput=t;this.r=o.r;this.g=o.g;this.b=o.b;this.a=o.a;this.roundA=Math.round(100*this.a)/100;this.format=e.format||o.format;this.gradientType=e.gradientType;if(this.r<1){this.r=Math.round(this.r)}if(this.g<1){this.g=Math.round(this.g)}if(this.b<1){this.b=Math.round(this.b)}this.isValid=o.ok}getAlpha(){return this.a}setAlpha(t){this.a=ts(t);this.roundA=Math.round(100*this.a)/100;return this}toHsv(){const t=bl(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}}toHsvString(){const t=bl(this.r,this.g,this.b);const e=Math.round(t.h*360);const o=Math.round(t.s*100);const r=Math.round(t.v*100);return this.a===1?`hsv(${e}, ${o}%, ${r}%)`:`hsva(${e}, ${o}%, ${r}%, ${this.roundA})`}toHsl(){const t=gl(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}}toHslString(){const t=gl(this.r,this.g,this.b);const e=Math.round(t.h*360);const o=Math.round(t.s*100);const r=Math.round(t.l*100);return this.a===1?`hsl(${e}, ${o}%, ${r}%)`:`hsla(${e}, ${o}%, ${r}%, ${this.roundA})`}toHex(t=false){return yl(this.r,this.g,this.b,t)}toHexString(t=false){return`#${this.toHex(t)}`}toHex8(t=false){return om(this.r,this.g,this.b,this.a,t)}toHex8String(t=false){return`#${this.toHex8(t)}`}toRgb(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}}toRgbArray(){return[Math.round(this.r),Math.round(this.g),Math.round(this.b),this.a]}toRgbString(){const t=Math.round(this.r);const e=Math.round(this.g);const o=Math.round(this.b);return`rgba(${t}, ${e}, ${o}, ${this.roundA})`}toPercentageRgb(){const t=e=>`${Math.round(pt(e,255)*100)}%`;return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}}toPercentageRgbString(){const t=e=>Math.round(pt(e,255)*100);return this.a===1?`rgb(${t(this.r)}%, ${t(this.g)}%, ${t(this.b)}%)`:`rgba(${t(this.r)}%, ${t(this.g)}%, ${t(this.b)}%, ${this.roundA})`}toName(){if(this.a===0){return"transparent"}if(this.a<1){return false}const t=`#${yl(this.r,this.g,this.b,false)}`;for(const e of Object.keys(ko)){if(ko[e]===t){return e}}return false}toString(t){const e=Boolean(t);t=t||this.format;const o=this.a<1&&this.a>=0;const r=!e&&o&&t&&(t.startsWith("hex")||t==="name");if(r){if(t==="name"&&this.a===0){return this.toName()}return this.toRgbString()}switch(t){case"rgb":return this.toRgbString();case"prgb":return this.toPercentageRgbString();case"hex":case"hex6":return this.toHexString();case"hex3":return this.toHexString(true);case"hex4":return this.toHex8String(true);case"hex8":return this.toHex8String();case"hsl":return this.toHslString();case"hsv":return this.toHsvString();case"name":return this.toName();default:return this.toHexString()}}clone(){return new Ft(this.toString())}};import ht from"react";import Io,{css as gm}from"styled-components";import Ox,{css as es}from"styled-components";var Fx=Ox.div`
  position: absolute;
  width: ${i=>i.theme.measurements.color.colorPicker.arrow.width}px;
  height: ${i=>i.theme.measurements.color.colorPicker.arrow.width/2}px;
  overflow: hidden;
  pointer-events: none;
  ${i=>i.direction==="bottom"?es`
          bottom: 100%;
        `:es`
          top: 100%;
        `}
  left: ${i=>i.arrowOffset}px;
  :after {
    content: '';
    position: absolute;
    width: ${i=>i.theme.measurements.color.colorPicker.arrow.width/2}px;
    height: ${i=>i.theme.measurements.color.colorPicker.arrow.width/2}px;
    left: 50%;
    ${i=>i.direction==="bottom"?es`
            transform: translate(-50%, 50%) rotate(45deg);
          `:es`
            transform: translate(-50%, -50%) rotate(45deg);
          `}
    background-color: ${i=>i.theme.colorPicker.listBackground};
    pointer-events: none;
  }
`;var nm=Fx;import Cl from"react";import sm from"styled-components";var Rx=sm.div`
  text-align: center;
  width: 28px;
  padding-left: 4px;
`;var Hx=sm(A.Input.Text)`
  input {
    text-align: center;
    border-bottom: 1px solid
      ${i=>i.theme.colorPicker.inputBorderColor};
  }
`;var _x=({value:i,label:t,onChange:e})=>Cl.createElement(Rx,null,Cl.createElement(A.Input.Label,{label:t}),Cl.createElement(Hx,{min:0,max:255,value:i,onChange:e}));var is=_x;import wl from"react";import am from"styled-components";var $x=am.div`
  text-align: left;
  width: 62px;
`;var Wx=am(A.Input.Text)`
  input {
    text-align: left;
    border-bottom: 1px solid
      ${i=>i.theme.colorPicker.inputBorderColor};
  }
`;var Nx=({value:i,label:t,onChange:e})=>wl.createElement($x,null,wl.createElement(A.Input.Label,{label:t}),wl.createElement(Wx,{value:i.toUpperCase(),onChange:e}));var lm=Nx;import Tl,{useRef as Zx,useState as Qx,useEffect as tS}from"react";import eS from"styled-components";import Vx from"styled-components";var Yi=Vx.div.attrs(i=>({style:{left:i.position[0]||`${0}px`,top:i.position[1]||`${0}px`}}))`
  &&& {
    position: absolute;
    height: ${i=>i.theme.measurements.color.colorPicker.thumb.size}px;
    width: ${i=>i.theme.measurements.color.colorPicker.thumb.size}px;
    border-radius: 50%;
    border: 2px solid ${i=>i.theme.colorPicker.controlsColor};
    box-sizing: border-box;
    cursor: pointer;
    box-shadow: 0 1px 1px 0 rgba(0, 0, 0, 0.11), 0 1px 3px 0 rgba(0, 0, 0, 0.46);
    z-index: 2;
    pointer-events: none;
  }
`;Yi.defaultProps={theme:Lt};var dm=ui(jo());import kl,{useState as Ux,useRef as cm,forwardRef as Gx,useCallback as jx}from"react";import Xx from"styled-components";var Yx=Xx.div`
  position: relative;
  height: 14px;
  width: 100%;
`;var Kx=i=>{return t=>{i.forEach(e=>{if(typeof e==="function"){e(t)}else if(e!=null){e.current=t}})}};var To=Gx(({surface:i,onChange:t,className:e,children:o},r)=>{const n=cm(null);const a=cm(null);const{config:l}=K();const[c,d]=Ux(false);const u=v=>{const y=l.measurements.color.colorPicker.thumb.size/2;const x=l.measurements.color.colorPicker.thumb.size;let C=0;let D=0;C=v.clientX;D=v.clientY;const{top:z,left:L,width:R,height:P}=n.current.getBoundingClientRect();let V=C-L-y;let U=D-z-y;V=Math.max(0,Math.min(R-x,V));U=Math.max(0,Math.min(P-x,U));if(t){t([V,U])}};const m=v=>{d(true);u(v)};const f=jx((0,dm.default)(v=>{if(c){u(v)}},10),[c]);const b=()=>{if(c){d(false)}};return kl.createElement(Yx,{ref:Kx([n,r]),className:e},kl.createElement(A.DraggableCore,{nodeRef:a,onStart:m,onDrag:f,onStop:b},kl.createElement("div",{ref:a},i)),o)});import{css as qx}from"styled-components";var Jx=qx`
  position: absolute;
  top: 3px;
  left: 0;
  width: 100%;
  height: 8px;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
`;var Ki=Jx;var iS=eS.div`
  ${Ki}
  background: linear-gradient(90deg, #F00 0%, #FF0 16.66%, #0F0 33.33%, #0FF 50%, #00F 66.66%, #F0F 83.33%, #F00 100%);
  height: 8px;
`;var pm=({hue:i,onChange:t})=>{const[e,o]=Qx(0);const r=Zx(null);const{config:n}=K();const a=l=>{if(r.current){const[c]=l;const{offsetWidth:d}=r.current;const u=d-n.measurements.color.colorPicker.thumb.size;const m=c*d/u;const f=Math.max(0,Math.min(360,m/d*360));t(f);o(c)}};tS(()=>{if(r.current){const{offsetWidth:l}=r.current;let c=0;const d=l-n.measurements.color.colorPicker.thumb.size;c=i*l/360;o(c*d/l)}},[i]);return Tl.createElement(To,{surface:Tl.createElement(iS,null),ref:r,onChange:a},Tl.createElement(Yi,{position:[e,0]}))};import os,{useState as oS,useRef as rS,useEffect as nS}from"react";import hm from"styled-components";var sS=hm.div.attrs(i=>({style:{background:`linear-gradient(to left, ${i.transparentColor} 0%, ${i.opaqueColor} 100%)`}}))`
  ${Ki}
  z-index: 1;
`;var aS=hm.div.attrs(i=>({style:{backgroundImage:`url(${i.url})`}}))`
  ${Ki}
  z-index: 0;
  background-repeat: repeat-x;
  background-size: contain;
  background-position: left;
`;var um=({color:i,opaqueColor:t,transparentColor:e,onChange:o})=>{const{config:r}=K();const[n,a]=oS(0);const l=rS(null);const c=r.assetProvider.getPath("controls","/tiled-background.png");const d=u=>{if(l.current){const{offsetWidth:m}=l.current;const[f]=u;const b=m-r.measurements.color.colorPicker.thumb.size;const v=f*m/b;const y=(m-v)/m;const x=Math.round((y+Number.EPSILON)*100)/100;const C=Math.min(1,Math.max(0,x));o(C);a(f)}};nS(()=>{if(l.current){const{offsetWidth:u}=l.current;let m=0;const f=u-r.measurements.color.colorPicker.thumb.size;m=(1-i.toHsv().a)*u;a(m*f/u)}},[i.toString()]);return os.createElement(To,{ref:l,surface:os.createElement(sS,{opaqueColor:t,transparentColor:e}),onChange:d},os.createElement(aS,{url:c}),os.createElement(Yi,{position:[n,0]}))};import Il,{useState as lS,useRef as cS,useEffect as dS}from"react";import mm from"styled-components";var pS=mm.div.attrs(i=>({style:{backgroundColor:`hsl(${i.hue}, 100%, 50%)`}}))`
  ${Ki}
  background: linear-gradient(to top, rgb(0, 0, 0), rgba(0, 0, 0, 0)),
   linear-gradient(to right, rgb(255, 255, 255), rgba(255, 255, 255, 0));
  height: ${i=>i.theme.measurements.color.colorPicker.saturationSlider.height}px;
  top: 0px;
`;var hS=mm(To)`
  height: ${i=>i.theme.measurements.color.colorPicker.saturationSlider.height}px;
  margin-top: 0px;
`;var fm=({color:i,hue:t,onChange:e})=>{const[o,r]=lS([0,0]);const n=cS(null);const{config:a}=K();dS(()=>{const{s:c,v:d}=i.toHsv();if(n.current){const{offsetWidth:u,offsetHeight:m}=n.current;const f=u-a.measurements.color.colorPicker.thumb.size;const b=m-a.measurements.color.colorPicker.thumb.size;const v=c*u;const y=(1-d)*m;r([v*f/u,y*b/m])}},[i.toString()]);const l=c=>{if(n.current){const[d,u]=c;const{offsetHeight:m,offsetWidth:f}=n.current;const b=f-a.measurements.color.colorPicker.thumb.size;const v=m-a.measurements.color.colorPicker.thumb.size;const y=d*f/b;const x=u*m/v;const C=Math.min(1,Math.max(0,y/f));const D=Math.min(1,Math.max(0,(m-x)/m));e(C,D);r([d,u])}};return Il.createElement(hS,{ref:n,surface:Il.createElement(pS,{hue:t}),onChange:l},Il.createElement(Yi,{position:o}))};var uS=Io.div`
  position: absolute;
  left: ${i=>i.leftOffset}px;
  top: ${i=>i.topOffset}px;
  z-index: ${i=>i.theme.measurements.zIndex.input.list};
  display: none;
  opacity: 0;
  transition: opacity 0.3s ease-out;
  ${i=>i.show&&gm`
      display: block;
      opacity: 1;
      transition: opacity 0.3s ease-out;
    `}
`;var bm=Io.div`
  &&& {
    position: absolute;
    ${i=>i.direction==="top"&&gm`
        transform: translate(0, -100%);
      `}
    padding: 16px;
    box-sizing: border-box;
    box-shadow: ${i=>i.theme.colorPicker.listShadow};
    background: ${i=>i.theme.colorPicker.listBackground};
    border-radius: ${i=>i.theme.shape.radiusMedium}px;
    width: ${i=>i.theme.measurements.color.colorPicker.width}px;
    height: ${i=>i.theme.measurements.color.colorPicker.height}px;
    left: 8px;
    z-index: 1;
  }
`;var mS=Io(pm)`
  margin-top: 8px;
`;var fS=Io(um)`
  margin-top: 8px;
`;var gS=Io.div`
  display: flex;
  justify-content: space-between;
  margin-top: 30px;
`;var bS=Io.div`
  display: flex;
`;var yr=class extends ht.Component{constructor(t){super(t);this.node=ht.createRef();this.checkId=(t,e,o)=>{let r=t;let n=0;while(r.parentElement&&n<o){r=r.parentElement;n+=1;if(r.id===e){return true}}return false};this.handleOutsideClick=t=>{var a;const{onRequestClose:e,onAddSnapshot:o,show:r}=this.props;const{color:n}=this.state;if(r){if((a=this.node.current)==null?void 0:a.contains(t.target)){return}this.setState({hexInputValue:n.toHexString()});if(e){e()}if(o){o()}}};this.onChange=t=>{const{onChange:e}=this.props;e({color:t.toRgbArray(),colorString:t.toRgbString()})};this.onHexValueChange=t=>{if(t.match(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/i)){const e=new Ft(t);this.onChange(e);this.setState({color:e,hue:e.toHsl().h})}this.setState({hexInputValue:t})};this.onAlphaChange=t=>{const{color:e}=this.state;const o=e.setAlpha(t);this.onChange(o);this.setState({color:o,hexInputValue:o.toHexString()})};this.onHueChange=t=>{const{color:e}=this.state;const{s:o,v:r,a:n}=e.toHsv();const a=new Ft({h:t,s:o,v:r,a:n});this.onChange(a);this.setState({color:a,hexInputValue:a.toHexString(),hue:t})};this.onSaturationBrightnessChange=(t,e)=>{const{color:o,hue:r}=this.state;const{a:n}=o.toHsv();const a=new Ft({h:r,s:t,v:e,a:n});this.onChange(a);this.setState({color:a,hexInputValue:a.toHexString()})};this.onInputChange=t=>e=>{const{color:o}=this.state;if(e.match(/0*([0-9]|[1-8][0-9]|9[0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/g)||!e.trim()){const r=o.toRgb();r[t]=parseInt(e,10)||0;const n=new Ft(r);this.onChange(n);this.setState({color:n,hexInputValue:n.toHexString(),hue:n.toHsl().h})}};const{color:e}=this.props;const o=new Ft(e);this.state={color:o,hue:o.toHsl().h,hexInputValue:o.toHexString()}}componentDidMount(){document.addEventListener("mousedown",this.handleOutsideClick,false);document.addEventListener("touchstart",this.handleOutsideClick,false);document.addEventListener("keydown",this.handleOutsideClick,false)}componentDidUpdate(t){const{color:e,show:o}=this.props;if(o&&!t.show){const r=new Ft(e);this.setState({color:r,hue:r.toHsl().h,hexInputValue:r.toHexString()})}}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick,false);document.removeEventListener("touchstart",this.handleOutsideClick,false);document.removeEventListener("keydown",this.handleOutsideClick,false)}render(){const{show:t,showArrow:e,direction:o,arrowOffset:r,topOffset:n,leftOffset:a,labelHex:l,labelR:c,labelG:d,labelB:u,labelSliderHue:m,labelSliderOpacity:f}=this.props;const{color:b,hexInputValue:v,hue:y}=this.state;const{r:x,g:C,b:D}=b.toRgb();const z=b.clone().setAlpha(1).toRgbString();const L=b.clone().setAlpha(0).toRgbString();return ht.createElement("div",{ref:this.node},ht.createElement(uS,{show:t,direction:o,leftOffset:a,topOffset:n},ht.createElement(bm,{direction:o},e&&ht.createElement(nm,{direction:o,arrowOffset:r}),ht.createElement(fm,{color:b,hue:y,onChange:this.onSaturationBrightnessChange}),ht.createElement(A.Spacer,{count:2}),ht.createElement(A.Input.Label,{label:m}),ht.createElement(mS,{hue:y,onChange:this.onHueChange}),ht.createElement(A.Spacer,{count:2}),ht.createElement(A.Input.Label,{label:f}),ht.createElement(fS,{color:b,opaqueColor:z,transparentColor:L,onChange:this.onAlphaChange}),ht.createElement(gS,null,ht.createElement(lm,{value:v,label:l,onChange:this.onHexValueChange}),ht.createElement(bS,null,ht.createElement(is,{value:x,label:c,onChange:this.onInputChange("r")}),ht.createElement(is,{value:C,label:d,onChange:this.onInputChange("g")}),ht.createElement(is,{value:D,label:u,onChange:this.onInputChange("b")}))))))}};yr.defaultProps={direction:"bottom",showArrow:true};bm.defaultProps={theme:Lt};var vS=yS.div`
  display: flex;
  flex-wrap: wrap;
  position: relative;
`;var Ml=class extends vr.Component{constructor(t){super(t);this.containerRef=null;this.onClick=t=>e=>{const{onAddSnapshot:o,config:r,onChange:n,colorPickerDirection:a,rect:l}=this.props;const{activeIdentifier:c,showColorPicker:d,colorList:u}=this.state;const m=u.find(f=>f.identifier===t);if(c===m.identifier&&!d){const{left:f,width:b,top:v,height:y}=e.currentTarget.getBoundingClientRect();const{left:x,top:C}=this.containerRef.current.getBoundingClientRect();const{colorPicker:D}=r.measurements.color;const z=D.arrow.width/2;let L=f-x+b/2-2;let R=a==="bottom"?v-C+y+z:v-C-z;let P=-24;const V=D.width-D.arrow.width-12;if(L>V){P+=L-V;L-=P}let U=true;if(a==="bottom"&&l){const nt=l.height;const Ae=l.top;const pi=v-Ae;const hi=nt-(pi+y);const Pr=r.measurements.color.colorPicker.height+z;if(hi<Pr){R=hi-Pr}if(pi+R<pi+y/2){R+=z;U=false}}this.setState({showColorPicker:true,showColorPickerArrow:U,arrowOffset:L,topOffset:R,leftOffset:P})}else if(d){this.setState({showColorPicker:false})}else{n(m.color);this.setState({activeIdentifier:t});if(o){o()}}};this.onChange=({color:t,colorString:e})=>{const{onChange:o}=this.props;const{activeIdentifier:r,colorList:n}=this.state;const a=n.findIndex(l=>l.identifier===r);if(a!==-1){const l=[...n];l[a]={identifier:n[a].identifier,colorString:e,color:t};this.setState({colorList:l})}o(t)};this.onChangeColorPicker=({color:t,colorString:e})=>{this.onChange({color:[t[0]/255,t[1]/255,t[2]/255,t[3]],colorString:e})};this.closeColorPicker=()=>{this.setState({showColorPicker:false})};this.getColorPicker=()=>{const{activeColor:t,labelsColor:e,colorPickerDirection:o,onAddSnapshot:r}=this.props;const{showColorPicker:n,showColorPickerArrow:a,arrowOffset:l,leftOffset:c,topOffset:d}=this.state;return vr.createElement(yr,{color:I(t),show:n,showArrow:a,direction:o,arrowOffset:l,leftOffset:c,topOffset:d,labelHex:e.hex,labelR:e.r,labelG:e.g,labelB:e.b,labelSliderOpacity:e.sliderOpacity,labelSliderHue:e.sliderHue,onChange:this.onChangeColorPicker,onRequestClose:this.closeColorPicker,onAddSnapshot:r})};const{colors:e}=this.props;this.containerRef=vr.createRef();this.state={activeIdentifier:"",activeSprite:"",colorList:[...e],showColorPicker:false,showColorPickerArrow:false,arrowOffset:0,leftOffset:0,topOffset:0}}static getDerivedStateFromProps({activeSprite:t,activeColor:e},{activeSprite:o,colorList:r}){if(t!==o||!t){const n=le(I(e));const a=r.find(({colorString:l})=>l===n);return{activeSprite:t,activeIdentifier:a?a.identifier:""}}return null}render(){const{tool:t,isDisabled:e,custom:o,config:r}=this.props;const{activeIdentifier:n,colorList:a}=this.state;const l=o.getColorItem();const c=r.assetProvider.getPath("controls","/tiled-background.png");const d=a.map(u=>{if(!l){return null}return vr.createElement(l,{tool:t,key:`${u.colorString}-item-${u.identifier}`,isActive:u.identifier===n,isDisabled:e,onClick:this.onClick(u.identifier),color:u.colorString,label:u.identifier,tiledBackgroundUrl:c})});return vr.createElement(vS,{"data-test":S.ColorList,ref:this.containerRef},d,this.getColorPicker())}};Ml.defaultProps={colorPickerDirection:"bottom",isDisabled:false};var ym=O("config","custom")(E(Ml));var xS=i=>vm.createElement(Xr.Consumer,null,({rect:t})=>vm.createElement(ym,{...i,rect:t}));import Ao,{useRef as bC,useEffect as yC,useLayoutEffect as vC}from"react";var of=ui(jo());import Ji,{useRef as nC}from"react";import rs from"react";import xm from"styled-components";var SS=xm(M.Controls.Container)`
  cursor: none;
`;var CS=xm.div`
  position: absolute;
  width: 20px;
  height: 20px;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  border-width: 2px;
  border-style: solid;
  box-shadow: 0 0 0 0.5px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 1);
  color: ${i=>i.theme.foreground};
`;var Sm=class extends rs.Component{constructor(t){super(t);this.INITIAL_POSITION={x:void 0,y:void 0};this.state={...this.INITIAL_POSITION,isDrawing:false};this.containerElementRef=null;this.getCursorCoordinates=t=>{let e=0;let o=0;if(t.type.indexOf("touch")!==-1){const l=t;if(!l.touches.length){return{...this.INITIAL_POSITION,height:0,width:0}}e=l.touches[0].clientX;o=l.touches[0].clientY}else{const l=t;e=l.clientX;o=l.clientY}const r=this.containerElementRef.current.getBoundingClientRect();const n=e-r.left;const a=o-r.top;return{x:n,y:a,height:r.height,width:r.width}};this.draw=t=>{t.preventDefault();t.stopPropagation();this.touchDraw(t)};this.touchDraw=t=>{const{x:e,y:o}=this.getCursorCoordinates(t);if(e!==void 0&&o!==void 0){this.setState({x:e,y:o});if(this.state.isDrawing){this.brushTool.strokePosition({x:e,y:o})}}};this.touchStart=()=>{this.brushTool.clickableCanvas(false);this.setState({isDrawing:true});this.brushTool.beginStroke()};this.start=t=>{if(t.button===0){this.touchStart()}else{this.stop(t)}};this.stop=t=>{if(this.state.isDrawing){t.preventDefault();t.stopPropagation();this.setState({isDrawing:false});this.brushTool.endStroke();this.brushTool.clickableCanvas(true)}};this.setInitialPosition=()=>{this.setState({...this.INITIAL_POSITION})};this.mouseOut=t=>{const{config:e}=this.props;t.preventDefault();t.stopPropagation();const o=this.brushTool.sizeOnScreenSpace/2;const{x:r,y:n,height:a,width:l}=this.getCursorCoordinates(t);if(r&&n){if(r<0||n<0||r>l-o||n>a-o||n<e.measurements.mainCanvasActionBar.height){this.setInitialPosition()}}};this.touchEnd=t=>{t.preventDefault();t.stopPropagation();const{x:e,y:o}=this.state;if(e&&o){this.setInitialPosition()}};this.getCursor=()=>{const{x:t,y:e}=this.state;if(t&&e){const o=le(this.brushTool.color);const r=`${this.brushTool.sizeOnScreenSpace}px`;const n={left:`${this.state.x}px`,top:`${this.state.y}px`,borderColor:o,height:r,width:r};return rs.createElement(CS,{style:n,"data-test":S.Cursor})}return null};this.containerElementRef=rs.createRef()}componentDidMount(){document.addEventListener("mouseup",this.stop,false);document.addEventListener("touchend",this.stop,{passive:false})}componentWillUnmount(){document.removeEventListener("mouseup",this.stop,false);document.removeEventListener("touchend",this.stop,false)}get brushTool(){return this.props.brushTool}render(){return rs.createElement(SS,{ref:this.containerElementRef,"data-test":S.CursorContainer,onMouseMove:this.draw,onTouchMove:this.touchDraw,onMouseDown:this.start,onTouchStart:this.touchStart,onMouseOut:this.mouseOut,onTouchEnd:this.touchEnd},this.getCursor())}};var Cm=O("brushTool","config")(E(Sm));import TS from"react";import te from"react";import wS from"styled-components";var Vt=(i,t)=>{return i!==void 0&&t!==void 0&&!Number.isNaN(i)&&!Number.isNaN(t)};var Dl=wS(M.Controls.Knob)`
  margin-top: -${i=>i.theme.measurements.canvasControls.knob.touchable.desktop/2}px;
  margin-left: -${i=>i.theme.measurements.canvasControls.knob.touchable.desktop/2}px;
`;var{Container:kS}=M.Controls;var wm=class extends te.Component{constructor(t){super(t);this.start=(t,{x:e,y:o})=>{if(Vt(e,o)){this.focusTool.setStart({x:e,y:o})}};this.end=(t,{x:e,y:o})=>{if(Vt(e,o)){this.focusTool.setEnd({x:e,y:o})}};this.onKnob1DragStart=(t,e)=>{this.focusTool.clickableCanvas(false);this.start(t,e)};this.onKnob1DragStop=(t,e)=>{this.addSnapshot(e,this.historyLocale.focusPosition);this.start(t,e);this.focusTool.clickableCanvas(true)};this.onKnob2DragStart=(t,e)=>{this.focusTool.clickableCanvas(false);this.end(t,e)};this.onKnob2DragStop=(t,e)=>{this.addSnapshot(e,this.historyLocale.focusPosition);this.end(t,e);this.focusTool.clickableCanvas(true)};this.addSnapshot=({x:t,y:e},o)=>{if(Vt(t,e)){this.focusTool.toolSnapshot(o)}};this.getLine=()=>{const{height:t,width:e}=this.props.canvas.canvasSize;const o=this.focusTool.startOnPreview;const r=this.focusTool.endOnPreview;return te.createElement("svg",{focusable:"false",height:t,width:e},te.createElement("line",{x1:o.x,y1:o.y,x2:r.x,y2:r.y,strokeWidth:"2",stroke:"currentColor"}))};this.startRef=te.createRef();this.endRef=te.createRef()}get focusTool(){return this.props.focusTool}get historyLocale(){return this.focusTool.locale.history}render(){return te.createElement(kS,null,te.createElement(M.Controls.Line,null,this.getLine()),te.createElement(A.Draggable,{nodeRef:this.startRef,bounds:"parent",position:this.focusTool.startOnPreview,onStart:this.onKnob1DragStart,onDrag:this.start,onStop:this.onKnob1DragStop},te.createElement(Dl,{ref:this.startRef})),te.createElement(A.Draggable,{nodeRef:this.endRef,bounds:"parent",onStart:this.onKnob2DragStart,onDrag:this.end,onStop:this.onKnob2DragStop,position:this.focusTool.endOnPreview},te.createElement(Dl,{ref:this.endRef})))}};Dl.defaultProps={theme:Lt};var km=O("canvas","focusTool")(E(wm));import si from"react";var xr=class extends si.Component{constructor(t){super(t);this.getKnobPosition=()=>{const{focusTool:t}=this.props;const{origin:e,size:o}=t;const r=o/2;const n=Math.PI/2+t.rotation;return{x:e.x+r*Math.cos(n),y:e.y+r*Math.sin(n)}};this.onArea=(t,{x:e,y:o})=>{const{editor:r}=this.props;const n=r.configStore.measurements.canvasControls.knob.size;if(Vt(e,o)){const{canvas:a,focusTool:l}=this.props;const{size:c,mirroredAreaWidth:d}=l;const u=e+d/2;const m=o+c/2;const f=new g(this.getKnobPosition());const b=new g({x:e,y:o});const v=b.subtract(new g(this.areaPosition));const y=f.add(v);if(y.x>n&&y.x<a.canvasSize.width-n){if(y.y>n&&y.y<a.canvasSize.height-n){l.setOrigin({x:u,y:m})}}}};this.onKnob=(t,{x:e,y:o})=>{const{focusTool:r}=this.props;if(Vt(e,o)){r.clickableCanvas(false);const n=new g(r.origin);const a=new g(e,o);const l=n.subtract(a);const c=l.magnitude;const d=Math.PI/2+Math.atan2(l.y,l.x);r.setSize(c*2);r.setRotation(d)}};this.onAreaDragStop=(t,e)=>{const{focusTool:o}=this.props;this.addSnapshot(e,o.locale.history.focusPosition);this.onArea(t,e);o.clickableCanvas(true)};this.onKnobDragStop=(t,e)=>{const{focusTool:o}=this.props;this.addSnapshot(e,o.locale.history.focusSize);this.onKnob(t,e);o.clickableCanvas(true)};this.addSnapshot=({x:t,y:e},o)=>{const{focusTool:r}=this.props;if(Vt(t,e)){r.toolSnapshot(o)}};this.knobRef=si.createRef();this.areaRef=si.createRef()}get areaPosition(){const{focusTool:t}=this.props;const{origin:e,size:o,mirroredAreaWidth:r}=t;return{x:e.x-r/2,y:e.y-o/2}}render(){const{x:t,y:e}=this.areaPosition;const{focusTool:o}=this.props;return si.createElement(M.Controls.Container,null,si.createElement(A.Draggable,{nodeRef:this.knobRef,bounds:"parent",onStart:this.onKnob,onDrag:this.onKnob,onStop:this.onKnobDragStop,position:this.getKnobPosition()},si.createElement(M.Controls.Knob,{ref:this.knobRef})),si.createElement(A.Draggable,{nodeRef:this.areaRef,onStart:this.onArea,onDrag:this.onArea,onStop:this.onAreaDragStop,position:{x:t,y:e},rotation:o.rotation},si.createElement(M.Controls.Area,{ref:this.areaRef,"data-test":S.Focus,height:o.size,width:o.mirroredAreaWidth})))}};xr=s([O("focusTool","canvas","editor"),E],xr);import ai from"react";var Sr=class extends ai.Component{constructor(t){super(t);this.state={knobAngle:2.35};this.onCircle=(t,{x:e,y:o})=>{if(Vt(e,o)){const{focusTool:r}=this.props;r.setCenter({x:e+r.radius,y:o+r.radius})}};this.onKnob=(t,{x:e,y:o})=>{if(Vt(e,o)){const{focusTool:r}=this.props;const n=new g(e,o);const a=new g(r.center.x,r.center.y);const l=a.subtract(n);const c=l.magnitude;const d=-Math.atan2(l.y,l.x);this.setState({knobAngle:d});r.setRadius(c)}};this.onCircleDragStart=(t,e)=>{const{focusTool:o}=this.props;o.clickableCanvas(false);this.onCircle(t,e)};this.onCircleDragStop=(t,e)=>{const{focusTool:o}=this.props;this.addSnapshot(e,o.locale.history.focusPosition);this.onCircle(t,e);o.clickableCanvas(true)};this.onKnobDragStart=(t,e)=>{const{focusTool:o}=this.props;o.clickableCanvas(false);this.onKnob(t,e)};this.onKnobDragStop=(t,e)=>{const{focusTool:o}=this.props;this.addSnapshot(e,o.locale.history.focusSize);this.onKnob(t,e);o.clickableCanvas(true)};this.addSnapshot=({x:t,y:e},o)=>{const{focusTool:r}=this.props;if(Vt(t,e)){r.toolSnapshot(o)}};this.knobRef=ai.createRef();this.circleRef=ai.createRef()}componentDidMount(){this.setState({knobAngle:2.35})}render(){const{focusTool:t}=this.props;const{knobAngle:e}=this.state;const{center:o,radius:r}=t;const n={x:o.x-r,y:o.y-r};const a=Math.PI-e;const l={x:o.x+r*Math.cos(a),y:o.y+r*Math.sin(a)};return ai.createElement(M.Controls.Container,null,ai.createElement(A.Draggable,{nodeRef:this.knobRef,bounds:"parent",onStart:this.onKnobDragStart,onDrag:this.onKnob,onStop:this.onKnobDragStop,position:l},ai.createElement(M.Controls.Knob,{ref:this.knobRef})),ai.createElement(A.Draggable,{nodeRef:this.circleRef,onStart:this.onCircleDragStart,onDrag:this.onCircle,onStop:this.onCircleDragStop,position:n},ai.createElement(M.Controls.Circle,{ref:this.circleRef,"data-test":S.Focus,radius:r})))}};Sr=s([O("focusTool","canvas"),E],Sr);var Tm=E(()=>{const{focusTool:i}=K();const{state:t}=i;const e=()=>{switch(t.identifier){case"linear":return km;case"radial":return Sr;case"mirrored":return xr;default:return null}};const o=e();return i.isOptionSelected&&o?TS.createElement(o,null):null});import ze,{useRef as RS}from"react";import Eo from"react";import Cr from"react";import Mm from"react";import IS from"react";var Im=({customButtonKey:i,onClick:t,label:e,icon:o,disabled:r})=>{const{custom:n}=K();const a=n.getButton(i);if(!a){return null}return IS.createElement(a,{onClick:t,label:e,ariaLabel:e,icon:o,isDisabled:r})};var Mo=({availableKeys:i,actions:t})=>{return Mm.createElement(M.Bar.ButtonGroup,{onClick:kc},i.map(e=>{const o=t[e];if(o){return Mm.createElement(Im,{key:e,...o})}return null}))};var MS=({sprite:i,stickerTool:t})=>{const e=t.locale.canvasActions;const o={["bringtofront"]:{customButtonKey:"canvasActionBringToFront",onClick:t.bringToFront,label:e.buttonBringToFront,icon:Cr.createElement(Q.bringToFront,null),disabled:i.isOnTop},["flip"]:{customButtonKey:"canvasActionFlip",onClick:t.flipHorizontally,label:e.buttonFlipHorizontal,icon:Cr.createElement(Q.flipHorizontal,null)},["duplicate"]:{customButtonKey:"canvasActionDuplicate",onClick:()=>t.duplicate(),label:e.buttonDuplicate,icon:Cr.createElement(Q.duplicate,null)},["delete"]:{customButtonKey:"canvasActionDelete",onClick:t.delete,label:e.buttonDelete,icon:Cr.createElement(Q.delete,null)}};if(!t.isStickerSelected){return null}return Cr.createElement(Mo,{availableKeys:t.config.canvasActions,actions:o})};var Dm=O("sprite","stickerTool")(E(MS));import wr from"react";var DS=({textTool:i,sprite:t})=>{const e=i.locale.canvasActions;const o={["edit"]:{customButtonKey:"canvasActionEdit",onClick:()=>i.setEditMode(true),label:e.buttonEdit,icon:wr.createElement(Q.edit,null)},["bringtofront"]:{customButtonKey:"canvasActionBringToFront",onClick:i.bringToFront,label:e.buttonBringToFront,icon:wr.createElement(Q.bringToFront,null),disabled:t.isOnTop},["duplicate"]:{customButtonKey:"canvasActionDuplicate",onClick:i.duplicate,label:e.buttonDuplicate,icon:wr.createElement(Q.duplicate,null)},["delete"]:{customButtonKey:"canvasActionDelete",onClick:i.delete,label:e.buttonDelete,icon:wr.createElement(Q.delete,null)}};if(!t.isSpriteText){return null}return wr.createElement(Mo,{availableKeys:i.config.canvasActions,actions:o})};var Em=O("textTool","sprite")(E(DS));import Do from"react";var ES=({sprite:i,textDesignTool:t})=>{const e=t.locale.canvasActions;const o={["edit"]:{customButtonKey:"canvasActionEdit",onClick:()=>t.setEditMode(true),label:e.buttonEdit,icon:Do.createElement(Q.edit,null)},["bringtofront"]:{customButtonKey:"canvasActionBringToFront",onClick:t.bringToFront,label:e.buttonBringToFront,icon:Do.createElement(Q.bringToFront,null),disabled:i.isOnTop},["invert"]:{customButtonKey:"canvasActionInvert",onClick:t.invertBackground,label:e.buttonInvert,icon:Do.createElement(Q.flipHorizontal,null)},["duplicate"]:{customButtonKey:"canvasActionDuplicate",onClick:t.duplicate,label:e.buttonDuplicate,icon:Do.createElement(Q.duplicate,null)},["delete"]:{customButtonKey:"canvasActionDelete",onClick:()=>t.delete(),label:e.buttonDelete,icon:Do.createElement(Q.delete,null)}};if(!t.isTextDesignSelected){return null}return Do.createElement(Mo,{availableKeys:t.config.canvasActions,actions:o})};var Pm=O("sprite","textDesignTool")(E(ES));var kr=class extends Eo.Component{constructor(t){super(t);this.actionsRef=null;this.spriteControlPosition=()=>{const{config:t,sprite:e,canvas:{canvasSize:o}}=this.props;const{controlPadding:r,controlOffset:n}=t.measurements.canvasControls.sprite;const{x:a,y:l}=e.position;const{height:c,width:d}=e.currentSprite.size;const u=e.rotationWRTOutputRotation;const m=this.actionsRef.current;let f=new g(0,0);if(m){const y=m.getBoundingClientRect();f=new g(y.width/2+n,y.height+n)}const b=Math.abs(d*Math.sin(u))+Math.abs(c*Math.cos(u));const v=new g(a,l-b/2-r-n).clamp(f,new g(o.width,o.height).subtract(f));return{left:v.x,top:v.y}};this.getSpriteControls=()=>{const{sprite:t}=this.props;switch(t.tool){case"text":return Eo.createElement(Em,null);case"textdesign":return Eo.createElement(Pm,null);case"sticker":return Eo.createElement(Dm,null);default:return null}};this.actionsRef=Eo.createRef();this.state={isMounted:false}}componentDidMount(){this.setState({isMounted:true})}render(){const{sprite:t}=this.props;const{isMounted:e}=this.state;const o=!t.isDragMode&&!t.isEditMode;const r=this.spriteControlPosition();return Eo.createElement(M.Controls.SpriteActionsWrapper,{"data-test":S.SpriteActions,ref:this.actionsRef,show:o&&e,style:{...r}},this.getSpriteControls())}};kr=s([O("sprite","config","editor","canvas"),E],kr);import fe,{useRef as ns}from"react";var{Corner:ss}=M.Controls;var{Draggable:as}=A;var El=new g(0,0);var Pl=new g(0,0);var zm=E(()=>{const i=ns(null);const t=ns(null);const e=ns(null);const o=ns(null);const{config:r,sprite:n}=K();const{leftTopPosition:a,leftBottomPosition:l,rightTopPosition:c,rightBottomPosition:d}=n;const{borderWidth:u}=r.measurements.canvasControls.corner;const m=({clientX:y,clientY:x})=>{if(y!==void 0&&x!==void 0){n.onCornerDrag(Pl.subtract(El.subtract(new g(y,x))))}};const f=y=>{switch(y){case"leftTop":return a;case"leftBottom":return l;case"rightTop":return c;case"rightBottom":return d;default:return a}};const b=(y,x)=>{const{clientX:C,clientY:D}=y;El=new g(C,D);Pl=new g(f(x));n.clickableCanvas(false);n.setDragMode(true)};const v=()=>{n.clickableCanvas(true);n.setDragMode(false);n.spriteSnapshot("size");El=new g(0,0);Pl=new g(0,0)};return fe.createElement(fe.Fragment,null,fe.createElement(as,{nodeRef:i,onStop:v,onDrag:m,onStart:y=>b(y,"leftTop")},fe.createElement(ss,{ref:i,"data-test":S.SpriteTopLeft,vertical:"top",horizontal:"left",borderWidth:u})),fe.createElement(as,{nodeRef:e,onStop:v,onDrag:m,onStart:y=>b(y,"leftBottom")},fe.createElement(ss,{ref:e,"data-test":S.SpriteBottomLeft,vertical:"bottom",horizontal:"left",borderWidth:u})),fe.createElement(as,{nodeRef:t,onStop:v,onDrag:m,onStart:y=>b(y,"rightTop")},fe.createElement(ss,{ref:t,"data-test":S.SpriteTopRight,vertical:"top",horizontal:"right",borderWidth:u})),fe.createElement(as,{nodeRef:o,onStop:v,onDrag:m,onStart:y=>b(y,"rightBottom")},fe.createElement(ss,{ref:o,"data-test":S.SpriteBottomRight,vertical:"bottom",horizontal:"right",borderWidth:u})))});import Po,{useRef as Am}from"react";import Lm from"styled-components";var PS=Lm.img`
  position: absolute;
  left: -24px;
  top: calc(50% - 12px);
  cursor: ew-resize;
`;var zS=Lm.img`
  position: absolute;
  right: -24px;
  top: calc(50% - 12px);
  cursor: ew-resize;
`;var zl=new g(0,0);var Al=new g(0,0);var AS=({sprite:i,config:t})=>{const e=Am(null);const o=Am(null);const r=i.leftMidPosition;const n=i.rightMidPosition;const a=t.assetProvider.getPath("controls","/arrow-left.png");const l=t.assetProvider.getPath("controls","/arrow-right.png");const c=(m,f)=>{i.setDragMode(true);i.clickableCanvas(false);const{clientX:b,clientY:v}=m;zl=new g(b,v);Al=new g(f==="left"?r:n)};const d=()=>{i.clickableCanvas(true);i.setDragMode(false);i.addSnapshot("edit",i.textDesignLocale.padding);zl=new g(0,0);Al=new g(0,0)};const u=({clientX:m,clientY:f})=>{if(m!==void 0&&f!==void 0){const b=Al.subtract(zl.subtract(new g(m,f)));i.onPaddingDrag(b)}};return Po.createElement(Po.Fragment,null,Po.createElement(A.Draggable,{nodeRef:e,onStart:m=>c(m,"left"),onDrag:u,onStop:d},Po.createElement(PS,{ref:e,src:a})),Po.createElement(A.Draggable,{nodeRef:o,onStart:m=>c(m,"right"),onDrag:u,onStop:d},Po.createElement(zS,{ref:o,src:l})))};var Bm=O("sprite","config")(E(AS));import Om,{useRef as LS}from"react";import BS from"styled-components";var Fm=BS(M.Controls.Knob)`
  margin-left: -11px;
  margin-top: 0px;
  cursor: url(${i=>i.url}) 9 9, ew-resize;
  &:before {
    top: unset;
    bottom: 0px;
    left: calc(
      50% - ${i=>i.theme.measurements.canvasControls.knob.size/2}px
    );
  }
`;var Ll=new g(0,0);var Bl=new g(0,0);var OS=({config:i,sprite:t,snapping:e})=>{const o=LS(null);const r=t.rightBottomHandlePosition;const n=t.leftBottomHandlePosition;const a={x:(r.x+n.x)/2,y:(r.y+n.y)/2};const l=({clientX:f,clientY:b})=>{Ll=new g(f,b);Bl=new g(a);t.setDragMode(true);t.clickableCanvas(false)};const c=()=>{t.clickableCanvas(true);t.setDragMode(false);t.spriteSnapshot("rotation");e.hideRotationGuides();Ll=new g(0,0);Bl=new g(0,0)};const d=({clientX:f,clientY:b})=>{if(f!==void 0&&b!==void 0){const v=Bl.subtract(Ll.subtract(new g(f,b)));const y=t.position;const x=new g(y.x,y.y);const C=v.subtract(x);const D=Math.atan2(C.y,C.x)-Math.PI/2;const z=e.snapToRotation(D,C,t.currentRect);t.setRotation(z)}};const u=f=>{d(f)};const m=i.assetProvider.getPath("controls",`/${ic()?"rotate-windows":"rotate-osx"}.png`);return Om.createElement(A.Draggable,{nodeRef:o,onStart:l,onDrag:u,onStop:c},Om.createElement(Fm,{ref:o,url:m}))};Fm.defaultProps={theme:Lt};var Rm=O("sprite","snapping","config")(E(OS));import zo,{useRef as Hm}from"react";import Rl from"styled-components";var _m=Rl(M.Controls.Width)`
  cursor: ew-resize;
  @media all and (min-width: 0) and (max-width: 599px) {
    display: none;
  }
`;var $m=Rl(_m)`
  left: -3px;
  top: calc(
    50% - ${i=>i.theme.measurements.canvasControls.width.size/2}px
  );
`;var Wm=Rl(_m)`
  right: -3px;
  top: calc(
    50% - ${i=>i.theme.measurements.canvasControls.width.size/2}px
  );
`;var Ol=new g(0,0);var Fl=new g(0,0);var FS=({sprite:i,textTool:t})=>{const e=Hm(null);const o=Hm(null);const r=i.leftMidPadPosition;const n=i.rightMidPadPosition;const a=(d,u)=>{i.setDragMode(true);i.clickableCanvas(false);const{clientX:m,clientY:f}=d;Ol=new g(m,f);Fl=new g(u==="left"?r:n)};const l=()=>{i.clickableCanvas(true);i.setDragMode(false);i.addSnapshot("edit",i.textLocale.width);t.updateDefaultFontSize();Ol=new g(0,0);Fl=new g(0,0)};const c=({clientX:d,clientY:u})=>{if(d!==void 0&&u!==void 0){const m=Fl.subtract(Ol.subtract(new g(d,u)));i.onWidthDrag(m)}};return zo.createElement(zo.Fragment,null,zo.createElement(A.Draggable,{nodeRef:e,onStart:d=>a(d,"left"),onDrag:c,onStop:l},zo.createElement($m,{ref:e})),zo.createElement(A.Draggable,{nodeRef:o,onStart:d=>a(d,"right"),onDrag:c,onStop:l},zo.createElement(Wm,{ref:o})))};$m.defaultProps={theme:Lt};Wm.defaultProps={theme:Lt};var Nm=O("sprite","textTool")(E(FS));var{Draggable:HS}=A;var ls=new g(0,0);var Hl=new g(0,0);var Vm=E(()=>{const i=RS();const{active:t,config:e,snapping:o,sprite:r}=K();const n=({clientX:C,clientY:D})=>{const z=Hl.subtract(ls.subtract(new g(C,D)));const{x:L,y:R}=o.snapToPosition({x:z.x,y:z.y},r.currentRect);r.setPosition({x:L,y:R})};const a=C=>{const{clientX:D,clientY:z}=C;ls=new g(D,z);Hl=new g(r.position);r.setDragMode(true);o.updateGuides()};const l=C=>{const{clientX:D,clientY:z}=C;const{x:L,y:R}=ls;ls=new g(0,0);Hl=new g(0,0);r.setDragMode(false);if(L!==D&&R!==z){r.spriteSnapshot("position")}o.hidePositionGuides()};const c=C=>{C.preventDefault();C.stopPropagation();r.setEditMode(true)};const d=()=>{const C=t.tool;const D=r.tool;return r.isSpriteSelected&&C===D};if(!d()){return null}const{isSpriteText:u}=r;const m=r.isSpriteTextDesign&&r.textDesignToolStore.isInverted;const{height:f,width:b}=r.size;const v=r.spritePosition;const y=r.rotationWRTOutputRotation;const{controlPadding:x}=e.measurements.canvasControls.sprite;return ze.createElement(M.Controls.Container,null,ze.createElement(HS,{nodeRef:i,onStart:a,onDrag:n,onStop:l,rotation:y,position:v},ze.createElement(M.Controls.Sprite,{ref:i,"data-test":S.Sprite,onDoubleClick:c,height:f,width:b},u&&ze.createElement(Nm,null)||null,m&&ze.createElement(Bm,null)||null,ze.createElement(zm,null),ze.createElement(M.Controls.RotateHandle,{x:b/2+x/2},ze.createElement(Rm,null)))),ze.createElement(kr,null))});import ci from"react";import Ct,{useRef as Tr}from"react";import ds,{css as _l}from"styled-components";var{GridLine:cs}=M.Crop;var _S=M.Crop.Mask;var{Draggable:Ir}=A;var li=3;var $S=ds(Xi)`
  left: ${li}px;
  top: ${li}px;
  @media all and (min-width: 0) and (max-width: 599px) {
    left: 6px;
    top: 6px;
  }
`;var WS=ds(Xi)(i=>{const{desktop:t}=i.theme.measurements.canvasControls.corner.touchable;const e=t/4-i.borderWidth;return _l`
    left: ${e-t}px;
    top: ${li}px;
    @media all and (min-width: 0) and (max-width: 599px) {
      left: -30px;
      top: 6px;
    }
  `});var NS=ds(Xi)(i=>{const{desktop:t}=i.theme.measurements.canvasControls.corner.touchable;const e=t/4-i.borderWidth;return _l`
    left: ${e-t}px;
    top: ${e-t}px;
    @media all and (min-width: 0) and (max-width: 599px) {
      left: -30px;
      top: -30px;
    }
  `});var VS=ds(Xi)(i=>{const{desktop:t}=i.theme.measurements.canvasControls.corner.touchable;const e=t/4-i.borderWidth;return _l`
    top: ${e-t}px;
    left: ${li}px;
    @media all and (min-width: 0) and (max-width: 599px) {
      top: -30px;
      left: 6px;
    }
  `});var US=({transformTool:i})=>{const t=Tr(null);const e=Tr(null);const o=Tr(null);const r=Tr(null);const n=Tr(null);const{leftTopRespectFlip:a,leftBottomRespectFlip:l,rightTopRespectFlip:c,rightBottomRespectFlip:d}=i;const{height:u,width:m}=i.cropMaskSize;const{maxCropMaskSize:f,defaultCropMaskPosition:b}=i;const{isFlippedHorizontal:v,isFlippedVertical:y}=i;const x=f.width/2;const C=f.height/2;const D={...f,left:b.x,top:b.y};const z={height:u,width:m};const L=i.isDragMode?{transition:"unset"}:{};const R=Y=>{return v?x*2-Y:Y};const P=Y=>{return y?C*2-Y:Y};const V=(Y,H,_)=>{const Zi=R(Y);const zr=P(H);switch(tt.getFlippedEdgeIndex(_,v,y)){case 0:i.onLeftTop({x:Zi,y:zr});break;case 1:i.onLeftBottom({x:Zi,y:zr});break;case 2:i.onRightTop({x:Zi,y:zr});break;case 3:i.onRightBottom({x:Zi,y:zr});break;default:break}};const U=(Y,H,_)=>{i.setDragMode(true);i.clickableCanvas(false);V(Y,H,_)};const nt=(Y,H,_)=>{V(Y,H,_)};const Ae=(Y,H,_)=>{i.setDragMode(false);V(Y,H,_);i.clickableCanvas(true);i.trackChanges()};const pi=(Y,{x:H,y:_})=>{U(H,_,0)};const hi=(Y,{x:H,y:_})=>{nt(H,_,0)};const Pr=(Y,{x:H,y:_})=>{Ae(H,_,0)};const Ef=(Y,{x:H,y:_})=>{U(H,_,1)};const Pf=(Y,{x:H,y:_})=>{nt(H,_,1)};const zf=(Y,{x:H,y:_})=>{Ae(H,_,1)};const Af=(Y,{x:H,y:_})=>{U(H,_,2)};const Lf=(Y,{x:H,y:_})=>{nt(H,_,2)};const Bf=(Y,{x:H,y:_})=>{Ae(H,_,2)};const Of=(Y,{x:H,y:_})=>{U(H,_,3)};const Ff=(Y,{x:H,y:_})=>{nt(H,_,3)};const Rf=(Y,{x:H,y:_})=>{Ae(H,_,3)};const Cs=(Y,H)=>{const _=R(Y+m/2)-m/2;const Zi=P(H+u/2)-u/2;i.changePosition({x:_,y:Zi})};const Hf=(Y,{x:H,y:_})=>{i.setDragMode(true);i.clickableCanvas(false);Cs(H,_)};const _f=(Y,{x:H,y:_})=>{Cs(H,_)};const $f=(Y,{x:H,y:_})=>{i.setDragMode(false);Cs(H,_);i.clickableCanvas(true);i.trackChanges()};return Ct.createElement("div",{style:{...D,position:"absolute"}},Ct.createElement(Ir,{nodeRef:n,bounds:"parent",position:a,onStart:Hf,onDrag:_f,onStop:$f},Ct.createElement(_S,{ref:n,style:{...z,...L}})),Ct.createElement(cs,{style:{left:a.x+m/3,top:a.y,height:u,width:1,...L}}),Ct.createElement(cs,{style:{left:a.x+m/3*2,top:a.y,height:u,width:1,...L}}),Ct.createElement(cs,{style:{left:a.x,top:a.y+u/3,height:1,width:m,...L}}),Ct.createElement(cs,{style:{left:a.x,top:a.y+u/3*2,height:1,width:m,...L}}),Ct.createElement(Ir,{nodeRef:t,bounds:"parent",position:{...a},onStart:pi,onDrag:hi,onStop:Pr},Ct.createElement($S,{ref:t,"data-test":S.CropTopLeft,vertical:"top",horizontal:"left",borderWidth:li,style:L})),Ct.createElement(Ir,{nodeRef:o,bounds:"parent",position:l,onStart:Ef,onDrag:Pf,onStop:zf},Ct.createElement(VS,{ref:o,"data-test":S.CropBottomLeft,vertical:"bottom",horizontal:"left",borderWidth:li,style:L})),Ct.createElement(Ir,{nodeRef:e,bounds:"parent",position:c,onStart:Af,onDrag:Lf,onStop:Bf},Ct.createElement(WS,{ref:e,"data-test":S.CropTopRight,vertical:"top",horizontal:"right",borderWidth:li,style:L})),Ct.createElement(Ir,{nodeRef:r,bounds:"parent",position:d,onStart:Of,onDrag:Ff,onStop:Rf},Ct.createElement(NS,{ref:r,"data-test":S.CropBottomRight,vertical:"bottom",horizontal:"right",borderWidth:li,style:L})))};var Um=O("transformTool")(E(US));import qi from"react";import Mr from"styled-components";import ge from"react";import ps,{css as jm}from"styled-components";var Gm=ps.div`
  overflow: hidden;
  display: none;
  position: relative;
  transform: unset !important;
  vertical-align: bottom;
  ${i=>i.isVisible&&jm`
      display: inline-block;
    `}

  svg {
    color: ${i=>i.theme.foreground};
  }
`;var GS=ps.div`
  position: relative;
  cursor: pointer;
  display: flex;
  align-self: center;
`;var jS=ps.div`
  font-size: 15px;
  display: none;
  width: 33px;
  text-align: right;
  color: ${i=>i.theme.foreground};
  z-index: 1;
  margin: 2px;
  ${i=>i.isVisible&&jm`
      display: inline-block;
    `}
`;var XS=ps.div`
  transform: translate(0, 0) !important;
`;var Xm=class extends ge.Component{constructor(t){super(t);this.SLIDER_WIDTH=213;this.MAX_ROTATION=45;this.DEGREES_PER_PIXEL=this.MAX_ROTATION*2/this.SLIDER_WIDTH;this.drag=(t,{x:e})=>{const{flipHorizontally:o,flipVertically:r}=this.transformTool.rotateFlipState;if(o!==r){e*=-1}const n=this.transformTool.defaultAngle-e*this.DEGREES_PER_PIXEL;const a=Math.min(this.MAX_ROTATION,Math.max(n,this.MAX_ROTATION*-1));this.transformTool.setRotation(parseInt(`${a}`,10))};this.stop=()=>{this.transformTool.setDefaultAngle(this.transformTool.rotationInDegrees);this.transformTool.trackChanges()};this.rotateRef=ge.createRef()}get transformTool(){return this.props.transformTool}render(){const{config:t,canvasWidth:e,transformTool:o}=this.props;const{flipHorizontally:r,flipVertically:n}=this.transformTool.rotateFlipState;const a=!t.isLayoutAdvanced||t.isLayoutAdvanced&&e>t.measurements.canvas.transform.minSliderWidth;const l=!t.isLayoutAdvanced||t.isLayoutAdvanced&&e>t.measurements.canvas.transform.minValueWidth;const c=this.transformTool.rotationInDegrees-this.transformTool.defaultAngle;const d=r===n?c*-1:c;const u=r!==n?o.rotationInDegrees*-1:o.rotationInDegrees;return ge.createElement(GS,{"data-test":S.RotateSlider},ge.createElement(A.Draggable,{nodeRef:this.rotateRef,axis:"x",position:{x:0,y:0},onStart:this.drag,onDrag:this.drag,onStop:this.stop,updateOnPosition:true,disabled:!a},ge.createElement(XS,{ref:this.rotateRef},ge.createElement(Gm,{isVisible:a},ge.createElement(Q.dots,{width:90,height:15,x:d})),ge.createElement(jS,{isVisible:l},u,"\xB0"),ge.createElement(Gm,{isVisible:a},ge.createElement(Q.dots,{width:90,height:15,x:d})))))}};var Ym=O("transformTool","config")(E(Xm));var YS=Mr(Q.rotate)`
  height: 16px;
  width: 16px;
  transform: scaleX(-1);
`;var KS=Mr(Q.rotate)`
  height: 16px;
  width: 16px;
`;var qS=Mr(Q.flipHorizontal)`
  height: 16px;
  width: 16px;
`;var JS=Mr(Q.flipVertical)`
  height: 16px;
  width: 16px;
`;var ZS=Mr.div`
  display: inline-flex;
  transform: scale(0.9);

  svg {
    color: ${i=>i.theme.foreground};
  }
`;var QS=({transformTool:i,config:t,custom:e,canvas:o})=>{const r=i.locale.transformActions;const n=o.canvasSize.width;const a=!t.isLayoutAdvanced||t.isLayoutAdvanced&&n>t.measurements.canvas.transform.minFlipWidth;const l=({customButtonKey:b,onClick:v,label:y,icon:x})=>{const C=e.getButton(b);return qi.createElement(C,{key:y,onClick:v,label:y,ariaLabel:y,icon:x,style:{margin:"0 5px"}})};const c=l({label:r.buttonFlipHorizontal,icon:qi.createElement(qS,null),onClick:()=>{i.flipHorizontally()},customButtonKey:"transformActionFlipHorizontal"});const d=l({label:r.buttonFlipVertical,icon:qi.createElement(JS,null),onClick:()=>{i.flipVertically()},customButtonKey:"transformActionFlipVertical"});const u=l({label:r.buttonRotateClockwise,icon:qi.createElement(YS,null),onClick:i.rotateClockwise,customButtonKey:"transformActionRotateClockwise"});const m=l({label:r.buttonRotateAntiClockwise,icon:qi.createElement(KS,null),onClick:i.rotateAntiClockwise,customButtonKey:"transformActionRotateAntiClockwise"});const f=t.isLayoutAdvanced?{transform:"rotate(180deg)"}:{};return qi.createElement(ZS,{style:f,"data-test":S.FlipRotateControls},i.config.enableFlip&&a&&c||null,i.config.enableFlip&&a&&d||null,i.config.enableRotation&&qi.createElement(Ym,{canvasWidth:n})||null,i.config.enableRotation&&m||null,i.config.enableRotation&&u||null)};var $l=O("transformTool","config","custom","canvas")(E(QS));var tC=M.Bar.Index;var{Backdrop:hs}=M.Crop;var eC=({transformTool:i,canvas:t,config:e})=>{const{leftTopRespectFlip:o,leftBottomRespectFlip:r,rightTopRespectFlip:n}=i;const{height:a}=i.cropMaskSize;const{height:l,width:c}=t.canvasSize;const{defaultCropMaskPosition:d}=i;const u=i.isDragMode?{transition:"unset"}:{};return ci.createElement(M.Controls.Container,null,ci.createElement(hs,{style:{left:0,top:0,width:c,height:o.y+d.y,...u}}),ci.createElement(hs,{style:{left:0,top:o.y+d.y,width:d.x+o.x,height:a,...u}}),ci.createElement(hs,{style:{left:n.x+d.x,top:n.y+d.y,width:c-n.x-d.x,height:a,...u}}),ci.createElement(hs,{style:{left:0,top:r.y+d.y,width:c,height:l-r.y-d.y+e.measurements.basicUIToolControlBar.controlsBarHeight,...u}}),ci.createElement(Um,null),e.isLayoutAdvanced?ci.createElement(tC,{bottom:true},ci.createElement($l,null)):null)};var Km=O("transformTool","canvas","config")(E(eC));import Wl from"react";import iC,{css as oC}from"styled-components";var rC=iC(M.Controls.Container)`
  ${i=>i.activeCursor?oC`
          cursor: move;
        `:""}
  z-index: ${i=>i.theme.measurements.zIndex.canvas.crop.dragImage};
`;var qm=class extends Wl.Component{constructor(t){super(t);this.INITIAL_POSITION={x:void 0,y:void 0};this.state={...this.INITIAL_POSITION,isDragging:false};this.containerRef=null;this.getCursorCoordinates=t=>{let e=0;let o=0;if(t.type.indexOf("touch")!==-1){const l=t;if(!l.touches.length){return this.INITIAL_POSITION}e=l.touches[0].clientX;o=l.touches[0].clientY}else{const l=t;e=l.clientX;o=l.clientY}const r=this.containerRef.current.getBoundingClientRect();const n=e-r.left;const a=o-r.top;return{x:n,y:a}};this.move=t=>{if(this.scale.canDrag){const{x:e,y:o}=this.getCursorCoordinates(t);if(e!==void 0&&o!==void 0){if(this.state.isDragging){const r={x:this.state.x-e,y:this.state.y-o};this.scale.setOffset(r)}}}};this.touchDrag=t=>{if(this.scale.canDrag){const{x:e,y:o}=this.getCursorCoordinates(t);if(e!==void 0&&o!==void 0){this.setState({x:e,y:o,isDragging:true})}}};this.drag=t=>{t.preventDefault();this.touchDrag(t)};this.stop=()=>{if(this.scale.canDrag){this.scale.savePosition();this.setState({...this.INITIAL_POSITION,isDragging:false})}};this.touchEnd=t=>{t.preventDefault();t.stopPropagation();const{x:e,y:o}=this.state;if(e&&o){this.setState({...this.INITIAL_POSITION,isDragging:false})}};this.containerRef=Wl.createRef()}componentDidMount(){document.addEventListener("mouseup",this.stop,false);document.addEventListener("touchend",this.stop,{passive:true})}componentWillUnmount(){document.removeEventListener("mouseup",this.stop,false);document.removeEventListener("touchend",this.stop,false)}get scale(){return this.props.scale}render(){return Wl.createElement(rC,{ref:this.containerRef,onMouseMove:this.move,onTouchMove:this.move,onMouseDown:this.drag,onTouchStart:this.touchDrag,onMouseUp:this.stop,onTouchEnd:this.touchEnd,activeCursor:this.scale.canDrag})}};var Jm=O("scale")(E(qm));var Zm=E(({children:i})=>{const t=nC(null);const{active:e,sprite:o,canvas:r}=K();const n=()=>{switch(e.tool){case"focus":return Ji.createElement(Tm,null);case"text":case"textdesign":case"sticker":return Ji.createElement(Vm,null);case"brush":return Ji.createElement(Cm,null);case"transform":return Ji.createElement(Km,null);default:return Ji.createElement(M.Controls.Container,null,Ji.createElement(Jm,null))}};const a=d=>{d.preventDefault();d.stopPropagation();if(r==null?void 0:r.isCanvasClickable){let{clientX:u}=d;let{clientY:m}=d;if(d.type.indexOf("touch")!==-1){const y=d;if(!y.touches.length){return}u=y.touches[0].clientX;m=y.touches[0].clientY}const f=t.current.getBoundingClientRect();const b=u-f.left;const v=m-f.top;r.getContainersAtPreviewPoint({x:b,y:v})}};const l=d=>{if(d.code==="Tab"){o.selectLast()}};const{canvasSize:c}=r;return Ji.createElement(M.Controls.Wrapper,{"aria-hidden":true,ref:t,onClick:a,onKeyDown:l,height:c.height,width:c.width},i,n())});import Vl from"react";import Ul,{css as Qm}from"styled-components";import sC from"react";import aC from"styled-components";var lC=aC.div`
  display: ${({isVisible:i})=>i?"block":"none"};
  position: absolute;
  z-index: ${i=>i.theme.measurements.zIndex.canvas.snappingGuide};
`;var cC=({isVisible:i,className:t})=>{return sC.createElement(lC,{isVisible:i,className:t})};var Nl=cC;var dC=Ul(Nl)`
  background: ${i=>i.theme.snapping.positionGuideColor};
  ${i=>{if(i.direction==="horizontal"){return Qm`
        width: 100%;
        height: 2px;
        top: ${()=>i.position}px;
      `}return Qm`
      width: 2px;
      height: 100%;
      left: ${()=>i.position}px;
    `}}
`;var pC=Ul(Nl)`
  border: none;
  border-top: 2px dashed ${i=>i.theme.snapping.rotationGuideColor};
  background: transparent;
  left: ${({position:i})=>i.x}px;
  top: ${({position:i})=>i.y}px;
  transform: rotate(${({rotation:i})=>i}rad);
  width: 200%;
`;var hC=Ul.div`
  position: absolute;
  width: ${({width:i})=>i}px;
  height: ${({height:i})=>i}px;
  top: ${({top:i})=>i}px;
  left: ${({left:i})=>i}px;
  overflow: hidden;
`;var uC=({snapping:i,editor:t})=>{const{width:e,height:o}=t.getPreviewSize();const{x:r,y:n}=i.previewTopLeftPosition;const a=i.positionGuides.map(({direction:c,value:d,isVisible:u},m)=>Vl.createElement(dC,{key:`positionGuide-${m}`,direction:c,position:d,isVisible:u}));const l=i.rotationGuides.find(({isVisible:c})=>c);return Vl.createElement(hC,{"data-test":S.SnappingLine,width:e,height:o,left:r,top:n},a,Vl.createElement(pC,{key:"rotationGuide",rotation:l?l.value:0,position:l?l.position:{x:0,y:0},isVisible:!!l}))};var tf=O("snapping","editor")(E(uC));import mC from"react";import fC from"styled-components";var gC=fC.img`
  z-index: 5;
  position: absolute;
  width: 100px;
  bottom: 30px;
  right: 30px;
`;var ef=()=>mC.createElement(gC,{alt:"watermark","data-test":S.Watermark,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAaQAAACMCAYAAAAzxN3aAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABMZSURBVHgB7d1tbFTXmQfw4xTXJsZk4hc8LAYPNWDTxOvZJMITNSkInGaTdOUmRWsTdUsrJYvafsh+yDcUqft9VSkftlLYqMRqpJAVQbJ2SeRiU5NCPKAEm1rBr5BxYpKxwNjGJrZxovb+SaYi1Daee8+59zkz/59k0aoUv83c/32e89xzcl7av//XioiIKEA5OTnqLkVERCQAA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCQCA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCQCA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCQCA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCTCCkWUhUYuXQoNJxJl45OToSuXL6+dn5/Pu379euiL+fn8mbm50EL/nxUrVszmfutbsytyc2dznY+CgoLJVYWF42vLypIlJSUTVVVVo4qIXGMgUVa4du1a/rsnT9YifJyPisVCZylffPFFPj7U3NzN/351fPzmn729vTf/RGCtLixMVkQifZsrKxMMKKL0WBFI//3b3+6d+fzztC8gi6n+7nfjP3zyydPL/ftnz56NHD9+vEEZdk8olHz+uefeVD5qa2ur7e7u3qEMa9qzp7l83boJ5aNUCDmVULUTHhFlGMIKnwcfXV1dauXKlROlxcWJWCwWz9ZwMvHe0fVa+v+3367rO38+pkzIyVEbv/Od7h8//fQJpZH296vzdZaWlib2/vSnLUoAKwLpuhNGcy7uaBczOzubr9I0o/HzL/o5RkdDuIiuXr16Vvnkk0uXIn58b35CO+7dP/2pbnh4OHqzognIzMxM6OORkejHhw9HC1etSt5fUxOv37nznMoyUl9f33/kkXM9PT07TL1GBgYGYs77+bTO93P/wEBU98/zusabfa841CAM7uiVj5LJZLXKEAiig83NDQdfe+2FCxcuxIIMo9tNTU+HOzs7f/Rfv/nNC23Hj/v6O6aFISgeevDBVmUIXn/H2tvrlCYjIyMhPyr9IDGQhEF7SfnkVGdnlaSLtluoKo8cObL996+/vs9500aVYKiaUsHU398fVhSox+rru1fm5RlrJX9dJWl5jznhtl1lOAaSMNempsK6XsB34rxZrK+OcFE/cODAvg97e3fYFK4Ipv89fHjfG4cOPe7X75sWVhuNal3nuRVek2fef79KeYTqyNTN1pYtW8S0kRlIwuh6AS+H7e26o0ePxnBRt3kNbMhpLR549dV9aDcqCoTxKqmvz3OQ9PX1VSgDMHjjrGt2KyEYSAL1a3gB3wmmn2xu16GyONvd/bjKAKiW0G48deqULzci9Pd27txpbMpszFn3wftNedBlaBJ248aNYsIIGEgC+dG2O9fTY+XCOn4ueAwAlYXKILg5ON7R0dTe3i56DSxTPfDAA4mie+9NKEPi8bjr9R+Mes8a6AKgOqrbtk3U1CcDSSA/2nZjly9HlGUQRr87eHBvJk8avRePNzCUgvFwLGZsLQlVktshFox6KwNQHfn9bOCdMJCEunjxorH1HbQPbFx3cdpajRifVhkOoeS1xUPpM10lfdDVlXZXwtSot8TqCBhIQo2NjUVMte1sbNdhzSjTn8G4VeuxY40cdPCfySoJD2qn+542NeotsToCBpJQaNsNDQ0ZqQZsa9e9deTIjkxbM7oT/P5bWlqMb1dF32SySkr3QVlTo95SqyNgIAnWY6CSsa1dhyrhfG9vxj8QuBBUhNzVwX8mq6R0HpQ1NeottToCBpJgnyaT1brbdja16/C9H3rjjb0qi2EjTT446y/TVdJyB5ZMjHpLro6Ax08Ilmrb4Q2iNLGpXXesrS3mZzWH4yNKSkqGCwoKxgsLCydX5uXNpP63iWvXQjdu3MgfHx8PX716NaJ8gmeUsL9hOrvTk3eoko6+805EGYAHZe+0ye7J996rMjHqLbk6AgaScGjb6QokjJ3a0q7zq1WHEKqoqOiu3rKlf7k/Z1Qsp8+cqT7X3b3dj5/n1/sbMpB8hNdCZzyeMDFIk3pQdqnXm/Pa0r5mKr06ArbshPtU4/Y+bsZOg+JUR8bDqLKyMv6rX/zi5WebmlrTCX3sEo3tZl588cWXY3V1LSa3nYGrGp70p/Q1NDQY271hqQdlTY16S6+OgIEkHNp2ui5Gn46MWLF3Hb5fk7t2407xqSeeaEYQeT2rBsGEA+PCa9b0K4MuJhJGFrhpcbh4l5eXG9laZ6kHZU2MettQHQEDyQJ9AwOed22wqV1ncvACb8ymxsZmnetyuHA9//zzh0w+VDmaTEYU+c654TA2cbdQxwLVkYlNj22ojoCBZAE8UKc8GhgaiigLYO3IVHWUCiNTb8x/+8lP3sSalDIA+xsq8h1eK2jtKgMWelAWo966Nz22pToCBpIFdLTtLly4YMX6EY4eV4aYDCNA+2/z5s1Ghg/wGuDODcH44ZNPnjBxo7HQg7ImRr1LS0oSNlRHwECyhJe2HS5kU5bcYZta59q6dWuHH2/KH9TXG7mbhuvT03weKQAmbzTwoGzqP5sa9d61a5extqNuHPu2xNdtu1blgnPXZcUwg6l1LrQsdj/zjC9vSly8Xtq//z8VZRTcaAwODtbpbqfh38NuHHguycSo94b1661YO0phhWQJL227j4eHrTj4refDD418nbW1tdbcIZJMJqskHMhpatTbpuoIGEgWcdO2Q7vOll2yTUySoTp6bNcuUadikp1QJZlYS8L78/BbbzUqzWyrjoCBFAC3L2o303Z9vb2unl/BhVz5zERwlhYXJxSRBiarJBPnfNlWHQEDKQBrw2FXD1G6adu5PW3S7wu5qZ0IampqrBh3JTuYqpJ0s7E6AgZSAMrXr//I7Ys6nSf23bbrCletShYUFvr6Yr702WdGpgB1PgBLZLJK0snG6ggYSAHBhp7KhUQiseyKx227bk1ZWUL5bGpq6h6lWVFRUUIRaSa9SrK1OgIGUkCwu7RyAccRLLe95bZd5/Zr82J6elr7uHdubq741grZR3qVZGt1BAykgGzatClpsm3ntl2HrymINtf8jRvaH/p0KqSkIjIAVZLpXd7dsLk6Aj4YGxDcZa0uLEy6CY2v23ZL3gW5bdcVBzSVdv3zz7VXSKFQSOsb88CrrzZem5gQt+MFjsFQ5Cu8f2uj0RPx06cblCA2V0fAQArQhoqKfjeBhLYdKqCl7oQufnWoW9o2btzoe7sOvvzyS/Hb4qCKs2XHdDIPR4/4dUjjctheHQFbdgHa/uijrh/YdO7MFt0sFTsIj46OugqkrdXVCRUA3VuyEPkBVZISwvbqCBhIAULZ7/YMnaV2NThz5oyrLXgw7m37HRaRn1AlmTwHa7kyoToCBlLAysLhYeUCWn2LHUfgtl0XxLg3ke0ejsUCr0wyoToCBlLAYnV12tt2Y2NjEeVCEOPeRLbDVGqQVVKmVEfAQAoYXkh5LsdHF2rbnersrHKzHhPUuHdKnoER2omJCQ4gkC+CrJIypToCBpIA5eXlfcoFtO1uPwJ5YGDAVbuuOAM3Ib0+NcVAIl8EVSVlUnUEDCQBvLTK3j158httu2QyadW4d0rB3Xdrf1Nddtm6JHIjFkCVlEnVETCQBMDdlesjKW4ZYMCWQm7Hp4Ma9065u6BAeyDhea3bK0giUx70uUrKtOoIGEhChMNhz227cz09tW7+DQnj3iUlJaPKgD/39EQUkU/8rJIyrToCBpIQtR7O7Um17cYuX44oFySMexcVFY0rA3p7e12FNJEbflVJmVgdAQNJCC+braJth3ad2y1MJIx7V2zYYKRCuuKsI7FtR37yo0rKxOoIGEhCpDZbVS6gbfdBV1edcgFHlUs4xM7L+PtSsKb2h7Y2Vz+b22GdCz+v5XyYOC8H/+ZCn0uRKKiSwmvWGLvJy9TqCLi5qiBuN1sFt9N1pYLGvUtLSxMjIyOuznBayuDgYMypkk4j9JUHP9+7t2W5f/dgc3OD7u/loYcean1s1y7XD1KTfyYmJ8uUIZlaHQErJEG8bLbq1j+Ul7vausiE9evWJZQBqJKOvv32duUTbOlkIlg3lJfzfCcLtLW11c4a2gE8k6sjYCAJ4mWzVbeCHve+1bZt2/pNHQ09dOFCrL29XXtILORYW5v28ENrrqqqykggYY0NIcq1Nj26urt3KEMyuToCtuyEwWarbtt26SoqKkpIutvycmjhcpx5//3Hy50qw9SFHU6dOlVlojrS3VrF13m+tzeKoY9bn13DDQF+B1XV1d31O3e6nvzMVqyOvGEgCYPNVnt7e31pL1VUVLh69skk7Al29J13IsoAXHj/7+jRxoJVq5pNvLFRZXR2dv6zMqDGw2MBt0IQ4WtcbCITPyPcEDh/J9Lt3OlHo9EOBtPysTryhi07YUxNmy1kc2WlmPWjFEz8rTT4/WP3ht+//vq+tuPHtT6fdLarqwL/ronTQ3VNQr5x6NDjxzs6mpb7NeJn5QTTj/4HR7eznXdHrI68Y4UkEDZbveCseSiDTK5JeIVTOOOnTzcoQ1AF4EJ76ZNPIrvq6094eaPjQo2BiSGDv6/a2lrPd8YII7dfY3J0tPp3Bw+G/uOFF15RArS0tGh5bfzql79sVhqxOvKOgSQQHlQ1HUiSxr1vh1M4z3V3b58xdLeZ8rGz1nPwtdeiG8rLu9ESS6cKQUWU+OijSP/gYMzk8eu4cfA6ePLWkSM7vAbm1PR0GKG2p6mpVQXMrzXWdLA60oOBJBAujK3Hjs2avNBVbtok+jC+2MMPt/6xo6NR+QDBhA/8zEucoL63qCiZn58/m//tb/9t4m/2xo18pxoKXZ+eDt0+CGBSJBLxdDHCutZ5TWuSCLWzZ8/2S3iQWhpWR3owkITCZqsmprVS/rGmJqEEe+R73+s7d+5cws+7YYQM2lP4UAKgOorV1XkaKNA9gt4Zj29nIH0TqyN9ONQg1JYtW4xNwGHc2+uuBX5oaGhoMfVckg2wduT1YuR2B4/FLHQoZLZjdaQPA0momvvuGzZ1MZY47r0QXIzvv//+rHpDpqA68rpNkJfzsZZy+6GQ2YzVkV4MJKG8bLZ6JxLHvRfzL089FS8vL8+q/dtwI9LU2Oh5AuzSZ5+FlQFYS1N0U//AgLG2erZVR8BAEgybrSrNJI97L+bHTz/dikMEVZZAVajjznhubi5PGTA/N8eWneMDpwI1tcaZjdURMJAEM7HZquRx78WgWty9e/ebK316YDhIW7du7UBVqEi8eDxubEeVbKyOgIEkmInNVqWPey8Gd4tNe/Y0Z3IoVVZWxnc/84y2C1FeXt6cMiA3Ly9rB01SWB2ZwUASDputKo2kj3svJZNDCetkz2p+6HTd2rVG2pylpaVGTve1CasjMxhIwtXcd5+2iThbxr2XkgqlTFpTQpsuncP/lmvTpk1JE5Oako4sCQKrI3MYSMJhAEHXZqu2jHvfCd6w2FcNLS5luWg02qqzTXcr3Hw4v3Ot65DSjiwJwp97eoyNvWdzdQQMJAtgs1WlgU3j3suBFlesrq7FxhYeph3/dffuV0wPMHz/0UdP66yS6nfuDHwvuyCNjIyETO2gUlxcnPVhz0CyADZbVR7ZOO69HNiIFS08m55Vclp0J/79uede8eP3ofPhYlSkmfgaSsex9nZja0exbduyujoCBpIFsHeY17tcG8e9lwsXXazBPPXEE6IHHtDu+vnPfvay06Lr8HMtT8fDxVize1bATt9BMl0dcY9Abq5qDa+brdo67p0OvKGdj5ePtbVFBwYHa69evRpRArg53kI3BPbhI0cm3ZxGjDDDw8kqy7E6Ms+KQCooKJi46y59xVy6z2c4n38WLS+lSb6L50M2O4EyNjYWUS6lO+6Nn5HO79lPaOPhA0cvYLfrscuXI6bPVrodqqGysrLhH9TXx6VMNqIyc34eE8s9awpVOdp9Xta5dL93gjI5OZmP95+J7+We1auTrI6+kvPS/v2/VkQZDhuN9g0MVI2Pj4dNVE64eK8Nh/uLS0qS/xSN9klfnEYVmRgerr5y5UrFrRuw4vtwAjS5YcOGfuwUYvtjAmSPnJwcBhJlHxyfMDQ0FMbmo1NTU/cgpObn5/NxYZ6ZmVmwcsCFOjc3dxZ/Onf9k7nOnwife0OhiUgkkrR5Ogo/j2tTU/mrCwtnGUAUFAQS15Ao6+Cie3O9SamEoq92lmcQkQCcsiMiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEgEBhIREYnAQCIiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEgEBhIREYnAQCIiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEgEBhIREYnAQCIiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEiEFYqIKAvl5OQoEuUvfwUYvyPZHkPjVwAAAABJRU5ErkJggg=="});var xC=E(function i(){const t=bC(null);const{canvas:e,config:o}=K();const r=(l=true)=>{if(t==null?void 0:t.current){const{clientWidth:c,clientHeight:d}=t.current;const u=Gt();t.current.width=c*u;t.current.height=d*u;e.saveDimensions({width:c,height:d,render:l})}};const n=new vi((0,of.default)(()=>r(),100,{trailing:true}));yC(()=>{const l=t.current;e.setCanvasElement(l);return()=>{n.disconnect()}},[]);vC(()=>{r(false);n.observe(t.current)});const{licenseChecker:a}=o;return Ao.createElement(Ao.Fragment,null,a&&a.isWhiteLabel()?null:Ao.createElement(ef,null),Ao.createElement(M.Element,{ref:t,"aria-label":"Canvas","data-test":S.Canvas}),Ao.createElement(Zm,null,Ao.createElement(tf,null)))});var rf=class{constructor(t={},e={}){this.getAdvancedCategoryCard=()=>{return this.components.advancedUICategoryCard};this.getAdvancedItemCard=()=>{return this.components.advancedUIItemCard};this.getAdvancedToolbarItem=()=>{return this.components.advancedUIToolbarItem};this.getAdvancedToolbar=()=>{return this.components.advancedUIToolbar};this.getAdvancedToolControlBar=()=>{return this.components.advancedUIToolControlBar};this.getBasicToolbar=()=>{return this.components.basicUIToolbar};this.getBasicToolControlBar=()=>{return this.components.basicUIToolControlBar};this.getBasicToolItemsBar=()=>{return this.components.basicUIToolItemsBar};this.getDialog=()=>{return this.components.dialog};this.getButton=t=>{return this.components.buttons[t]};this.getColorItem=()=>{return this.components.colorItem};this.getCheckbox=()=>{return this.components.checkbox};this.getWindowContainer=()=>{return this.components.windowContainer};this.getSlider=()=>{return this.components.slider};const o={dialog:A.Dialog,colorItem:A.ColorItem,checkbox:A.Input.Checkbox,slider:A.Input.Slider,buttons:{mainCanvasActionUndo:M.Button.TextSecondary,mainCanvasActionRedo:M.Button.TextSecondary,mainCanvasActionExport:_s,mainCanvasActionClose:ro,canvasActionEdit:M.Controls.SpriteActionButton,canvasActionBringToFront:M.Controls.SpriteActionButton,canvasActionDuplicate:M.Controls.SpriteActionButton,canvasActionDelete:M.Controls.SpriteActionButton,canvasActionInvert:M.Controls.SpriteActionButton,canvasActionFlip:M.Controls.SpriteActionButton,transformActionFlipHorizontal:gi,transformActionFlipVertical:gi,transformActionRotateClockwise:gi,transformActionRotateAntiClockwise:gi,textAlignment:gi,toolControlBarPrimaryButton:Hs,toolControlBarSecondaryButton:ro},windowContainer:rh};this.components=wt([o,e,t])}};import di from"react";var SC=({modal:i,textTool:t,textDesignTool:e,custom:o})=>{const{type:r,identifier:n,isVisible:a,modalProps:l,positionOffset:c}=i;const{headerLabel:d,bodyLabel:u,confirmLabel:m,dismissLabel:f,handleClose:b,handleConfirm:v,handleDismiss:y}=l;const x=o.getDialog();if(r==="info"){return di.createElement(A.InfoModal,{headerLabel:d,bodyLabel:u},di.createElement(x,{type:r,isVisible:a,identifier:n,position:c,handleClose:b,headerLabel:d,bodyLabel:u}))}if(r==="textEdit"){const{buttonSave:C,buttonClose:D}=t.locale.canvasControls;const z={type:r,isVisible:i.isVisible,confirmLabel:C,dismissLabel:D,headerLabel:t.locale.canvasControls.inputText};if(t.isTextSelected){return di.createElement(A.TextEditModal,{...z,defaultText:B.defaultText(),handleConfirm:t.changeText,handleDismiss:t.setEditMode,text:t.text,maxLength:t.config.maxCharacterLimit,allowEmojis:t.config.allowEmojis},di.createElement(x,{type:r,isVisible:a,identifier:n,position:c,handleClose:b,confirmLabel:C,dismissLabel:D,headerLabel:t.locale.canvasControls.inputText}))}if(e.isTextDesignSelected){return di.createElement(A.TextEditModal,{...z,defaultText:N.defaultText(),handleConfirm:e.changeText,handleDismiss:e.setEditMode,text:e.text,maxLength:e.config.maxCharacterLimit,allowEmojis:e.config.allowEmojis},di.createElement(x,{type:r,isVisible:a,identifier:n,position:c,handleClose:b,confirmLabel:C,dismissLabel:D,headerLabel:t.locale.canvasControls.inputText}))}}return di.createElement(A.ActionModal,{type:r,headerLabel:d,bodyLabel:u,confirmLabel:m,dismissLabel:f,handleClose:b,handleConfirm:v,handleDismiss:y},di.createElement(x,{type:r,isVisible:a,identifier:n,position:c,confirmLabel:m,dismissLabel:f,headerLabel:d,bodyLabel:u,handleClose:b}))};var CC=O("textTool","textDesignTool","modal","custom")(E(SC));import Lo from"react";import sf from"styled-components";import us from"react";import wC from"styled-components";var kC=wC.div`
  position: absolute;
  right: 8px;
  top: 8px;
`;var nf=class extends us.Component{constructor(t){super(t);this.onChange=t=>{this.setState({value:t.replace(/[^\d.,-]/g,""),isSubmitted:false})};this.onSubmit=()=>{const{getCorrectValue:t}=this.props;const{isSubmitted:e,value:o}=this.state;if(!e){this.setState({value:t(parseInt(o,10)||0).toString(),isSubmitted:true})}};this.state={isSubmitted:false,value:t.value.toString()}}componentDidUpdate(t){const{value:e}=this.props;if(t.value!==e){this.setState({value:e.toString()})}}render(){const{id:t,isDisabled:e,label:o}=this.props;const{value:r}=this.state;return us.createElement(A.Input.Text,{id:t,value:r,isDisabled:e,onChange:this.onChange,onBlur:this.onSubmit,onKeyUp:Tc(this.onSubmit)},us.createElement(kC,null,us.createElement(A.Input.Label,{label:o,htmlFor:t})))}};var Gl=nf;var TC=sf.div`
  display: inline-flex;
  justify-content: space-between;
  max-width: ${i=>i.theme.measurements.inputs.cropSize.maxWidth}px;
`;var IC=sf.span`
  font-size: ${i=>i.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${i=>i.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${i=>i.theme.measurements.fontSystem.body.case};
  color: ${i=>i.theme.textInput.foreground};
  margin-top: 10px;
  margin-right: 13px;
`;var MC="photoeditorsdk-transformScaleWidth";var DC="photoeditorsdk-transformScaleHeight";var EC=({showLabel:i=true,label:t,isDisabled:e,valueHeight:o,valueWidth:r,labelWidth:n,labelHeight:a,onSubmitWidth:l,onSubmitHeight:c})=>{return Lo.createElement("div",null,Lo.createElement(A.Input.Label,{label:t,show:i}),Lo.createElement(TC,null,Lo.createElement(Gl,{id:MC,value:r,getCorrectValue:l,label:n,isDisabled:e}),Lo.createElement(IC,null,"x"),Lo.createElement(Gl,{id:DC,value:o,getCorrectValue:c,label:a,isDisabled:e})))};var PC=EC;import zC from"styled-components";var AC=zC.div`
  display: flex;
  justify-content: center;
  align-items: center;
  animation: ${Ap.scale} 0.2s linear;
  animation-fill-mode: both;
  height: 40px;
  min-width: 350px;
  @media all and (min-width: 0) and (max-width: 599px) {
    min-width: 280px;
  }
`;var af=AC;import lf from"react";import LC,{css as BC}from"styled-components";var cf=BC`
  background: ${i=>i.theme.tabTitle.activeBackground};
  color: ${i=>i.theme.tabTitle.activeForeground};
  border-bottom: 1px solid ${i=>i.theme.tabTitle.activeBorderColor};
`;var OC=LC(Fe)`
  display: inline-flex;
  align-items: center;
  font-size: ${i=>i.theme.measurements.fontSystem.basicUITabLabel.size}px;
  letter-spacing: ${i=>i.theme.measurements.fontSystem.basicUITabLabel.letterSpacing}px;
  text-transform: ${i=>i.theme.measurements.fontSystem.basicUITabLabel.case};
  color: ${i=>i.theme.tabTitle.foreground};
  border-radius: 0px;
  padding: 1px 12px 2px;
  background: ${i=>i.theme.tabTitle.background};

  ${({isActive:i})=>i&&cf}

  &:active {
    ${cf}
  }

  @media all and (min-width: 0) and (max-width: 599px) {
    max-width: 150px;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
`;var ms=class extends lf.Component{constructor(){super(...arguments);this.onClick=()=>{const{label:t,onClick:e}=this.props;e(t)}}render(){const{activeTab:t,label:e}=this.props;return lf.createElement(OC,{ariaLabel:e,isActive:t===e,onClick:this.onClick},e)}};var FC=df(fi)`
  display: inline-flex;
  padding: 0 4px;
  height: 20px;
  font-size: 16px;
`;var RC=df(rr)`
  display: inline-flex;
  justify-content: center;
  transform: translate(-100%, -100%);
  @media all and (min-width: 0) and (max-width: 499px) {
    left: 0;
    right: 0;
    transform: translateY(-120%);
    background: transparent;
    button {
      &:first-child {
        border-bottom-right-radius: 0;
        border-top-right-radius: 0;
      }
      &:last-child {
        border-bottom-left-radius: 0;
        border-top-left-radius: 0;
      }
      &:not(:first-child):not(:last-child) {
        border-radius: 0;
      }
    }
  }
`;var pf=class extends Et.Component{constructor(t){super(t);this.onTabClick=t=>{this.setState({activeTab:t,toggleExtend:false})};this.getDropUp=()=>{const{length:t}=this.props;const{toggleExtend:e}=this.state;const o=Et.Children.toArray(this.props.children);const r=Et.Children.count(this.props.children);const n=o.slice(t,r);return Et.createElement(RC,{show:e},n.map(a=>{const l=a.props.label||"";return Et.createElement(Fe,{onClick:()=>this.onTabClick(l),key:l,ariaLabel:"More Options"},l)}))};this.extend=()=>{this.setState(({toggleExtend:t})=>({toggleExtend:!t}))};this.getExtension=()=>{return Et.createElement(FC,{onClick:this.extend,ariaLabel:"Select Next"},"...")};const e=Et.Children.count(this.props.children);const o=Et.Children.toArray(this.props.children);this.state={activeTab:e?o[0].props&&o[0].props.label||"":"",toggleExtend:false}}render(){const{length:t}=this.props;const{activeTab:e,toggleExtend:o}=this.state;const r=Et.Children.toArray(this.props.children).slice(0,t);const n=Et.Children.count(this.props.children)>t;return Et.createElement("div",null,r.map(a=>{if(a){const l=a.props.label||"";return Et.createElement(ms,{activeTab:e,key:l,label:l,onClick:this.onTabClick})}return null}),n?this.getExtension():null,o?this.getDropUp():null,Et.Children.map(this.props.children,a=>{if(!a||a.props&&a.props.label!==e){return null}return Et.createElement(af,{key:a.props.label},a.props.children)}))}};var Dr=pf;var _C=HC.div`
  position: relative;
  white-space: nowrap;
  display: flex;
  transition: all 0.2s linear;
`;var gs=class extends Er.Component{constructor(t){super(t);this.updateLength=()=>{const{maxWidth:t,children:e}=this.props;let o=0;if(t){o=t}else{const a=window.innerWidth;const l=a>600?300:200;o=a-l}const r=Er.Children.count(e);const n=o-r*gs.TAB_WIDTH;if(n<0){const a=Math.round(Math.abs(n/gs.TAB_WIDTH));this.setState({length:r-a})}};this.state={length:Er.Children.count(this.props.children)}}componentDidMount(){window.addEventListener("resize",this.updateLength);this.updateLength()}componentWillUnmount(){window.removeEventListener("resize",this.updateLength)}render(){const{children:t}=this.props;const{length:e}=this.state;if(!e){return null}return Er.createElement(_C,null,Er.createElement(Dr,{length:e},t))}};var fs=gs;fs.TAB_WIDTH=120;import $C,{css as WC}from"styled-components";var NC=$C.div`
  &:after {
    content: '';
    position: absolute;
    bottom: 0px;
    ${i=>i.full?WC`
            left: -24px;
            width: calc(100% + 48px);
          `:`
      left: 24px;
      width: calc(100% - 48px);
    `}
    border-bottom: 1px solid ${i=>i.theme.toolControlBar.separatorColor};
  }
`;var hf=NC;import VC from"react";var uf=({style:i,children:t,...e})=>{const{custom:o}=K();const r=o.getSlider();if(!r){return null}return VC.createElement(r,{centerSlider:true,style:{maxWidth:"224px",...i},...e},t)};import UC,{css as GC}from"styled-components";var jC=UC.div.attrs(()=>({"data-test":S.CategoryItemsContainer}))`
  visibility: hidden;
  opacity: 0;
  display: none;

  ${({show:i})=>i&&GC`
      opacity: 1;
      visibility: visible;
      display: flex;
    `}
`;var mf=jC;import XC,{css as ff}from"styled-components";var jl=XC.div.attrs(()=>({"data-test":S.ToolControlBar}))`
  display: flex;
  flex-shrink: 0;
  justify-content: center;
  position: relative;
  width: 100%;
  z-index: ${i=>i.theme.measurements.zIndex.toolControlBar};

  ${i=>i.show?ff`
          transition-timing-function: ease-in;
          transition-duration: 0.3s;
          transition-property: all;
          padding: 2px 0px;
          background: ${i.theme.toolControlBar.background};
          color: ${i.theme.toolControlBar.inputLabelForeground};
        `:ff`
          max-height: 0px;
        `}
`;jl.defaultProps={show:true};import YC from"styled-components";var KC=YC.div`
  height: ${i=>i.theme.measurements.basicUIToolControlBar.itemsBarHeight}px;
  width: 2px;
  margin: 0 10px;
  display: inline-flex;
  position: relative;
  &:after {
    content: ' ';
    right: 0px;
    position: absolute;
    top: 8px;
    height: calc(100% - 16px);
    border-right: 1px solid
      ${i=>i.theme.toolControlBar.separatorColor};
  }
`;var gf=KC;import xf from"react";import qC,{css as Sf}from"styled-components";import bs,{css as Xl}from"styled-components";var yf=bs.span`
  display: flex;
  cursor: pointer;
  z-index: ${i=>i.theme.measurements.zIndex.label};
  transition: bottom 0.3s linear;

  color: ${i=>i.theme.toolbar.foreground};
  letter-spacing: ${i=>i.theme.measurements.fontSystem.body.letterSpacing};
  font-size: ${i=>i.theme.measurements.fontSystem.body.size}px;

  ${({isActive:i})=>i&&Xl`
      color: ${t=>t.theme.toolbar.activeForeground};
    `}

  &:active {
    color: ${i=>i.theme.toolbar.activeForeground};
  }
`;var bf=Xl`
  background-color: ${i=>i.theme.toolbar.activeBackground};
  color: ${i=>i.theme.toolbar.activeForeground};

  svg {
    color: ${i=>i.theme.toolbar.activeForeground};
  }
`;var ys=bs(ft)`
  display: block;
  height: 100%;
  width: 100%;
  color: ${i=>i.theme.toolbar.foreground};
  background-color: ${i=>i.theme.toolbar.background};
  border: unset;
  box-shadow: unset;
  font-size: ${i=>i.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${i=>i.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${i=>i.theme.measurements.fontSystem.label.case};
  font-family: '${i=>i.theme.typography.fontFamily}', sans-serif;

  ${({isActive:i})=>i&&bf}
  ${({isDisabled:i})=>i&&Xl`
      &:disabled {
        cursor: default;
        pointer-events: none;
        opacity: ${t=>t.theme.button.textInactiveOpacity};
      }
    `}

  &:active {
    ${bf}
  }

  svg {
    display: flex;
    transition: visibility 0s, opacity 0.5s linear;
    visibility: visible;
    opacity: 1;
  }
`;var vf=bs.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;

  svg {
    color: ${i=>i.theme.toolbar.foreground};
  }
`;var vs=bs.div.attrs({role:"none"})`
  display: flex;
  height: ${i=>i.theme.measurements.basicUIToolbar.openHeight-2}px;
  text-align: center;
  min-width: 100px;
  /* Allow the text to grow in this limit */
  max-width: 150px;
  position: relative;
  /* Position inline-block box at the top of the line box */
  vertical-align: top;
  /* Allow text to wrap again, overwriting the Toolbar style */
  white-space: normal;
  margin: 1px;
`;var JC=qC.div`
  display: flex;
  flex-shrink: 0;
  justify-content: center;
  position: relative;
  width: 100%;
  transition: height 0.2s ease-out, display 0.1s fade-out;
  background-color: ${i=>i.theme.toolbar.background};
  color: ${i=>i.theme.toolbar.foreground};
  z-index: ${i=>i.theme.measurements.zIndex.toolbar};

  ${i=>i.show?Sf`
          height: ${i.theme.measurements.basicUIToolbar.closeHeight}px;
          ${ys} {
            svg {
              visibility: hidden;
              opacity: 0;
              height: 0;
            }
          }
          ${vs} {
            height: ${i.theme.measurements.basicUIToolbar.closeHeight}px;
          }
        `:Sf`
          height: ${i.theme.measurements.basicUIToolbar.openHeight}px;
        `}
`;var Cf=({show:i=false,className:t,style:e,children:o})=>xf.createElement(JC,{"data-test":S.Toolbar,show:i,className:t,style:e},xf.createElement(ki,null,o));import xs from"react";var wf=({children:i,label:t,isActive:e,isDisabled:o,onClick:r})=>xs.createElement(vs,{"aria-haspopup":true,"aria-expanded":e},xs.createElement(ys,{"data-test":S.ToolbarItem,ariaLabel:t,onClick:r,isActive:e,isDisabled:o},xs.createElement(vf,null,i,xs.createElement(yf,{isActive:e},t))));import ZC,{css as kf}from"styled-components";var QC=ZC.li.attrs({role:"none"})`
  ${i=>!i.active?kf`
          height: ${i.theme.measurements.basicUIToolbar.openHeight}px;
        `:kf`
          height: ${i.theme.measurements.basicUIToolbar.closeHeight}px;
        `}
  width: 2px;
  display: inline-block;
  position: relative;
  &:after {
    content: ' ';
    right: 0px;
    position: absolute;
    top: 8px;
    height: calc(100% - 16px);
    border-right: 1px solid
      ${i=>i.theme.toolControlBar.separatorColor};
  }
`;var Tf=QC;var AG={CardContainer:lh,ExpandableContainer:mf,CategoryContainer:dh,Card:ah,CardAvatar:Ws,CardLabel:ch,Toolbar:{Index:Cf,Item:wf,Separator:Tf},BarSeparator:hf,ItemsSeparator:gf,Itemsbar:jl,Controlsbar:uh,ControlsbarContainer:gh,ResponsiveTabWrapper:fs,Slider:uf,TabWrapper:Dr,Tab:pl,Other:{ControlsWrapper:mh,EmptyDiv:fh}};import Bo,{useRef as If,useLayoutEffect as t2,useState as Ss}from"react";var Mf=ui(jo());var Yl=24;var NG=E(function i(){const{active:t,modal:e,editor:o}=K();const r=If(null);const n=If(null);const[a,l]=Ss(0);const[c,d]=Ss(null);const[u,m]=Ss(0);const[f,b]=Ss(0);t2(()=>{const C=()=>{const{measurements:L}=o.configStore;const{height:R,width:P}=n.current.getBoundingClientRect();const V=R*.95;const U=P*.95;const nt=(R-V)/2;l(nt<Yl+L.buttons.float.size?R-Yl*2-L.buttons.float.size/2:R-nt+Yl);m(V);b(U)};const D=new vi((0,Mf.default)(()=>C(),100,{trailing:true}));if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){navigator.mediaDevices.getUserMedia({video:true}).then(L=>{r.current.srcObject=L}).catch(()=>{e.showActionModal({type:"error",identifier:"webcamUnavailable",error:"Webcam not supported",handleConfirm:()=>{t.selectWebcam(false)}})})}else{e.showActionModal({type:"error",identifier:"webcamUnavailable",error:"Webcam not supported",handleConfirm:()=>{t.selectWebcam(false)}})}C();D.observe(n.current);const z=document.createElement("canvas");d(z);return()=>{Qi(z);D.disconnect()}},[o,e,t]);const v=()=>{const C=r.current.srcObject;const D=C.getTracks();D.forEach(z=>{z.stop()});r.current.srcObject=null;t.selectWebcam(false)};const y=()=>{if(c){c.width=r.current.videoWidth;c.height=r.current.videoHeight;c.getContext("2d").drawImage(r.current,0,0);t.newImage(c.toDataURL("image/webp"));v()}};const x=t.webcamLabel;return Bo.createElement(M.Wrapper,{ref:n},Bo.createElement(M.Bar.Index,{transparentBackgound:true,style:{justifyContent:"flex-end"}},Bo.createElement(M.Bar.ButtonGroup,null,Bo.createElement(ro,{ariaLabel:x,onClick:v},x))),Bo.createElement(M.Webcam,{style:{height:u,width:f},autoPlay:true,ref:r}),Bo.createElement(M.Button.Float,{ariaLabel:"Click and Save",style:{top:a},onClick:y}))});import e2 from"react";var XG=({children:i})=>{return e2.createElement(M.Container,{"data-test":S.CanvasContainer},i)};import r2 from"react";import{useState as i2,useEffect as o2}from"react";var Df=()=>{const[i,t]=i2([]);o2(()=>{var e;if(typeof window!==void 0&&((e=window.navigator)==null?void 0:e.mediaDevices)){let o=true;const r=()=>{window.navigator.mediaDevices.enumerateDevices().then(n=>{if(o){t(n.map(({deviceId:a,groupId:l,kind:c,label:d})=>({deviceId:a,groupId:l,kind:c,label:d})))}}).catch(()=>null)};window.navigator.mediaDevices.addEventListener("devicechange",r);r();return()=>{o=false;window.navigator.mediaDevices.removeEventListener("devicechange",r)}}return null},[]);return i};var ij=E(({tool:i,fullWidth:t=false,icon:e,label:o,onClick:r})=>{const{custom:n}=K();const a=Df();if(!a.some(({kind:c})=>c==="videoinput")){return null}const l=n.getButton("toolControlBarSecondaryButton");if(!l){return null}return r2.createElement(l,{"data-test":S.LibraryWebcamButton,tool:i,label:o,ariaLabel:o,onClick:r,fullWidth:t,icon:e})});export{E as a,gb as b,O as c,Fc as d,ki as e,Wo as f,fi as g,Hs as h,ro as i,gi as j,_s as k,Ti as l,$s as m,Ws as n,B1 as o,OI as p,A as q,Lp as r,Fe as s,K as t,Ot as u,wF as v,kF as w,TF as x,Q as y,IF as z,ml as A,bo as B,B as C,wt as D,j1 as E,Un as F,Dx as G,xS as H,$l as I,xC as J,rh as K,rf as L,CC as M,PC as N,NG as O,XG as P,ij as Q,pl as R,AG as S};
